var e=Object.defineProperty,t=(t,a,n)=>(((t,a,n)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n})(t,"symbol"!=typeof a?a+"":a,n),n);import{r as a,o as n,a as r,g as s,d as o,c as l,b as i,u,e as c,R as d,s as v,w as m,f as p,h as f,T as g,i as h,n as y,t as b,j as x,F as w,k,l as S,m as _,v as C,p as T,q as E,x as I,y as A,z as R,A as B,B as P,C as M,D as O,E as j,G as D,H as L}from"./vue-vendor-5b54eefa.js";import{l as U}from"./socket-vendor-ecb271fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const F=a(null),z=a(null),N=a(!1);let H=null;const $=a("idle"),q=a(""),G=a(0);function W(){const e=!!s();function t(){const e={}.VITE_API_URL?{}.VITE_API_URL:window.location.origin,n=localStorage.getItem("spacechat_user_id");F.value=U(e,{autoConnect:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,reconnectionDelayMax:1e4,timeout:3e4,transports:["websocket"],extraHeaders:{"X-Client-Version":"1.0.0"},query:n?{userId:n}:void 0,forceNew:!1,withCredentials:!0}),function(){if(!F.value)return;F.value.on("connect",()=>{var e,t;N.value=!0;const a=localStorage.getItem("spacechat_user_id");null==(e=F.value)||e.emit("user:identify",{prevUserId:a||void 0},e=>{z.value=e,localStorage.setItem("spacechat_user_id",e)}),null==(t=F.value)||t.emit("get-online-count")}),F.value.on("disconnect",()=>{N.value=!1}),F.value.on("reconnect",e=>{var t;N.value=!0;const a=localStorage.getItem("spacechat_user_id");a&&(null==(t=F.value)||t.emit("user:identify",{prevUserId:a},e=>{var t;z.value=e,e!==a&&localStorage.setItem("spacechat_user_id",e),null==(t=F.value)||t.emit("get-online-count")}))}),F.value.on("reconnect_attempt",e=>{}),F.value.on("reconnect_error",e=>{}),F.value.on("reconnect_failed",()=>{setTimeout(()=>{N.value||(a(),t())},5e3)}),F.value.on("error",e=>{}),F.value.on("pong",()=>{}),F.value.on("user-id",e=>{z.value=e,localStorage.setItem("spacechat_user_id",e)}),F.value.on("queue-timeout",e=>{$.value="timeout",q.value="We couldn't find a suitable match in the allotted time. Please try again.",G.value=e.waitTime,window.dispatchEvent(new CustomEvent("queue-status-changed",{detail:{status:"timeout",message:q.value,waitTime:e.waitTime}}))}),F.value.on("queue-waiting",e=>{$.value="waiting",q.value="We're still looking for a match for you. Please wait...",G.value=e.waitTime,window.dispatchEvent(new CustomEvent("queue-status-changed",{detail:{status:"waiting",message:q.value,waitTime:e.waitTime}}))}),F.value.on("matched",()=>{$.value="matched",q.value="",G.value=0}),F.value.on("join-queue",()=>{$.value="waiting",q.value="Looking for someone matching your preferences...",G.value=0}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&F.value&&F.value.connected&&F.value.emit("heartbeat")})}(),function(){H&&clearInterval(H);H=setInterval(()=>{F.value&&N.value&&F.value.emit("heartbeat")},45e3)}()}function a(){F.value&&(F.value.off("connect"),F.value.off("disconnect"),F.value.off("reconnect"),F.value.off("reconnect_attempt"),F.value.off("reconnect_error"),F.value.off("reconnect_failed"),F.value.off("error"),F.value.off("user-id"),F.value.off("pong"),F.value.off("queue-timeout"),F.value.off("queue-waiting"))}return F.value||t(),e&&(n(()=>{F.value||t()}),r(()=>{F.value&&a(),H&&(clearInterval(H),H=null)})),{socket:F,userId:z,isConnected:N,queueStatus:$,queueMessage:q,queueWaitTime:G,reconnect:function(){F.value?(F.value.disconnect(),F.value.connect()):t()},isInSetupContext:e}}const Y={class:"app-container"},K=o({__name:"App",setup:e=>(window.addEventListener("error",e=>(e.preventDefault(),!0)),window.addEventListener("unhandledrejection",e=>(e.preventDefault(),!0)),function(){const{socket:e}=W(),t=!!s(),o=a(!0),l=a(Date.now());let i=0,u=null;const c=()=>{const t=Date.now();l.value=t,o.value=!0,t-i>3e4&&(i=t,e.value&&e.value.connected&&e.value.emit("user-activity")),d()},d=()=>{u&&clearTimeout(u),u=window.setTimeout(()=>{o.value=!1},18e5)},v=()=>{["mousedown","mousemove","keydown","scroll","touchstart","click","touchmove"].forEach(e=>{document.addEventListener(e,c,{passive:!0})}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&c()}),c()},m=()=>{["mousedown","mousemove","keydown","scroll","touchstart","click","touchmove"].forEach(e=>{document.removeEventListener(e,c)}),document.removeEventListener("visibilitychange",c),u&&(clearTimeout(u),u=null)};t?(n(()=>{v()}),r(()=>{m()})):v()}(),(e,t)=>(c(),l("div",Y,[i(u(d))])))});function V(e,t){return function(){return e.apply(t,arguments)}}const{toString:X}=Object.prototype,{getPrototypeOf:J}=Object,{iterator:Z,toStringTag:Q}=Symbol,ee=(te=Object.create(null),e=>{const t=X.call(e);return te[t]||(te[t]=t.slice(8,-1).toLowerCase())});var te;const ae=e=>(e=e.toLowerCase(),t=>ee(t)===e),ne=e=>t=>typeof t===e,{isArray:re}=Array,se=ne("undefined");const oe=ae("ArrayBuffer");const le=ne("string"),ie=ne("function"),ue=ne("number"),ce=e=>null!==e&&"object"==typeof e,de=e=>{if("object"!==ee(e))return!1;const t=J(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Q in e||Z in e)},ve=ae("Date"),me=ae("File"),pe=ae("Blob"),fe=ae("FileList"),ge=ae("URLSearchParams"),[he,ye,be,xe]=["ReadableStream","Request","Response","Headers"].map(ae);function we(e,t,{allOwnKeys:a=!1}={}){if(null==e)return;let n,r;if("object"!=typeof e&&(e=[e]),re(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function ke(e,t){t=t.toLowerCase();const a=Object.keys(e);let n,r=a.length;for(;r-- >0;)if(n=a[r],t===n.toLowerCase())return n;return null}const Se="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,_e=e=>!se(e)&&e!==Se;const Ce=(Te="undefined"!=typeof Uint8Array&&J(Uint8Array),e=>Te&&e instanceof Te);var Te;const Ee=ae("HTMLFormElement"),Ie=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),Ae=ae("RegExp"),Re=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),n={};we(a,(a,r)=>{let s;!1!==(s=t(a,r,e))&&(n[r]=s||a)}),Object.defineProperties(e,n)};const Be=ae("AsyncFunction"),Pe=(Me="function"==typeof setImmediate,Oe=ie(Se.postMessage),Me?setImmediate:Oe?(je=`axios@${Math.random()}`,De=[],Se.addEventListener("message",({source:e,data:t})=>{e===Se&&t===je&&De.length&&De.shift()()},!1),e=>{De.push(e),Se.postMessage(je,"*")}):e=>setTimeout(e));var Me,Oe,je,De;const Le="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Se):"undefined"!=typeof process&&process.nextTick||Pe,Ue={isArray:re,isArrayBuffer:oe,isBuffer:function(e){return null!==e&&!se(e)&&null!==e.constructor&&!se(e.constructor)&&ie(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ie(e.append)&&("formdata"===(t=ee(e))||"object"===t&&ie(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&oe(e.buffer),t},isString:le,isNumber:ue,isBoolean:e=>!0===e||!1===e,isObject:ce,isPlainObject:de,isReadableStream:he,isRequest:ye,isResponse:be,isHeaders:xe,isUndefined:se,isDate:ve,isFile:me,isBlob:pe,isRegExp:Ae,isFunction:ie,isStream:e=>ce(e)&&ie(e.pipe),isURLSearchParams:ge,isTypedArray:Ce,isFileList:fe,forEach:we,merge:function e(){const{caseless:t}=_e(this)&&this||{},a={},n=(n,r)=>{const s=t&&ke(a,r)||r;de(a[s])&&de(n)?a[s]=e(a[s],n):de(n)?a[s]=e({},n):re(n)?a[s]=n.slice():a[s]=n};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&we(arguments[r],n);return a},extend:(e,t,a,{allOwnKeys:n}={})=>(we(t,(t,n)=>{a&&ie(t)?e[n]=V(t,a):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,n)=>{let r,s,o;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],n&&!n(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==a&&J(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:ee,kindOfTest:ae,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const n=e.indexOf(t,a);return-1!==n&&n===a},toArray:e=>{if(!e)return null;if(re(e))return e;let t=e.length;if(!ue(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[Z]).call(e);let n;for(;(n=a.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const n=[];for(;null!==(a=e.exec(t));)n.push(a);return n},isHTMLForm:Ee,hasOwnProperty:Ie,hasOwnProp:Ie,reduceDescriptors:Re,freezeMethods:e=>{Re(e,(t,a)=>{if(ie(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const n=e[a];ie(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))})},toObjectSet:(e,t)=>{const a={},n=e=>{e.forEach(e=>{a[e]=!0})};return re(e)?n(e):n(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,a){return t.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ke,global:Se,isContextDefined:_e,isSpecCompliantForm:function(e){return!!(e&&ie(e.append)&&"FormData"===e[Q]&&e[Z])},toJSONObject:e=>{const t=new Array(10),a=(e,n)=>{if(ce(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const r=re(e)?[]:{};return we(e,(e,t)=>{const s=a(e,n+1);!se(s)&&(r[t]=s)}),t[n]=void 0,r}}return e};return a(e,0)},isAsyncFn:Be,isThenable:e=>e&&(ce(e)||ie(e))&&ie(e.then)&&ie(e.catch),setImmediate:Pe,asap:Le,isIterable:e=>null!=e&&ie(e[Z])};function Fe(e,t,a,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}Ue.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.status}}});const ze=Fe.prototype,Ne={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ne[e]={value:e}}),Object.defineProperties(Fe,Ne),Object.defineProperty(ze,"isAxiosError",{value:!0}),Fe.from=(e,t,a,n,r,s)=>{const o=Object.create(ze);return Ue.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Fe.call(o,e.message,t,a,n,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};function He(e){return Ue.isPlainObject(e)||Ue.isArray(e)}function $e(e){return Ue.endsWith(e,"[]")?e.slice(0,-2):e}function qe(e,t,a){return e?e.concat(t).map(function(e,t){return e=$e(e),!a&&t?"["+e+"]":e}).join(a?".":""):t}const Ge=Ue.toFlatObject(Ue,{},null,function(e){return/^is[A-Z]/.test(e)});function We(e,t,a){if(!Ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(a=Ue.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Ue.isUndefined(t[e])})).metaTokens,r=a.visitor||u,s=a.dots,o=a.indexes,l=(a.Blob||"undefined"!=typeof Blob&&Blob)&&Ue.isSpecCompliantForm(t);if(!Ue.isFunction(r))throw new TypeError("visitor must be a function");function i(e){if(null===e)return"";if(Ue.isDate(e))return e.toISOString();if(!l&&Ue.isBlob(e))throw new Fe("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(e)||Ue.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,a,r){let l=e;if(e&&!r&&"object"==typeof e)if(Ue.endsWith(a,"{}"))a=n?a:a.slice(0,-2),e=JSON.stringify(e);else if(Ue.isArray(e)&&function(e){return Ue.isArray(e)&&!e.some(He)}(e)||(Ue.isFileList(e)||Ue.endsWith(a,"[]"))&&(l=Ue.toArray(e)))return a=$e(a),l.forEach(function(e,n){!Ue.isUndefined(e)&&null!==e&&t.append(!0===o?qe([a],n,s):null===o?a:a+"[]",i(e))}),!1;return!!He(e)||(t.append(qe(r,a,s),i(e)),!1)}const c=[],d=Object.assign(Ge,{defaultVisitor:u,convertValue:i,isVisitable:He});if(!Ue.isObject(e))throw new TypeError("data must be an object");return function e(a,n){if(!Ue.isUndefined(a)){if(-1!==c.indexOf(a))throw Error("Circular reference detected in "+n.join("."));c.push(a),Ue.forEach(a,function(a,s){!0===(!(Ue.isUndefined(a)||null===a)&&r.call(t,a,Ue.isString(s)?s.trim():s,n,d))&&e(a,n?n.concat(s):[s])}),c.pop()}}(e),t}function Ye(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Ke(e,t){this._pairs=[],e&&We(e,this,t)}const Ve=Ke.prototype;function Xe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Je(e,t,a){if(!t)return e;const n=a&&a.encode||Xe;Ue.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let s;if(s=r?r(t,a):Ue.isURLSearchParams(t)?t.toString():new Ke(t,a).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}Ve.append=function(e,t){this._pairs.push([e,t])},Ve.toString=function(e){const t=e?function(t){return e.call(this,t,Ye)}:Ye;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Ze=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ue.forEach(this.handlers,function(t){null!==t&&e(t)})}},Qe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},et={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ke,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},tt="undefined"!=typeof window&&"undefined"!=typeof document,at="object"==typeof navigator&&navigator||void 0,nt=tt&&(!at||["ReactNative","NativeScript","NS"].indexOf(at.product)<0),rt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,st=tt&&window.location.href||"http://localhost",ot={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:tt,hasStandardBrowserEnv:nt,hasStandardBrowserWebWorkerEnv:rt,navigator:at,origin:st},Symbol.toStringTag,{value:"Module"})),...et};function lt(e){function t(e,a,n,r){let s=e[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),l=r>=e.length;if(s=!s&&Ue.isArray(n)?n.length:s,l)return Ue.hasOwnProp(n,s)?n[s]=[n[s],a]:n[s]=a,!o;n[s]&&Ue.isObject(n[s])||(n[s]=[]);return t(e,a,n[s],r)&&Ue.isArray(n[s])&&(n[s]=function(e){const t={},a=Object.keys(e);let n;const r=a.length;let s;for(n=0;n<r;n++)s=a[n],t[s]=e[s];return t}(n[s])),!o}if(Ue.isFormData(e)&&Ue.isFunction(e.entries)){const a={};return Ue.forEachEntry(e,(e,n)=>{t(function(e){return Ue.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,a,0)}),a}return null}const it={transitional:Qe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",n=a.indexOf("application/json")>-1,r=Ue.isObject(e);r&&Ue.isHTMLForm(e)&&(e=new FormData(e));if(Ue.isFormData(e))return n?JSON.stringify(lt(e)):e;if(Ue.isArrayBuffer(e)||Ue.isBuffer(e)||Ue.isStream(e)||Ue.isFile(e)||Ue.isBlob(e)||Ue.isReadableStream(e))return e;if(Ue.isArrayBufferView(e))return e.buffer;if(Ue.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return We(e,new ot.classes.URLSearchParams,Object.assign({visitor:function(e,t,a,n){return ot.isNode&&Ue.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Ue.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return We(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),function(e,t,a){if(Ue.isString(e))try{return(t||JSON.parse)(e),Ue.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||it.transitional,a=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Ue.isResponse(e)||Ue.isReadableStream(e))return e;if(e&&Ue.isString(e)&&(a&&!this.responseType||n)){const a=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(r){if(a){if("SyntaxError"===r.name)throw Fe.from(r,Fe.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ot.classes.FormData,Blob:ot.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],e=>{it.headers[e]={}});const ut=it,ct=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dt=Symbol("internals");function vt(e){return e&&String(e).trim().toLowerCase()}function mt(e){return!1===e||null==e?e:Ue.isArray(e)?e.map(mt):String(e)}function pt(e,t,a,n,r){return Ue.isFunction(n)?n.call(this,t,a):(r&&(t=a),Ue.isString(t)?Ue.isString(n)?-1!==t.indexOf(n):Ue.isRegExp(n)?n.test(t):void 0:void 0)}class ft{constructor(e){e&&this.set(e)}set(e,t,a){const n=this;function r(e,t,a){const r=vt(t);if(!r)throw new Error("header name must be a non-empty string");const s=Ue.findKey(n,r);(!s||void 0===n[s]||!0===a||void 0===a&&!1!==n[s])&&(n[s||t]=mt(e))}const s=(e,t)=>Ue.forEach(e,(e,a)=>r(e,a,t));if(Ue.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Ue.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let a,n,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),a=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!a||t[a]&&ct[a]||("set-cookie"===a?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t})(e),t);else if(Ue.isObject(e)&&Ue.isIterable(e)){let a,n,r={};for(const t of e){if(!Ue.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[n=t[0]]=(a=r[n])?Ue.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,a);return this}get(e,t){if(e=vt(e)){const a=Ue.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)t[n[1]]=n[2];return t}(e);if(Ue.isFunction(t))return t.call(this,e,a);if(Ue.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=vt(e)){const a=Ue.findKey(this,e);return!(!a||void 0===this[a]||t&&!pt(0,this[a],a,t))}return!1}delete(e,t){const a=this;let n=!1;function r(e){if(e=vt(e)){const r=Ue.findKey(a,e);!r||t&&!pt(0,a[r],r,t)||(delete a[r],n=!0)}}return Ue.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let a=t.length,n=!1;for(;a--;){const r=t[a];e&&!pt(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,a={};return Ue.forEach(this,(n,r)=>{const s=Ue.findKey(a,r);if(s)return t[s]=mt(n),void delete t[r];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}(r):String(r).trim();o!==r&&delete t[r],t[o]=mt(n),a[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ue.forEach(this,(a,n)=>{null!=a&&!1!==a&&(t[n]=e&&Ue.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const a=new this(e);return t.forEach(e=>a.set(e)),a}static accessor(e){const t=(this[dt]=this[dt]={accessors:{}}).accessors,a=this.prototype;function n(e){const n=vt(e);t[n]||(!function(e,t){const a=Ue.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(e,a,r){return this[n].call(this,t,e,a,r)},configurable:!0})})}(a,e),t[n]=!0)}return Ue.isArray(e)?e.forEach(n):n(e),this}}ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ue.reduceDescriptors(ft.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[a]=e}}}),Ue.freezeMethods(ft);const gt=ft;function ht(e,t){const a=this||ut,n=t||a,r=gt.from(n.headers);let s=n.data;return Ue.forEach(e,function(e){s=e.call(a,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function yt(e){return!(!e||!e.__CANCEL__)}function bt(e,t,a){Fe.call(this,null==e?"canceled":e,Fe.ERR_CANCELED,t,a),this.name="CanceledError"}function xt(e,t,a){const n=a.config.validateStatus;a.status&&n&&!n(a.status)?t(new Fe("Request failed with status code "+a.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}Ue.inherits(bt,Fe,{__CANCEL__:!0});const wt=(e,t,a=3)=>{let n=0;const r=function(e,t){e=e||10;const a=new Array(e),n=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(l){const i=Date.now(),u=n[o];r||(r=i),a[s]=l,n[s]=i;let c=o,d=0;for(;c!==s;)d+=a[c++],c%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),i-r<t)return;const v=u&&i-u;return v?Math.round(1e3*d/v):void 0}}(50,250);return function(e,t){let a,n,r=0,s=1e3/t;const o=(t,s=Date.now())=>{r=s,a=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),l=t-r;l>=s?o(e,t):(a=e,n||(n=setTimeout(()=>{n=null,o(a)},s-l)))},()=>a&&o(a)]}(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-n,i=r(l);n=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:i||void 0,estimated:i&&o&&s<=o?(o-s)/i:void 0,event:a,lengthComputable:null!=o,[t?"download":"upload"]:!0})},a)},kt=(e,t)=>{const a=null!=e;return[n=>t[0]({lengthComputable:a,total:e,loaded:n}),t[1]]},St=e=>(...t)=>Ue.asap(()=>e(...t)),_t=ot.hasStandardBrowserEnv?(Ct=new URL(ot.origin),Tt=ot.navigator&&/(msie|trident)/i.test(ot.navigator.userAgent),e=>(e=new URL(e,ot.origin),Ct.protocol===e.protocol&&Ct.host===e.host&&(Tt||Ct.port===e.port))):()=>!0;var Ct,Tt;const Et=ot.hasStandardBrowserEnv?{write(e,t,a,n,r,s){const o=[e+"="+encodeURIComponent(t)];Ue.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),Ue.isString(n)&&o.push("path="+n),Ue.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function It(e,t,a){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const At=e=>e instanceof gt?{...e}:e;function Rt(e,t){t=t||{};const a={};function n(e,t,a,n){return Ue.isPlainObject(e)&&Ue.isPlainObject(t)?Ue.merge.call({caseless:n},e,t):Ue.isPlainObject(t)?Ue.merge({},t):Ue.isArray(t)?t.slice():t}function r(e,t,a,r){return Ue.isUndefined(t)?Ue.isUndefined(e)?void 0:n(void 0,e,0,r):n(e,t,0,r)}function s(e,t){if(!Ue.isUndefined(t))return n(void 0,t)}function o(e,t){return Ue.isUndefined(t)?Ue.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function l(a,r,s){return s in t?n(a,r):s in e?n(void 0,a):void 0}const i={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(e,t,a)=>r(At(e),At(t),0,!0)};return Ue.forEach(Object.keys(Object.assign({},e,t)),function(n){const s=i[n]||r,o=s(e[n],t[n],n);Ue.isUndefined(o)&&s!==l||(a[n]=o)}),a}const Bt=e=>{const t=Rt({},e);let a,{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:i}=t;if(t.headers=l=gt.from(l),t.url=Je(It(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&l.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Ue.isFormData(n))if(ot.hasStandardBrowserEnv||ot.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(a=l.getContentType())){const[e,...t]=a?a.split(";").map(e=>e.trim()).filter(Boolean):[];l.setContentType([e||"multipart/form-data",...t].join("; "))}if(ot.hasStandardBrowserEnv&&(r&&Ue.isFunction(r)&&(r=r(t)),r||!1!==r&&_t(t.url))){const e=s&&o&&Et.read(o);e&&l.set(s,e)}return t},Pt="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,a){const n=Bt(e);let r=n.data;const s=gt.from(n.headers).normalize();let o,l,i,u,c,{responseType:d,onUploadProgress:v,onDownloadProgress:m}=n;function p(){u&&u(),c&&c(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=gt.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());xt(function(e){t(e),p()},function(e){a(e),p()},{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(a(new Fe("Request aborted",Fe.ECONNABORTED,e,f)),f=null)},f.onerror=function(){a(new Fe("Network Error",Fe.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const r=n.transitional||Qe;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),a(new Fe(t,r.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,e,f)),f=null},void 0===r&&s.setContentType(null),"setRequestHeader"in f&&Ue.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),Ue.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),d&&"json"!==d&&(f.responseType=n.responseType),m&&([i,c]=wt(m,!0),f.addEventListener("progress",i)),v&&f.upload&&([l,u]=wt(v),f.upload.addEventListener("progress",l),f.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(o=t=>{f&&(a(!t||t.type?new bt(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);h&&-1===ot.protocols.indexOf(h)?a(new Fe("Unsupported protocol "+h+":",Fe.ERR_BAD_REQUEST,e)):f.send(r||null)})},Mt=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,n=new AbortController;const r=function(e){if(!a){a=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Fe?t:new bt(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,r(new Fe(`timeout ${t} of ms exceeded`,Fe.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>Ue.asap(o),l}},Ot=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let n,r=0;for(;r<a;)n=r+t,yield e.slice(r,n),r=n},jt=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:a}=await t.read();if(e)break;yield a}}finally{await t.cancel()}},Dt=(e,t,a,n)=>{const r=async function*(e,t){for await(const a of jt(e))yield*Ot(a,t)}(e,t);let s,o=0,l=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await r.next();if(t)return l(),void e.close();let s=n.byteLength;if(a){let e=o+=s;a(e)}e.enqueue(new Uint8Array(n))}catch(t){throw l(t),t}},cancel:e=>(l(e),r.return())},{highWaterMark:2})},Lt="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Ut=Lt&&"function"==typeof ReadableStream,Ft=Lt&&("function"==typeof TextEncoder?(zt=new TextEncoder,e=>zt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var zt;const Nt=(e,...t)=>{try{return!!e(...t)}catch(a){return!1}},Ht=Ut&&Nt(()=>{let e=!1;const t=new Request(ot.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$t=Ut&&Nt(()=>Ue.isReadableStream(new Response("").body)),qt={stream:$t&&(e=>e.body)};var Gt;Lt&&(Gt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!qt[e]&&(qt[e]=Ue.isFunction(Gt[e])?t=>t[e]():(t,a)=>{throw new Fe(`Response type '${e}' is not supported`,Fe.ERR_NOT_SUPPORT,a)})}));const Wt=async(e,t)=>{const a=Ue.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(Ue.isBlob(e))return e.size;if(Ue.isSpecCompliantForm(e)){const t=new Request(ot.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ue.isArrayBufferView(e)||Ue.isArrayBuffer(e)?e.byteLength:(Ue.isURLSearchParams(e)&&(e+=""),Ue.isString(e)?(await Ft(e)).byteLength:void 0)})(t):a},Yt={http:null,xhr:Pt,fetch:Lt&&(async e=>{let{url:t,method:a,data:n,signal:r,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:i,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:v}=Bt(e);u=u?(u+"").toLowerCase():"text";let m,p=Mt([r,s&&s.toAbortSignal()],o);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(i&&Ht&&"get"!==a&&"head"!==a&&0!==(g=await Wt(c,n))){let e,a=new Request(t,{method:"POST",body:n,duplex:"half"});if(Ue.isFormData(n)&&(e=a.headers.get("content-type"))&&c.setContentType(e),a.body){const[e,t]=kt(g,wt(St(i)));n=Dt(a.body,65536,e,t)}}Ue.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;m=new Request(t,{...v,signal:p,method:a.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:r?d:void 0});let s=await fetch(m);const o=$t&&("stream"===u||"response"===u);if($t&&(l||o&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=Ue.toFiniteNumber(s.headers.get("content-length")),[a,n]=l&&kt(t,wt(St(l),!0))||[];s=new Response(Dt(s.body,65536,a,()=>{n&&n(),f&&f()}),e)}u=u||"text";let h=await qt[Ue.findKey(qt,u)||"text"](s,e);return!o&&f&&f(),await new Promise((t,a)=>{xt(t,a,{data:h,headers:gt.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:m})})}catch(h){if(f&&f(),h&&"TypeError"===h.name&&/Load failed|fetch/i.test(h.message))throw Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,e,m),{cause:h.cause||h});throw Fe.from(h,h&&h.code,e,m)}})};Ue.forEach(Yt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(a){}Object.defineProperty(e,"adapterName",{value:t})}});const Kt=e=>`- ${e}`,Vt=e=>Ue.isFunction(e)||null===e||!1===e,Xt=e=>{e=Ue.isArray(e)?e:[e];const{length:t}=e;let a,n;const r={};for(let s=0;s<t;s++){let t;if(a=e[s],n=a,!Vt(a)&&(n=Yt[(t=String(a)).toLowerCase()],void 0===n))throw new Fe(`Unknown adapter '${t}'`);if(n)break;r[t||"#"+s]=n}if(!n){const e=Object.entries(r).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new Fe("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Kt).join("\n"):" "+Kt(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function Jt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bt(null,e)}function Zt(e){Jt(e),e.headers=gt.from(e.headers),e.data=ht.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Xt(e.adapter||ut.adapter)(e).then(function(t){return Jt(e),t.data=ht.call(e,e.transformResponse,t),t.headers=gt.from(t.headers),t},function(t){return yt(t)||(Jt(e),t&&t.response&&(t.response.data=ht.call(e,e.transformResponse,t.response),t.response.headers=gt.from(t.response.headers))),Promise.reject(t)})}const Qt="1.9.0",ea={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ea[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const ta={};ea.transitional=function(e,t,a){return(n,r,s)=>{if(!1===e)throw new Fe(function(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(a?". "+a:"")}(r," has been removed"+(t?" in "+t:"")),Fe.ERR_DEPRECATED);return t&&!ta[r]&&(ta[r]=!0),!e||e(n,r,s)}},ea.spelling=function(e){return(e,t)=>!0};const aa={assertOptions:function(e,t,a){if("object"!=typeof e)throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const s=n[r],o=t[s];if(o){const t=e[s],a=void 0===t||o(t,s,e);if(!0!==a)throw new Fe("option "+s+" must be "+a,Fe.ERR_BAD_OPTION_VALUE);continue}if(!0!==a)throw new Fe("Unknown option "+s,Fe.ERR_BAD_OPTION)}},validators:ea},na=aa.validators;class ra{constructor(e){this.defaults=e||{},this.interceptors={request:new Ze,response:new Ze}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{a.stack?t&&!String(a.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+t):a.stack=t}catch(n){}}throw a}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Rt(this.defaults,t);const{transitional:a,paramsSerializer:n,headers:r}=t;void 0!==a&&aa.assertOptions(a,{silentJSONParsing:na.transitional(na.boolean),forcedJSONParsing:na.transitional(na.boolean),clarifyTimeoutError:na.transitional(na.boolean)},!1),null!=n&&(Ue.isFunction(n)?t.paramsSerializer={serialize:n}:aa.assertOptions(n,{encode:na.function,serialize:na.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),aa.assertOptions(t,{baseUrl:na.spelling("baseURL"),withXsrfToken:na.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&Ue.merge(r.common,r[t.method]);r&&Ue.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=gt.concat(s,r);const o=[];let l=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const i=[];let u;this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)});let c,d=0;if(!l){const e=[Zt.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,i),c=e.length,u=Promise.resolve(t);d<c;)u=u.then(e[d++],e[d++]);return u}c=o.length;let v=t;for(d=0;d<c;){const e=o[d++],t=o[d++];try{v=e(v)}catch(m){t.call(this,m);break}}try{u=Zt.call(this,v)}catch(m){return Promise.reject(m)}for(d=0,c=i.length;d<c;)u=u.then(i[d++],i[d++]);return u}getUri(e){return Je(It((e=Rt(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ue.forEach(["delete","get","head","options"],function(e){ra.prototype[e]=function(t,a){return this.request(Rt(a||{},{method:e,url:t,data:(a||{}).data}))}}),Ue.forEach(["post","put","patch"],function(e){function t(t){return function(a,n,r){return this.request(Rt(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:n}))}}ra.prototype[e]=t(),ra.prototype[e+"Form"]=t(!0)});const sa=ra;class oa{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const a=this;this.promise.then(e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{a.subscribe(e),t=e}).then(e);return n.cancel=function(){a.unsubscribe(t)},n},e(function(e,n,r){a.reason||(a.reason=new bt(e,n,r),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new oa(function(t){e=t}),cancel:e}}}const la=oa;const ia={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ia).forEach(([e,t])=>{ia[t]=e});const ua=ia;const ca=function e(t){const a=new sa(t),n=V(sa.prototype.request,a);return Ue.extend(n,sa.prototype,a,{allOwnKeys:!0}),Ue.extend(n,a,null,{allOwnKeys:!0}),n.create=function(a){return e(Rt(t,a))},n}(ut);ca.Axios=sa,ca.CanceledError=bt,ca.CancelToken=la,ca.isCancel=yt,ca.VERSION=Qt,ca.toFormData=We,ca.AxiosError=Fe,ca.Cancel=ca.CanceledError,ca.all=function(e){return Promise.all(e)},ca.spread=function(e){return function(t){return e.apply(null,t)}},ca.isAxiosError=function(e){return Ue.isObject(e)&&!0===e.isAxiosError},ca.mergeConfig=Rt,ca.AxiosHeaders=gt,ca.formToJSON=e=>lt(Ue.isHTMLForm(e)?new FormData(e):e),ca.getAdapter=Xt,ca.HttpStatusCode=ua,ca.default=ca;const da=ca;let va=!1;function ma(){return{}.VITE_API_URL?{}.VITE_API_URL:window.location.origin}const pa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"}],iceCandidatePoolSize:15,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},fa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}],iceCandidatePoolSize:15,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},ga={iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceCandidatePoolSize:8,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};function ha(){const e=a(function(){const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}());return{isAvailable:e,setItem:function(t,a){if(e.value)try{localStorage.setItem(t,a)}catch(n){}},getItem:function(t){if(!e.value)return null;try{return localStorage.getItem(t)}catch(a){return null}},removeItem:function(t){if(e.value)try{localStorage.removeItem(t)}catch(a){}},clear:function(){if(e.value)try{localStorage.clear()}catch(t){}}}}function ya(){const{getItem:e,setItem:t}=ha(),a="spacechat_microphone_muted";function n(){const t=e(a);return null===t?null:"true"===t}return{saveMicrophoneState:function(e){t(a,e?"true":"false")},getSavedMicrophoneState:n,applySavedMicrophoneState:function(e){return new Promise(async t=>{try{const t=n();null!==t&&!0===t&&await e()}catch(a){}t()})}}}let ba=pa;const xa=a(ba);(async function(){try{if(!va){const e=await async function(){try{const e=ma(),t=new AbortController,a=setTimeout(()=>t.abort(),8e3),n=await da.get(`${e}/api/turn-credentials`,{signal:t.signal,timeout:8e3});return clearTimeout(a),n.data&&n.data.success&&n.data.rtcConfig?(va=!0,n.data.rtcConfig):null}catch(e){return da.isAxiosError(e)&&("ECONNABORTED"===e.code||e.message.includes("timeout")||e.response||e.request),null}}();if(e)return e;const t=await async function(){try{const e=ma(),t=await fetch(`${e}/api/turn-credentials/metered`);if(!t.ok)return null;const a=await t.json();return a&&a.iceServers&&Array.isArray(a.iceServers)?(va=!0,{iceServers:a.iceServers,iceCandidatePoolSize:15,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}):null}catch(e){return null}}();if(t)return t}return pa}catch(e){return pa}})().then(e=>{ba=e,xa.value=e}).catch(e=>{});let wa=null,ka=null,Sa=null;const _a=a("new"),Ca=a(!1),Ta=a(null),Ea=!0;let Ia="",Aa="",Ra=null,Ba=!1,Pa=!1,Ma=0;let Oa=[],ja=null;let Da=null,La=0;async function Ua(){if(!wa)return{error:"No peer connection available"};try{const e={};return(await wa.getStats()).forEach(t=>{"transport"===t.type?e.transport={bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,dtlsState:t.dtlsState,selectedCandidatePairId:t.selectedCandidatePairId}:"candidate-pair"===t.type&&t.selected?e.selectedCandidatePair={localCandidateId:t.localCandidateId,remoteCandidateId:t.remoteCandidateId,state:t.state,availableOutgoingBitrate:t.availableOutgoingBitrate}:"local-candidate"===t.type||"remote-candidate"===t.type?(e.candidates||(e.candidates=[]),e.candidates.push({type:t.type,id:t.id,ip:t.ip,port:t.port,protocol:t.protocol,candidateType:t.candidateType})):"media-source"!==t.type&&"track"!==t.type&&"media-playout"!==t.type||(e.media||(e.media=[]),e.media.push({type:t.type,id:t.id,kind:t.kind,audioLevel:t.audioLevel,trackIdentifier:t.trackIdentifier}))}),e}catch(e){return{error:"Failed to get stats: "+e}}}function Fa(){const e=window.__webrtcStatsTimer;e&&(clearInterval(e),window.__webrtcStatsTimer=null)}function za(){const{socket:e,userId:t,isInSetupContext:n}=W(),s=v(wa),o=v(ka),l=v(Sa),i=_a,u=Ca,c=Ta;a({echoCancellation:!0,noiseSuppression:!0});const d=async()=>{if(ka&&ka.getAudioTracks().length>0)return ka;try{Ea;const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1}),t=e.getAudioTracks();if(0===t.length)throw new Error("No audio tracks available in media stream");Ea,ka=e,o.value=e;const{getSavedMicrophoneState:a}=ya();return!0===a()?(t.forEach(e=>{e.enabled=!1}),Ca.value=!0,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:!0}}))):(t.forEach(e=>{e.enabled=!0}),Ca.value=!1),e}catch(e){throw Aa=`Failed to access microphone: ${e}`,e}},p=()=>{if(wa)try{wa.close(),wa=null,Sa&&(Sa.getTracks().forEach(e=>{e.stop()}),Sa=null)}catch(t){}try{const a={...xa.value,sdpSemantics:"unified-plan",iceCandidatePoolSize:20,iceTransportPolicy:"all"},n=new RTCPeerConnection(a);return n.onnegotiationneeded=async e=>{if(function(e){return"stable"===e.signalingState||"have-remote-offer"===e.signalingState}(n)&&!Ba){Ba=!0;try{Ea,T()}catch(t){Aa=`Negotiation error: ${t}`,Ba=!1}}},n.oniceconnectionstatechange=()=>{"connected"===n.iceConnectionState||"completed"===n.iceConnectionState?(Aa="",Ma=0,k(),function(){Fa();const e=setInterval(async()=>{!wa||"connected"!==_a.value&&"connecting"!==_a.value?Fa():Ra=await Ua()},5e3);window.__webrtcStatsTimer=e}()):"disconnected"!==n.iceConnectionState&&"failed"!==n.iceConnectionState&&"closed"!==n.iceConnectionState||(Na(n.iceConnectionState),Ta.value&&e.value&&e.value.emit("webrtc-connection-state",{to:Ta.value,state:n.iceConnectionState,reason:"ice-connection-state-change"}),"failed"!==n.iceConnectionState&&"closed"!==n.iceConnectionState||setTimeout(()=>{"failed"!==n.iceConnectionState&&"closed"!==n.iceConnectionState||Na("failed")},2e3))},n.onicecandidate=t=>{var a;t.candidate?(window.__localIceCandidates||(window.__localIceCandidates=[]),window.__localIceCandidates.push(t.candidate),c.value?null==(a=e.value)||a.emit("webrtc-signal",{type:"ice-candidate",candidate:t.candidate,to:c.value}):Oa.push(t.candidate)):Oa.length>0&&c.value&&(Oa.forEach(t=>{var a;null==(a=e.value)||a.emit("webrtc-signal",{type:"ice-candidate",candidate:t,to:c.value})}),Oa=[])},n.onicegatheringstatechange=()=>{Ea},n.onconnectionstatechange=()=>{Na(n.connectionState),"connected"===n.connectionState?(Aa="",Ma=0):"failed"!==n.connectionState&&"disconnected"!==n.connectionState&&"closed"!==n.connectionState||"failed"!==n.connectionState||Aa||(Aa="PeerConnection failed")},n.onsignalingstatechange=()=>{"stable"===n.signalingState&&(Ba=!1)},n.ontrack=e=>{Sa||(Sa=new MediaStream,l.value=Sa),Sa.addTrack(e.track),setTimeout(()=>{if(Sa){Sa.getTracks().forEach(e=>{"audio"!==e.kind||e.enabled&&!e.muted||(e.enabled=!0)})}},500),e.track.onunmute=()=>{},e.track.onmute=()=>{e.track.enabled=!0},e.track.onended=()=>{}},_(n),wa=n,n}catch(a){throw Ia=`Creation error: ${a}`,Aa="Failed to create connection",Na("failed"),a}},f=async t=>{if(window.__webrtcConnectionTimeout&&clearTimeout(window.__webrtcConnectionTimeout),Ba)return new Promise(e=>{setTimeout(async()=>{e(Ba?{waiting:"Negotiation in progress"}:await f(t))},1e3)});Ba=!0;try{const a=await(async t=>{if(!t||!e.value){const e="لا يمكن إنشاء الاتصال: معرّف الشريك أو الاتصال غير متوفر";return Ia=e,{error:e}}Ta.value=t,c.value=t;try{ka||await d();const e=p();if(!ka)throw new Error("لا يمكن الوصول للميكروفون");return ka.getTracks().forEach(t=>{e.addTrack(t,ka)}),Na("connecting"),e}catch(a){return Ia=`خطأ في إنشاء الاتصال: ${a}`,{error:Ia}}})(t);if(a.error)return a;Ea;const n=await a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});return await a.setLocalDescription(n),e.value&&t&&(e.value.emit("voice-offer",{offer:a.localDescription,to:t}),e.value.emit("webrtc-signal",{type:"offer",offer:a.localDescription,to:t})),_(a),k(),{success:!0}}catch(a){return Ia=`Error creating offer: ${a}`,Ba=!1,{error:`Failed to create offer: ${a}`}}finally{setTimeout(()=>{Ba=!1},2e3)}},g=async(t,a)=>{if(e.value){Ta.value=a,c.value=a;try{ka||await d();const r=p();if(ka){0===r.getSenders().length&&ka.getTracks().forEach(e=>{r.addTrack(e,ka)})}if(_a.value="connecting",i.value="connecting",await r.setRemoteDescription(new RTCSessionDescription(t)),Oa.length>0){Ea;for(const e of Oa)try{await r.addIceCandidate(e)}catch(n){}Oa=[]}Ea;const s=await r.createAnswer({offerToReceiveAudio:!0});Ea,await r.setLocalDescription(s),r.getTransceivers().forEach(e=>{if("audio"===e.receiver.track.kind&&"sendrecv"!==e.direction&&"recvonly"!==e.direction)try{e.direction="sendrecv"}catch(n){}}),await(e=>{if("complete"===e.iceGatheringState)return Promise.resolve();const t=Math.ceil(12);let a=0,n=0;return new Promise(r=>{const s=()=>{a++,"complete"!==e.iceGatheringState?(window.__localIceCandidates&&window.__localIceCandidates.length>n&&(n=window.__localIceCandidates.length),n>=3&&a>t/2||a>=t?r():setTimeout(s,500)):r()};e.addEventListener("icegatheringstatechange",()=>{"complete"===e.iceGatheringState&&r()}),setTimeout(s,0)})})(r),e.value.emit("voice-answer",{answer:r.localDescription,to:a}),e.value.emit("webrtc-signal",{type:"answer",answer:r.localDescription,to:a}),_(r),k()}catch(n){Ia=`Error handling offer: ${n}`,setTimeout(()=>{e.value&&c.value&&f(c.value)},2e3)}}},h=async e=>{try{if(!wa)return void 0;const n=wa.signalingState;if("have-local-offer"===n){Ea;try{await wa.setRemoteDescription(new RTCSessionDescription(e))}catch(t){if(t.toString().includes("InvalidStateError")&&(await new Promise(e=>setTimeout(e,1e3)),"have-local-offer"===wa.signalingState))try{Ea,await wa.setRemoteDescription(new RTCSessionDescription(e))}catch(a){}}}else"stable"===n||"have-remote-offer"===n&&Ma<15&&(Ma++,y(),setTimeout(()=>{c.value&&f(c.value)},2e3))}catch(t){Ia=`Error handling answer: ${t}`,Ma<15&&await w()}},y=()=>{if(S(),wa){try{wa.ontrack=null,wa.onicecandidate=null,wa.oniceconnectionstatechange=null,wa.onicegatheringstatechange=null,wa.onsignalingstatechange=null,wa.onconnectionstatechange=null;try{wa.getTransceivers&&wa.getTransceivers().forEach(e=>{e.stop&&e.stop()})}catch(e){}wa.close()}catch(t){}wa=null}Sa&&(Sa.getTracks().forEach(e=>{e.stop()}),Sa=new MediaStream,l.value=Sa),_a.value="closed",i.value="closed",window.dispatchEvent(new CustomEvent("connection-closed",{detail:{timestamp:Date.now()}}))};var b,x;async function w(){if(wa&&c.value)try{if(Pa=!0,ba===pa?ba=ga:Ma>0&&M(),wa.restartIce){wa.restartIce();const t=await wa.createOffer({iceRestart:!0,offerToReceiveAudio:!0});await wa.setLocalDescription(t),e.value&&(e.value.emit("offer",{offer:wa.localDescription,to:c.value}),e.value.emit("webrtc-signal",{type:"offer",offer:wa.localDescription,to:c.value}))}setTimeout(()=>{Pa=!1},500)}catch(t){Pa=!1,Ma<15&&setTimeout(()=>{y(),c.value&&f(c.value)},200)}}function k(){ja&&clearInterval(ja),"undefined"!=typeof window&&(window.__localIceCandidates=[],window.__remoteIceCandidates=[],window.__iceCandidatePairs=[]),wa&&(wa.onicecandidate=t=>{t.candidate&&("undefined"!=typeof window&&(window.__localIceCandidates=window.__localIceCandidates||[],window.__localIceCandidates.push({candidate:t.candidate.candidate,timestamp:Date.now()})),e.value&&Ta.value&&e.value.emit("ice-candidate",{candidate:t.candidate,to:Ta.value}))}),ja=window.setInterval(()=>{if(!wa||"connecting"!==_a.value&&"connected"!==_a.value)S();else try{P(),Ua().then(e=>{e&&e.iceCandidatePairs&&"undefined"!=typeof window&&(window.__iceCandidatePairs=e.iceCandidatePairs)})}catch(e){}},8e3)}function S(){ja&&(clearInterval(ja),ja=null)}function _(e){if(!c.value)return;window.__webrtcConnectionTimeout&&clearTimeout(window.__webrtcConnectionTimeout);window.__webrtcConnectionTimeout=setTimeout(()=>{"connecting"!==e.connectionState&&"new"!==e.connectionState||(ba=ga,c.value&&!Ba&&f(c.value),window.__webrtcConnectionTimeout=setTimeout(()=>{var t,a,n;if("connecting"===e.connectionState||"new"===e.connectionState){null==(t=window.__localIceCandidates)||t.length,null==(a=window.__remoteIceCandidates)||a.length,null==(n=window.__iceCandidatePairs)||n.length;M(),y(),c.value&&setTimeout(()=>{f(c.value)},200)}},5e3))},5e3)}e.value&&(e.value.off("webrtc-signal"),e.value.off("ice-candidate"),e.value.off("partner-disconnected"),e.value.off("webrtc-connection-failed"),e.value.off("connection-timeout"),e.value.off("webrtc-connection-state"),e.value.off("voice-offer"),e.value.off("voice-answer"),e.value.on("webrtc-signal",async t=>{if(Ta.value=t.from,c.value=t.from,"offer"===t.type&&t.offer)try{await g(t.offer,t.from)}catch(a){Ia=`Error handling offer: ${a}`,e.value&&e.value.emit("webrtc-connection-failed",{to:t.from,reason:`Failed to handle offer: ${a}`})}else if("answer"===t.type&&t.answer)try{await h(t.answer)}catch(a){Ia=`Error handling answer: ${a}`,e.value&&e.value.emit("webrtc-connection-failed",{to:t.from,reason:`Failed to handle answer: ${a}`})}}),e.value.on("ice-candidate",async e=>{if(e.from===c.value)try{await C(e.candidate)}catch(t){Ia=`Error handling ICE candidate: ${t}`}}),e.value.on("webrtc-connection-failed",t=>{Ma<15?(Ma++,t.from===c.value&&setTimeout(()=>{c.value&&e.value&&f(t.from)},800)):(_a.value="failed",Ia=`Partner reported failure: ${t.reason}`)}),e.value.on("partner-disconnected",(e={})=>{y(),S(),Fa(),Ta.value=null,c.value=null,_a.value="closed",i.value="closed",e&&e.reason,window.dispatchEvent(new CustomEvent("connection-state-changed",{detail:{state:"disconnected",reason:e.reason||"partner-left"}}))}),e.value.on("webrtc-connection-state",e=>{"failed"!==e.state&&"closed"!==e.state&&"disconnected"!==e.state||("failed"===e.state||"closed"===e.state?(Na("failed"),window.dispatchEvent(new CustomEvent("connection-state-changed",{detail:{state:"failed",reason:e.reason||"connection-failed"}})),wa&&"closed"!==wa.connectionState&&y()):window.dispatchEvent(new CustomEvent("connection-state-changed",{detail:{state:"disconnected",reason:"network-disconnect",temporary:!0}})))}),e.value.on("disconnect-partner",()=>{Ca.value}),e.value.on("matched",async e=>{if(e&&e.partnerId&&(c.value=e.partnerId,Ta.value=e.partnerId),ka&&ka.getAudioTracks().length>0){const{getSavedMicrophoneState:e}=ya(),t=e();null!==t&&(ka.getAudioTracks().forEach(e=>{e.enabled=!t}),Ca.value=t,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:t}})))}else try{await d()}catch(t){}}),null==(b=e.value)||b.on("disconnect",()=>{B()}),null==(x=e.value)||x.on("reconnect",()=>{Ta.value&&null===Da&&R(Ta.value)})),r(()=>{B()}),m(()=>_a.value,()=>{"undefined"!=typeof window&&(window.__webrtc_debug={connectionState:_a.value,connectionRetryCount:Ma,lastConnectionError:Ia,failureReason:Aa,isNegotiating:Ba,isRestartingIce:Pa,pendingCandidates:Oa.length,hasLocalTracks:!!ka&&ka.getAudioTracks().length>0,hasRemoteTracks:!!Sa&&Sa.getAudioTracks().length>0})});const C=async e=>{try{if(!wa)return void Oa.push(e);if(window.__remoteIceCandidates||(window.__remoteIceCandidates=[]),window.__remoteIceCandidates.push(e),await wa.addIceCandidate(e),"connected"===wa.connectionState)try{const e=await wa.getStats(),t=[];e.forEach(e=>{"candidate-pair"===e.type&&t.push({id:e.id,state:e.state,nominated:e.nominated,selected:e.selected})}),window.__iceCandidatePairs=t}catch(t){}Ea}catch(t){Aa=`Error adding ICE candidate: ${t}`}};function T(){if(wa&&c.value&&!Ba){Ba=!0;try{wa.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1}).then(e=>{if(wa)return wa.setLocalDescription(e)}).then(()=>{wa&&e.value&&c.value&&e.value.emit("voice-offer",{offer:wa.localDescription,to:c.value})}).catch(e=>{}).finally(()=>{setTimeout(()=>{Ba=!1},2e3)})}catch(t){Ba=!1}}}const E={connectionState:_a.value,iceCandidatesGenerated:Oa.length,localStreamActive:!!ka&&ka.active,remoteStreamActive:!!Sa&&Sa.active,localTracks:ka?ka.getAudioTracks().length:0,remoteTracks:Sa?Sa.getAudioTracks().length:0,connectionRetries:Ma,lastError:Ia||Aa||"",isAudioMuted:Ca.value,forceReconnect:()=>!(!wa||"new"===_a.value)&&(w(),!0)},I=async()=>{if(!ka)return;const{getSavedMicrophoneState:e}=ya(),t=e();null!==t&&ka&&ka.getAudioTracks().length>0&&(ka.getAudioTracks().forEach(e=>{e.enabled=!t}),Ca.value=t,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:t}})))},A=async(t=null)=>{var a;try{Ta.value=t,La=0,ka||await d(),await I(),wa&&y(),p(),k(),wa&&_(wa),t&&(null==(a=e.value)||a.emit("ready-for-call",{to:t}))}catch(n){throw P(),n}};function R(t){y(),La++;const a=Math.min(1e3*Math.pow(1.5,La-1),3e4);B(),Da=window.setTimeout(async()=>{var a,n,r;if(Da=null,La>=10)return Na("failed"),null==(a=e.value)||a.emit("webrtc-connection-state",{state:"failed",to:t,details:{attempts:La}}),void(null==(n=e.value)||n.emit("return-to-queue",{reason:"connection-failed"}));try{await A(t),t&&(null==(r=e.value)||r.emit("webrtc-reconnect",{to:t,details:{attempts:La}}),T())}catch(s){La<10?R(t):Na("failed")}},a)}function B(){null!==Da&&(clearTimeout(Da),Da=null)}function P(){if(!wa)return!1;if(!ka||0===ka.getAudioTracks().length){try{d().catch(e=>{})}catch(e){}return!1}if(!Sa||0===Sa.getAudioTracks().length){const e=wa.getReceivers().filter(e=>e.track&&"audio"===e.track.kind);if(e.length>0&&(Sa||(Sa=new MediaStream),e.forEach(e=>{e.track&&Sa.addTrack(e.track)}),l.value=Sa),!Sa||0===Sa.getAudioTracks().length)return!Ba&&Ta.value&&T(),!1}setTimeout(()=>{const e=document.querySelectorAll("audio");e.length>0&&Sa&&Array.from(e).forEach((e,t)=>{e.srcObject!==Sa&&(e.srcObject=Sa,e.muted=!1,e.volume=1,e.play().catch(e=>{}))})},100);return[...(null==ka?void 0:ka.getTracks())||[],...(null==Sa?void 0:Sa.getTracks())||[]].every(e=>"audio"!==e.kind||"audio"===e.kind&&e.enabled)||(null==Sa||Sa.getAudioTracks().forEach(e=>{e.enabled=!0}),Ca.value||null==ka||ka.getAudioTracks().forEach(e=>{e.enabled=!0})),!0}function M(){ba=fa,xa.value=fa}return{socket:e,peerConnection:s,remoteStream:l,localStream:o,connectionState:i,isAudioMuted:u,partnerId:c,createOffer:f,handleOffer:g,handleAnswer:h,handleIceCandidate:C,toggleMicrophone:async()=>{const e=!Ca.value,{saveMicrophoneState:t}=ya();if(t(e),e)return ka&&ka.getAudioTracks().forEach(e=>{e.enabled=!1}),Ca.value=!0,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:!0}})),!0;try{if(ka&&ka.getAudioTracks().length>0)return ka.getAudioTracks().forEach(e=>{e.enabled=!0}),Ca.value=!1,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:!1}})),!0;const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});if(0===e.getAudioTracks().length)throw new Error("No audio tracks available");if(ka=e,o.value=e,wa&&e)try{const t=wa.getSenders().find(e=>e.track&&"audio"===e.track.kind);if(t){const a=e.getAudioTracks()[0];a&&t.replaceTrack(a)}else e.getAudioTracks().length>0&&e.getAudioTracks().forEach(t=>{wa&&wa.addTrack(t,e)})}catch(a){}return Ca.value=!1,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:!1}})),!0}catch(n){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});return ka=e,o.value=e,Ca.value=!1,window.dispatchEvent(new CustomEvent("microphone-state-changed",{detail:{isMuted:!1}})),!0}catch(r){return!1}}},closeConnection:y,initializeLocalStream:d,cleanup:()=>{y(),B(),ka&&(ka.getTracks().forEach(e=>{e.stop()}),ka=null,o.value=null),Sa&&(Sa.getTracks().forEach(e=>{e.stop()}),Sa=new MediaStream,l.value=Sa),wa=null,s.value=null,_a.value="closed",i.value="closed",La=0},diagnosticReport:E,restoreMicrophoneState:I,initializeConnection:A,diagnoseAndFixConnection:P,startNegotiation:T,attemptReconnection:R}}function Na(e){_a.value!==e&&(_a.value=e,"connected"===e||"completed"===e?(Aa="",Ia="",Ma=0):"failed"!==e&&"disconnected"!==e||"failed"===e&&Ma++)}const Ha=[];for(let Mc=0;Mc<256;++Mc)Ha.push((Mc+256).toString(16).slice(1));let $a;const qa=new Uint8Array(16);const Ga={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Wa(e,t,a){var n;if(Ga.randomUUID&&!t&&!e)return Ga.randomUUID();const r=(e=e||{}).random??(null==(n=e.rng)?void 0:n.call(e))??function(){if(!$a){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$a=crypto.getRandomValues.bind(crypto)}return $a(qa)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((a=a||0)<0||a+16>t.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[a+e]=r[e];return t}return function(e,t=0){return(Ha[e[t+0]]+Ha[e[t+1]]+Ha[e[t+2]]+Ha[e[t+3]]+"-"+Ha[e[t+4]]+Ha[e[t+5]]+"-"+Ha[e[t+6]]+Ha[e[t+7]]+"-"+Ha[e[t+8]]+Ha[e[t+9]]+"-"+Ha[e[t+10]]+Ha[e[t+11]]+Ha[e[t+12]]+Ha[e[t+13]]+Ha[e[t+14]]+Ha[e[t+15]]).toLowerCase()}(r)}var Ya="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ka(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Va(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var a=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(a,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),a}var Xa={exports:{}};var Ja={exports:{}};const Za=Va(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Qa;function en(){return Qa||(Qa=1,Ja.exports=(e=e||function(e,t){var a;if("undefined"!=typeof window&&window.crypto&&(a=window.crypto),"undefined"!=typeof self&&self.crypto&&(a=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(a=globalThis.crypto),!a&&"undefined"!=typeof window&&window.msCrypto&&(a=window.msCrypto),!a&&void 0!==Ya&&Ya.crypto&&(a=Ya.crypto),!a)try{a=Za}catch(f){}var n=function(){if(a){if("function"==typeof a.getRandomValues)try{return a.getRandomValues(new Uint32Array(1))[0]}catch(f){}if("function"==typeof a.randomBytes)try{return a.randomBytes(4).readInt32LE()}catch(f){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var a;return e.prototype=t,a=new e,e.prototype=null,a}}(),s={},o=s.lib={},l=o.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=o.WordArray=l.extend({init:function(e,a){e=this.words=e||[],this.sigBytes=a!=t?a:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,a=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<r;s++){var o=a[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var l=0;l<r;l+=4)t[n+l>>>2]=a[l>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],a=0;a<e;a+=4)t.push(n());return new i.init(t,e)}}),u=s.enc={},c=u.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],r=0;r<a;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n+=2)a[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new i.init(a,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],r=0;r<a;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n++)a[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new i.init(a,t)}},v=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},m=o.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=v.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a,n=this._data,r=n.words,s=n.sigBytes,o=this.blockSize,l=s/(4*o),u=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*o,c=e.min(4*u,s);if(u){for(var d=0;d<u;d+=o)this._doProcessBlock(r,d);a=r.splice(0,u),n.sigBytes-=c}return new i.init(a,c)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=m.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new p.HMAC.init(e,a).finalize(t)}}});var p=s.algo={};return s}(Math),e)),Ja.exports;var e}var tn,an={exports:{}};function nn(){return tn?an.exports:(tn=1,an.exports=(o=en(),a=(t=o).lib,n=a.Base,r=a.WordArray,(s=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=n.extend({init:function(t,a){t=this.words=t||[],this.sigBytes=a!=e?a:8*t.length},toX32:function(){for(var e=this.words,t=e.length,a=[],n=0;n<t;n++){var s=e[n];a.push(s.high),a.push(s.low)}return r.create(a,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),a=t.length,r=0;r<a;r++)t[r]=t[r].clone();return e}}),o));var e,t,a,n,r,s,o}var rn,sn={exports:{}};function on(){return rn||(rn=1,sn.exports=(e=en(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,a=t.init,n=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;a.call(this,n,t)}else a.apply(this,arguments)};n.prototype=t}}(),e.lib.WordArray)),sn.exports;var e}var ln,un={exports:{}};function cn(){return ln?un.exports:(ln=1,un.exports=(e=en(),function(){var t=e,a=t.lib.WordArray,n=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],r=0;r<a;r+=2){var s=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return a.create(n,2*t)}},n.Utf16LE={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],s=0;s<a;s+=2){var o=r(t[s>>>2]>>>16-s%4*8&65535);n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s++)n[s>>>1]|=r(e.charCodeAt(s)<<16-s%2*16);return a.create(n,2*t)}}}(),e.enc.Utf16));var e}var dn,vn={exports:{}};function mn(){return dn?vn.exports:(dn=1,vn.exports=(e=en(),function(){var t=e,a=t.lib.WordArray;function n(e,t,n){for(var r=[],s=0,o=0;o<t;o++)if(o%4){var l=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;r[s>>>2]|=l<<24-s%4*8,s++}return a.create(r,s)}t.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,n=this._map;e.clamp();for(var r=[],s=0;s<a;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,l=0;l<4&&s+.75*l<a;l++)r.push(n.charAt(o>>>6*(3-l)&63));var i=n.charAt(64);if(i)for(;r.length%4;)r.push(i);return r.join("")},parse:function(e){var t=e.length,a=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var s=0;s<a.length;s++)r[a.charCodeAt(s)]=s}var o=a.charAt(64);if(o){var l=e.indexOf(o);-1!==l&&(t=l)}return n(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64));var e}var pn,fn={exports:{}};function gn(){return pn?fn.exports:(pn=1,fn.exports=(e=en(),function(){var t=e,a=t.lib.WordArray;function n(e,t,n){for(var r=[],s=0,o=0;o<t;o++)if(o%4){var l=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;r[s>>>2]|=l<<24-s%4*8,s++}return a.create(r,s)}t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var a=e.words,n=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var s=[],o=0;o<n;o+=3)for(var l=(a[o>>>2]>>>24-o%4*8&255)<<16|(a[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|a[o+2>>>2]>>>24-(o+2)%4*8&255,i=0;i<4&&o+.75*i<n;i++)s.push(r.charAt(l>>>6*(3-i)&63));var u=r.charAt(64);if(u)for(;s.length%4;)s.push(u);return s.join("")},parse:function(e,t){void 0===t&&(t=!0);var a=e.length,r=t?this._safe_map:this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var o=0;o<r.length;o++)s[r.charCodeAt(o)]=o}var l=r.charAt(64);if(l){var i=e.indexOf(l);-1!==i&&(a=i)}return n(e,a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url));var e}var hn,yn={exports:{}};function bn(){return hn?yn.exports:(hn=1,yn.exports=(e=en(),function(t){var a=e,n=a.lib,r=n.WordArray,s=n.Hasher,o=a.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var i=o.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var n=t+a,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s=this._hash.words,o=e[t+0],i=e[t+1],m=e[t+2],p=e[t+3],f=e[t+4],g=e[t+5],h=e[t+6],y=e[t+7],b=e[t+8],x=e[t+9],w=e[t+10],k=e[t+11],S=e[t+12],_=e[t+13],C=e[t+14],T=e[t+15],E=s[0],I=s[1],A=s[2],R=s[3];E=u(E,I,A,R,o,7,l[0]),R=u(R,E,I,A,i,12,l[1]),A=u(A,R,E,I,m,17,l[2]),I=u(I,A,R,E,p,22,l[3]),E=u(E,I,A,R,f,7,l[4]),R=u(R,E,I,A,g,12,l[5]),A=u(A,R,E,I,h,17,l[6]),I=u(I,A,R,E,y,22,l[7]),E=u(E,I,A,R,b,7,l[8]),R=u(R,E,I,A,x,12,l[9]),A=u(A,R,E,I,w,17,l[10]),I=u(I,A,R,E,k,22,l[11]),E=u(E,I,A,R,S,7,l[12]),R=u(R,E,I,A,_,12,l[13]),A=u(A,R,E,I,C,17,l[14]),E=c(E,I=u(I,A,R,E,T,22,l[15]),A,R,i,5,l[16]),R=c(R,E,I,A,h,9,l[17]),A=c(A,R,E,I,k,14,l[18]),I=c(I,A,R,E,o,20,l[19]),E=c(E,I,A,R,g,5,l[20]),R=c(R,E,I,A,w,9,l[21]),A=c(A,R,E,I,T,14,l[22]),I=c(I,A,R,E,f,20,l[23]),E=c(E,I,A,R,x,5,l[24]),R=c(R,E,I,A,C,9,l[25]),A=c(A,R,E,I,p,14,l[26]),I=c(I,A,R,E,b,20,l[27]),E=c(E,I,A,R,_,5,l[28]),R=c(R,E,I,A,m,9,l[29]),A=c(A,R,E,I,y,14,l[30]),E=d(E,I=c(I,A,R,E,S,20,l[31]),A,R,g,4,l[32]),R=d(R,E,I,A,b,11,l[33]),A=d(A,R,E,I,k,16,l[34]),I=d(I,A,R,E,C,23,l[35]),E=d(E,I,A,R,i,4,l[36]),R=d(R,E,I,A,f,11,l[37]),A=d(A,R,E,I,y,16,l[38]),I=d(I,A,R,E,w,23,l[39]),E=d(E,I,A,R,_,4,l[40]),R=d(R,E,I,A,o,11,l[41]),A=d(A,R,E,I,p,16,l[42]),I=d(I,A,R,E,h,23,l[43]),E=d(E,I,A,R,x,4,l[44]),R=d(R,E,I,A,S,11,l[45]),A=d(A,R,E,I,T,16,l[46]),E=v(E,I=d(I,A,R,E,m,23,l[47]),A,R,o,6,l[48]),R=v(R,E,I,A,y,10,l[49]),A=v(A,R,E,I,C,15,l[50]),I=v(I,A,R,E,g,21,l[51]),E=v(E,I,A,R,S,6,l[52]),R=v(R,E,I,A,p,10,l[53]),A=v(A,R,E,I,w,15,l[54]),I=v(I,A,R,E,i,21,l[55]),E=v(E,I,A,R,b,6,l[56]),R=v(R,E,I,A,T,10,l[57]),A=v(A,R,E,I,h,15,l[58]),I=v(I,A,R,E,_,21,l[59]),E=v(E,I,A,R,f,6,l[60]),R=v(R,E,I,A,k,10,l[61]),A=v(A,R,E,I,m,15,l[62]),I=v(I,A,R,E,x,21,l[63]),s[0]=s[0]+E|0,s[1]=s[1]+I|0,s[2]=s[2]+A|0,s[3]=s[3]+R|0},_doFinalize:function(){var e=this._data,a=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;a[r>>>5]|=128<<24-r%32;var s=t.floor(n/4294967296),o=n;a[15+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),a[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(a.length+1),this._process();for(var l=this._hash,i=l.words,u=0;u<4;u++){var c=i[u];i[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return l},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,a,n,r,s,o){var l=e+(t&a|~t&n)+r+o;return(l<<s|l>>>32-s)+t}function c(e,t,a,n,r,s,o){var l=e+(t&n|a&~n)+r+o;return(l<<s|l>>>32-s)+t}function d(e,t,a,n,r,s,o){var l=e+(t^a^n)+r+o;return(l<<s|l>>>32-s)+t}function v(e,t,a,n,r,s,o){var l=e+(a^(t|~n))+r+o;return(l<<s|l>>>32-s)+t}a.MD5=s._createHelper(i),a.HmacMD5=s._createHmacHelper(i)}(Math),e.MD5));var e}var xn,wn={exports:{}};function kn(){return xn?wn.exports:(xn=1,wn.exports=(l=en(),t=(e=l).lib,a=t.WordArray,n=t.Hasher,r=e.algo,s=[],o=r.SHA1=n.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a=this._hash.words,n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=0;u<80;u++){if(u<16)s[u]=0|e[t+u];else{var c=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=c<<1|c>>>31}var d=(n<<5|n>>>27)+i+s[u];d+=u<20?1518500249+(r&o|~r&l):u<40?1859775393+(r^o^l):u<60?(r&o|r&l|o&l)-1894007588:(r^o^l)-899497514,i=l,l=o,o=r<<30|r>>>2,r=n,n=d}a[0]=a[0]+n|0,a[1]=a[1]+r|0,a[2]=a[2]+o|0,a[3]=a[3]+l|0,a[4]=a[4]+i|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(a/4294967296),t[15+(n+64>>>9<<4)]=a,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=n._createHelper(o),e.HmacSHA1=n._createHmacHelper(o),l.SHA1));var e,t,a,n,r,s,o,l}var Sn,_n={exports:{}};function Cn(){return Sn?_n.exports:(Sn=1,_n.exports=(e=en(),function(t){var a=e,n=a.lib,r=n.WordArray,s=n.Hasher,o=a.algo,l=[],i=[];!function(){function e(e){for(var a=t.sqrt(e),n=2;n<=a;n++)if(!(e%n))return!1;return!0}function a(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)e(n)&&(r<8&&(l[r]=a(t.pow(n,.5))),i[r]=a(t.pow(n,1/3)),r++),n++}();var u=[],c=o.SHA256=s.extend({_doReset:function(){this._hash=new r.init(l.slice(0))},_doProcessBlock:function(e,t){for(var a=this._hash.words,n=a[0],r=a[1],s=a[2],o=a[3],l=a[4],c=a[5],d=a[6],v=a[7],m=0;m<64;m++){if(m<16)u[m]=0|e[t+m];else{var p=u[m-15],f=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[m-2],h=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[m]=f+u[m-7]+h+u[m-16]}var y=n&r^n&s^r&s,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),x=v+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&d)+i[m]+u[m];v=d,d=c,c=l,l=o+x|0,o=s,s=r,r=n,n=x+(b+y)|0}a[0]=a[0]+n|0,a[1]=a[1]+r|0,a[2]=a[2]+s|0,a[3]=a[3]+o|0,a[4]=a[4]+l|0,a[5]=a[5]+c|0,a[6]=a[6]+d|0,a[7]=a[7]+v|0},_doFinalize:function(){var e=this._data,a=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return a[r>>>5]|=128<<24-r%32,a[14+(r+64>>>9<<4)]=t.floor(n/4294967296),a[15+(r+64>>>9<<4)]=n,e.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});a.SHA256=s._createHelper(c),a.HmacSHA256=s._createHmacHelper(c)}(Math),e.SHA256));var e}var Tn,En={exports:{}};var In,An={exports:{}};function Rn(){return In||(In=1,An.exports=(e=en(),nn(),function(){var t=e,a=t.lib.Hasher,n=t.x64,r=n.Word,s=n.WordArray,o=t.algo;function l(){return r.create.apply(r,arguments)}var i=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=l()}();var c=o.SHA512=a.extend({_doReset:function(){this._hash=new s.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var a=this._hash.words,n=a[0],r=a[1],s=a[2],o=a[3],l=a[4],c=a[5],d=a[6],v=a[7],m=n.high,p=n.low,f=r.high,g=r.low,h=s.high,y=s.low,b=o.high,x=o.low,w=l.high,k=l.low,S=c.high,_=c.low,C=d.high,T=d.low,E=v.high,I=v.low,A=m,R=p,B=f,P=g,M=h,O=y,j=b,D=x,L=w,U=k,F=S,z=_,N=C,H=T,$=E,q=I,G=0;G<80;G++){var W,Y,K=u[G];if(G<16)Y=K.high=0|e[t+2*G],W=K.low=0|e[t+2*G+1];else{var V=u[G-15],X=V.high,J=V.low,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Q=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),ee=u[G-2],te=ee.high,ae=ee.low,ne=(te>>>19|ae<<13)^(te<<3|ae>>>29)^te>>>6,re=(ae>>>19|te<<13)^(ae<<3|te>>>29)^(ae>>>6|te<<26),se=u[G-7],oe=se.high,le=se.low,ie=u[G-16],ue=ie.high,ce=ie.low;Y=(Y=(Y=Z+oe+((W=Q+le)>>>0<Q>>>0?1:0))+ne+((W+=re)>>>0<re>>>0?1:0))+ue+((W+=ce)>>>0<ce>>>0?1:0),K.high=Y,K.low=W}var de,ve=L&F^~L&N,me=U&z^~U&H,pe=A&B^A&M^B&M,fe=R&P^R&O^P&O,ge=(A>>>28|R<<4)^(A<<30|R>>>2)^(A<<25|R>>>7),he=(R>>>28|A<<4)^(R<<30|A>>>2)^(R<<25|A>>>7),ye=(L>>>14|U<<18)^(L>>>18|U<<14)^(L<<23|U>>>9),be=(U>>>14|L<<18)^(U>>>18|L<<14)^(U<<23|L>>>9),xe=i[G],we=xe.high,ke=xe.low,Se=$+ye+((de=q+be)>>>0<q>>>0?1:0),_e=he+fe;$=N,q=H,N=F,H=z,F=L,z=U,L=j+(Se=(Se=(Se=Se+ve+((de+=me)>>>0<me>>>0?1:0))+we+((de+=ke)>>>0<ke>>>0?1:0))+Y+((de+=W)>>>0<W>>>0?1:0))+((U=D+de|0)>>>0<D>>>0?1:0)|0,j=M,D=O,M=B,O=P,B=A,P=R,A=Se+(ge+pe+(_e>>>0<he>>>0?1:0))+((R=de+_e|0)>>>0<de>>>0?1:0)|0}p=n.low=p+R,n.high=m+A+(p>>>0<R>>>0?1:0),g=r.low=g+P,r.high=f+B+(g>>>0<P>>>0?1:0),y=s.low=y+O,s.high=h+M+(y>>>0<O>>>0?1:0),x=o.low=x+D,o.high=b+j+(x>>>0<D>>>0?1:0),k=l.low=k+U,l.high=w+L+(k>>>0<U>>>0?1:0),_=c.low=_+z,c.high=S+F+(_>>>0<z>>>0?1:0),T=d.low=T+H,d.high=C+N+(T>>>0<H>>>0?1:0),I=v.low=I+q,v.high=E+$+(I>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(a/4294967296),t[31+(n+128>>>10<<5)]=a,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=a._createHelper(c),t.HmacSHA512=a._createHmacHelper(c)}(),e.SHA512)),An.exports;var e}var Bn,Pn={exports:{}};var Mn,On={exports:{}};function jn(){return Mn?On.exports:(Mn=1,On.exports=(e=en(),nn(),function(t){var a=e,n=a.lib,r=n.WordArray,s=n.Hasher,o=a.x64.Word,l=a.algo,i=[],u=[],c=[];!function(){for(var e=1,t=0,a=0;a<24;a++){i[e+5*t]=(a+1)*(a+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,s=0;s<24;s++){for(var l=0,d=0,v=0;v<7;v++){if(1&r){var m=(1<<v)-1;m<32?d^=1<<m:l^=1<<m-32}128&r?r=r<<1^113:r<<=1}c[s]=o.create(l,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=o.create()}();var v=l.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var a=this._state,n=this.blockSize/2,r=0;r<n;r++){var s=e[t+2*r],o=e[t+2*r+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(I=a[r]).high^=o,I.low^=s}for(var l=0;l<24;l++){for(var v=0;v<5;v++){for(var m=0,p=0,f=0;f<5;f++)m^=(I=a[v+5*f]).high,p^=I.low;var g=d[v];g.high=m,g.low=p}for(v=0;v<5;v++){var h=d[(v+4)%5],y=d[(v+1)%5],b=y.high,x=y.low;for(m=h.high^(b<<1|x>>>31),p=h.low^(x<<1|b>>>31),f=0;f<5;f++)(I=a[v+5*f]).high^=m,I.low^=p}for(var w=1;w<25;w++){var k=(I=a[w]).high,S=I.low,_=i[w];_<32?(m=k<<_|S>>>32-_,p=S<<_|k>>>32-_):(m=S<<_-32|k>>>64-_,p=k<<_-32|S>>>64-_);var C=d[u[w]];C.high=m,C.low=p}var T=d[0],E=a[0];for(T.high=E.high,T.low=E.low,v=0;v<5;v++)for(f=0;f<5;f++){var I=a[w=v+5*f],A=d[w],R=d[(v+1)%5+5*f],B=d[(v+2)%5+5*f];I.high=A.high^~R.high&B.high,I.low=A.low^~R.low&B.low}I=a[0];var P=c[l];I.high^=P.high,I.low^=P.low}},_doFinalize:function(){var e=this._data,a=e.words;this._nDataBytes;var n=8*e.sigBytes,s=32*this.blockSize;a[n>>>5]|=1<<24-n%32,a[(t.ceil((n+1)/s)*s>>>5)-1]|=128,e.sigBytes=4*a.length,this._process();for(var o=this._state,l=this.cfg.outputLength/8,i=l/8,u=[],c=0;c<i;c++){var d=o[c],v=d.high,m=d.low;v=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),u.push(m),u.push(v)}return new r.init(u,l)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),a=0;a<25;a++)t[a]=t[a].clone();return e}});a.SHA3=s._createHelper(v),a.HmacSHA3=s._createHmacHelper(v)}(Math),e.SHA3));var e}var Dn,Ln={exports:{}};var Un,Fn={exports:{}};function zn(){return Un?Fn.exports:(Un=1,Fn.exports=(e=en(),a=(t=e).lib.Base,n=t.enc.Utf8,void(t.algo.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var a=e.blockSize,r=4*a;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),l=s.words,i=o.words,u=0;u<a;u++)l[u]^=1549556828,i[u]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,a=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(a))}}))));var e,t,a,n}var Nn,Hn={exports:{}};var $n,qn={exports:{}};function Gn(){return $n?qn.exports:($n=1,qn.exports=(l=en(),kn(),zn(),t=(e=l).lib,a=t.Base,n=t.WordArray,r=e.algo,s=r.MD5,o=r.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a,r=this.cfg,s=r.hasher.create(),o=n.create(),l=o.words,i=r.keySize,u=r.iterations;l.length<i;){a&&s.update(a),a=s.update(e).finalize(t),s.reset();for(var c=1;c<u;c++)a=s.finalize(a),s.reset();o.concat(a)}return o.sigBytes=4*i,o}}),e.EvpKDF=function(e,t,a){return o.create(a).compute(e,t)},l.EvpKDF));var e,t,a,n,r,s,o,l}var Wn,Yn={exports:{}};function Kn(){return Wn?Yn.exports:(Wn=1,Yn.exports=(e=en(),Gn(),void(e.lib.Cipher||function(t){var a=e,n=a.lib,r=n.Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,l=a.enc;l.Utf8;var i=l.Base64,u=a.algo.EvpKDF,c=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:h}return function(t){return{encrypt:function(a,n,r){return e(n).encrypt(t,a,n,r)},decrypt:function(a,n,r){return e(n).decrypt(t,a,n,r)}}}}()});n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=a.mode={},v=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),m=d.CBC=function(){var e=v.extend();function a(e,a,n){var r,s=this._iv;s?(r=s,this._iv=t):r=this._prevBlock;for(var o=0;o<n;o++)e[a+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;a.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=e.slice(t,t+r);n.decryptBlock(e,t),a.call(this,e,t,r),this._prevBlock=s}}),e}(),p=(a.pad={}).Pkcs7={pad:function(e,t){for(var a=4*t,n=a-e.sigBytes%a,r=n<<24|n<<16|n<<8|n,o=[],l=0;l<n;l+=4)o.push(r);var i=s.create(o,n);e.concat(i)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:m,padding:p}),reset:function(){var e;c.reset.call(this);var t=this.cfg,a=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,a&&a.words):(this._mode=e.call(n,this,a&&a.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var f=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),g=(a.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,a=e.salt;return(a?s.create([1398893684,1701076831]).concat(a).concat(t):t).toString(i)},parse:function(e){var t,a=i.parse(e),n=a.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=s.create(n.slice(2,4)),n.splice(0,4),a.sigBytes-=16),f.create({ciphertext:a,salt:t})}},h=n.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(e,t,a,n){n=this.cfg.extend(n);var r=e.createEncryptor(a,n),s=r.finalize(t),o=r.cfg;return f.create({ciphertext:s,key:a,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(a,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(a.kdf={}).OpenSSL={execute:function(e,t,a,n,r){if(n||(n=s.random(8)),r)o=u.create({keySize:t+a,hasher:r}).compute(e,n);else var o=u.create({keySize:t+a}).compute(e,n);var l=s.create(o.words.slice(t),4*a);return o.sigBytes=4*t,f.create({key:o,iv:l,salt:n})}},b=n.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:y}),encrypt:function(e,t,a,n){var r=(n=this.cfg.extend(n)).kdf.execute(a,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=r.iv;var s=h.encrypt.call(this,e,t,r.key,n);return s.mixIn(r),s},decrypt:function(e,t,a,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(a,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=r.iv,h.decrypt.call(this,e,t,r.key,n)}})}())));var e}var Vn,Xn={exports:{}};var Jn,Zn={exports:{}};var Qn,er={exports:{}};function tr(){return Qn?er.exports:(Qn=1,er.exports=(e=en(),Kn(),
/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */
e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function a(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,a=e>>8&255,n=255&e;255===t?(t=0,255===a?(a=0,255===n?n=0:++n):++a):++t,e=0,e+=t<<16,e+=a<<8,e+=n}return e}function n(e){return 0===(e[0]=a(e[0]))&&(e[1]=a(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),n(o);var l=o.slice(0);a.encryptBlock(l,0);for(var i=0;i<r;i++)e[t+i]^=l[i]}});return t.Decryptor=r,t}(),e.mode.CTRGladman));var e}var ar,nr={exports:{}};var rr,sr={exports:{}};var or,lr={exports:{}};var ir,ur={exports:{}};var cr,dr={exports:{}};var vr,mr={exports:{}};var pr,fr={exports:{}};var gr,hr={exports:{}};var yr,br={exports:{}};var xr,wr={exports:{}};function kr(){return xr?wr.exports:(xr=1,wr.exports=(e=en(),mn(),bn(),Gn(),Kn(),function(){var t=e,a=t.lib,n=a.WordArray,r=a.BlockCipher,s=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],i=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],a=0;a<56;a++){var n=o[a]-1;t[a]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],s=0;s<16;s++){var u=r[s]=[],c=i[s];for(a=0;a<24;a++)u[a/6|0]|=t[(l[a]-1+c)%28]<<31-a%6,u[4+(a/6|0)]|=t[28+(l[a+24]-1+c)%28]<<31-a%6;for(u[0]=u[0]<<1|u[0]>>>31,a=1;a<7;a++)u[a]=u[a]>>>4*(a-1)+3;u[7]=u[7]<<5|u[7]>>>27}var d=this._invSubKeys=[];for(a=0;a<16;a++)d[a]=r[15-a]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,a){this._lBlock=e[t],this._rBlock=e[t+1],v.call(this,4,252645135),v.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),v.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=a[n],s=this._lBlock,o=this._rBlock,l=0,i=0;i<8;i++)l|=u[i][((o^r[i])&c[i])>>>0];this._lBlock=o,this._rBlock=s^l}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,v.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function v(e,t){var a=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=a,this._lBlock^=a<<e}function m(e,t){var a=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=a,this._rBlock^=a<<e}t.DES=r._createHelper(d);var p=s.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),a=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(n.create(t)),this._des2=d.createEncryptor(n.create(a)),this._des3=d.createEncryptor(n.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(p)}(),e.TripleDES));var e}var Sr,_r={exports:{}};var Cr,Tr={exports:{}};var Er,Ir={exports:{}};var Ar,Rr,Br,Pr,Mr,Or,jr,Dr={exports:{}};function Lr(){return Ar||(Ar=1,Dr.exports=(e=en(),mn(),bn(),Gn(),Kn(),function(){var t=e,a=t.lib.BlockCipher,n=t.algo;const r=16,s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function i(e,t){let a=t>>24&255,n=t>>16&255,r=t>>8&255,s=255&t,o=e.sbox[0][a]+e.sbox[1][n];return o^=e.sbox[2][r],o+=e.sbox[3][s],o}function u(e,t,a){let n,s=t,o=a;for(let l=0;l<r;++l)s^=e.pbox[l],o=i(e,s)^o,n=s,s=o,o=n;return n=s,s=o,o=n,o^=e.pbox[r],s^=e.pbox[r+1],{left:s,right:o}}function c(e,t,a){let n,s=t,o=a;for(let l=r+1;l>1;--l)s^=e.pbox[l],o=i(e,s)^o,n=s,s=o,o=n;return n=s,s=o,o=n,o^=e.pbox[1],s^=e.pbox[0],{left:s,right:o}}function d(e,t,a){for(let r=0;r<4;r++){e.sbox[r]=[];for(let t=0;t<256;t++)e.sbox[r][t]=o[r][t]}let n=0;for(let o=0;o<r+2;o++)e.pbox[o]=s[o]^t[n],n++,n>=a&&(n=0);let l=0,i=0,c=0;for(let s=0;s<r+2;s+=2)c=u(e,l,i),l=c.left,i=c.right,e.pbox[s]=l,e.pbox[s+1]=i;for(let r=0;r<4;r++)for(let t=0;t<256;t+=2)c=u(e,l,i),l=c.left,i=c.right,e.sbox[r][t]=l,e.sbox[r][t+1]=i;return!0}var v=n.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,a=e.sigBytes/4;d(l,t,a)}},encryptBlock:function(e,t){var a=u(l,e[t],e[t+1]);e[t]=a.left,e[t+1]=a.right},decryptBlock:function(e,t){var a=c(l,e[t],e[t+1]);e[t]=a.left,e[t+1]=a.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=a._createHelper(v)}(),e.Blowfish)),Dr.exports;var e}const Ur=Ka(Xa.exports=function(e){return e}(en(),nn(),on(),cn(),mn(),gn(),bn(),kn(),Cn(),Tn||(Tn=1,En.exports=(jr=en(),Cn(),Br=(Rr=jr).lib.WordArray,Pr=Rr.algo,Mr=Pr.SHA256,Or=Pr.SHA224=Mr.extend({_doReset:function(){this._hash=new Br.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=Mr._doFinalize.call(this);return e.sigBytes-=4,e}}),Rr.SHA224=Mr._createHelper(Or),Rr.HmacSHA224=Mr._createHmacHelper(Or),jr.SHA224)),Rn(),function(){return Bn?Pn.exports:(Bn=1,Pn.exports=(l=en(),nn(),Rn(),t=(e=l).x64,a=t.Word,n=t.WordArray,r=e.algo,s=r.SHA512,o=r.SHA384=s.extend({_doReset:function(){this._hash=new n.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}}),e.SHA384=s._createHelper(o),e.HmacSHA384=s._createHmacHelper(o),l.SHA384));var e,t,a,n,r,s,o,l}(),jn(),function(){return Dn?Ln.exports:(Dn=1,Ln.exports=(e=en(),
/** @preserve
      			(c) 2012 by Cédric Mesnil. All rights reserved.
      
      			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      
      			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
      			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      
      			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      			*/
function(){var t=e,a=t.lib,n=a.WordArray,r=a.Hasher,s=t.algo,o=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),i=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=n.create([0,1518500249,1859775393,2400959708,2840853838]),d=n.create([1352829926,1548603684,1836072691,2053994217,0]),v=s.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var n=t+a,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s,v,b,x,w,k,S,_,C,T,E,I=this._hash.words,A=c.words,R=d.words,B=o.words,P=l.words,M=i.words,O=u.words;for(k=s=I[0],S=v=I[1],_=b=I[2],C=x=I[3],T=w=I[4],a=0;a<80;a+=1)E=s+e[t+B[a]]|0,E+=a<16?m(v,b,x)+A[0]:a<32?p(v,b,x)+A[1]:a<48?f(v,b,x)+A[2]:a<64?g(v,b,x)+A[3]:h(v,b,x)+A[4],E=(E=y(E|=0,M[a]))+w|0,s=w,w=x,x=y(b,10),b=v,v=E,E=k+e[t+P[a]]|0,E+=a<16?h(S,_,C)+R[0]:a<32?g(S,_,C)+R[1]:a<48?f(S,_,C)+R[2]:a<64?p(S,_,C)+R[3]:m(S,_,C)+R[4],E=(E=y(E|=0,O[a]))+T|0,k=T,T=C,C=y(_,10),_=S,S=E;E=I[1]+b+C|0,I[1]=I[2]+x+T|0,I[2]=I[3]+w+k|0,I[3]=I[4]+s+S|0,I[4]=I[0]+v+_|0,I[0]=E},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,s=r.words,o=0;o<5;o++){var l=s[o];s[o]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function m(e,t,a){return e^t^a}function p(e,t,a){return e&t|~e&a}function f(e,t,a){return(e|~t)^a}function g(e,t,a){return e&a|t&~a}function h(e,t,a){return e^(t|~a)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(v),t.HmacRIPEMD160=r._createHmacHelper(v)}(),e.RIPEMD160));var e}(),zn(),function(){return Nn?Hn.exports:(Nn=1,Hn.exports=(i=en(),Cn(),zn(),t=(e=i).lib,a=t.Base,n=t.WordArray,r=e.algo,s=r.SHA256,o=r.HMAC,l=r.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:s,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=o.create(a.hasher,e),s=n.create(),l=n.create([1]),i=s.words,u=l.words,c=a.keySize,d=a.iterations;i.length<c;){var v=r.update(t).finalize(l);r.reset();for(var m=v.words,p=m.length,f=v,g=1;g<d;g++){f=r.finalize(f),r.reset();for(var h=f.words,y=0;y<p;y++)m[y]^=h[y]}s.concat(v),u[0]++}return s.sigBytes=4*c,s}}),e.PBKDF2=function(e,t,a){return l.create(a).compute(e,t)},i.PBKDF2));var e,t,a,n,r,s,o,l,i}(),Gn(),Kn(),function(){return Vn?Xn.exports:(Vn=1,Xn.exports=(e=en(),Kn(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function a(e,t,a,n){var r,s=this._iv;s?(r=s.slice(0),this._iv=void 0):r=this._prevBlock,n.encryptBlock(r,0);for(var o=0;o<a;o++)e[t+o]^=r[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;a.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=e.slice(t,t+r);a.call(this,e,t,r,n),this._prevBlock=s}}),t}(),e.mode.CFB));var e}(),function(){return Jn?Zn.exports:(Jn=1,Zn.exports=(a=en(),Kn(),a.mode.CTR=(e=a.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize,r=this._iv,s=this._counter;r&&(s=this._counter=r.slice(0),this._iv=void 0);var o=s.slice(0);a.encryptBlock(o,0),s[n-1]=s[n-1]+1|0;for(var l=0;l<n;l++)e[t+l]^=o[l]}}),e.Decryptor=t,e),a.mode.CTR));var e,t,a}(),tr(),function(){return ar?nr.exports:(ar=1,nr.exports=(a=en(),Kn(),a.mode.OFB=(e=a.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize,r=this._iv,s=this._keystream;r&&(s=this._keystream=r.slice(0),this._iv=void 0),a.encryptBlock(s,0);for(var o=0;o<n;o++)e[t+o]^=s[o]}}),e.Decryptor=t,e),a.mode.OFB));var e,t,a}(),function(){return rr?sr.exports:(rr=1,sr.exports=(t=en(),Kn(),t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),t.mode.ECB));var e,t}(),function(){return or?lr.exports:(or=1,lr.exports=(e=en(),Kn(),e.pad.AnsiX923={pad:function(e,t){var a=e.sigBytes,n=4*t,r=n-a%n,s=a+r-1;e.clamp(),e.words[s>>>2]|=r<<24-s%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923));var e}(),function(){return ir?ur.exports:(ir=1,ur.exports=(e=en(),Kn(),e.pad.Iso10126={pad:function(t,a){var n=4*a,r=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126));var e}(),function(){return cr?dr.exports:(cr=1,dr.exports=(e=en(),Kn(),e.pad.Iso97971={pad:function(t,a){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,a)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971));var e}(),function(){return vr?mr.exports:(vr=1,mr.exports=(e=en(),Kn(),e.pad.ZeroPadding={pad:function(e,t){var a=4*t;e.clamp(),e.sigBytes+=a-(e.sigBytes%a||a)},unpad:function(e){var t=e.words,a=e.sigBytes-1;for(a=e.sigBytes-1;a>=0;a--)if(t[a>>>2]>>>24-a%4*8&255){e.sigBytes=a+1;break}}},e.pad.ZeroPadding));var e}(),function(){return pr?fr.exports:(pr=1,fr.exports=(e=en(),Kn(),e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding));var e}(),function(){return gr?hr.exports:(gr=1,hr.exports=(n=en(),Kn(),t=(e=n).lib.CipherParams,a=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var n=a.parse(e);return t.create({ciphertext:n})}},n.format.Hex));var e,t,a,n}(),function(){return yr?br.exports:(yr=1,br.exports=(e=en(),mn(),bn(),Gn(),Kn(),function(){var t=e,a=t.lib.BlockCipher,n=t.algo,r=[],s=[],o=[],l=[],i=[],u=[],c=[],d=[],v=[],m=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var a=0,n=0;for(t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,r[a]=p,s[p]=a;var f=e[a],g=e[f],h=e[g],y=257*e[p]^16843008*p;o[a]=y<<24|y>>>8,l[a]=y<<16|y>>>16,i[a]=y<<8|y>>>24,u[a]=y,y=16843009*h^65537*g^257*f^16843008*a,c[p]=y<<24|y>>>8,d[p]=y<<16|y>>>16,v[p]=y<<8|y>>>24,m[p]=y,a?(a=f^e[e[e[h^f]]],n^=e[e[n]]):a=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],f=n.AES=a.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,a=e.sigBytes/4,n=4*((this._nRounds=a+6)+1),s=this._keySchedule=[],o=0;o<n;o++)o<a?s[o]=t[o]:(u=s[o-1],o%a?a>6&&o%a==4&&(u=r[u>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u]):(u=r[(u=u<<8|u>>>24)>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u],u^=p[o/a|0]<<24),s[o]=s[o-a]^u);for(var l=this._invKeySchedule=[],i=0;i<n;i++){if(o=n-i,i%4)var u=s[o];else u=s[o-4];l[i]=i<4||o<=4?u:c[r[u>>>24]]^d[r[u>>>16&255]]^v[r[u>>>8&255]]^m[r[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,l,i,u,r)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,c,d,v,m,s),a=e[t+1],e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,n,r,s,o,l){for(var i=this._nRounds,u=e[t]^a[0],c=e[t+1]^a[1],d=e[t+2]^a[2],v=e[t+3]^a[3],m=4,p=1;p<i;p++){var f=n[u>>>24]^r[c>>>16&255]^s[d>>>8&255]^o[255&v]^a[m++],g=n[c>>>24]^r[d>>>16&255]^s[v>>>8&255]^o[255&u]^a[m++],h=n[d>>>24]^r[v>>>16&255]^s[u>>>8&255]^o[255&c]^a[m++],y=n[v>>>24]^r[u>>>16&255]^s[c>>>8&255]^o[255&d]^a[m++];u=f,c=g,d=h,v=y}f=(l[u>>>24]<<24|l[c>>>16&255]<<16|l[d>>>8&255]<<8|l[255&v])^a[m++],g=(l[c>>>24]<<24|l[d>>>16&255]<<16|l[v>>>8&255]<<8|l[255&u])^a[m++],h=(l[d>>>24]<<24|l[v>>>16&255]<<16|l[u>>>8&255]<<8|l[255&c])^a[m++],y=(l[v>>>24]<<24|l[u>>>16&255]<<16|l[c>>>8&255]<<8|l[255&d])^a[m++],e[t]=f,e[t+1]=g,e[t+2]=h,e[t+3]=y},keySize:8});t.AES=a._createHelper(f)}(),e.AES));var e}(),kr(),function(){return Sr?_r.exports:(Sr=1,_r.exports=(e=en(),mn(),bn(),Gn(),Kn(),function(){var t=e,a=t.lib.StreamCipher,n=t.algo,r=n.RC4=a.extend({_doReset:function(){for(var e=this._key,t=e.words,a=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var s=0;r<256;r++){var o=r%a,l=t[o>>>2]>>>24-o%4*8&255;s=(s+n[r]+l)%256;var i=n[r];n[r]=n[s],n[s]=i}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,a=this._j,n=0,r=0;r<4;r++){a=(a+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[a],e[a]=s,n|=e[(e[t]+e[a])%256]<<24-8*r}return this._i=t,this._j=a,n}t.RC4=a._createHelper(r);var o=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this)}});t.RC4Drop=a._createHelper(o)}(),e.RC4));var e}(),function(){return Cr?Tr.exports:(Cr=1,Tr.exports=(e=en(),mn(),bn(),Gn(),Kn(),function(){var t=e,a=t.lib.StreamCipher,n=t.algo,r=[],s=[],o=[],l=n.Rabbit=a.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,a=0;a<4;a++)e[a]=16711935&(e[a]<<8|e[a]>>>24)|4278255360&(e[a]<<24|e[a]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,a=0;a<4;a++)i.call(this);for(a=0;a<8;a++)r[a]^=n[a+4&7];if(t){var s=t.words,o=s[0],l=s[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),d=u>>>16|4294901760&c,v=c<<16|65535&u;for(r[0]^=u,r[1]^=d,r[2]^=c,r[3]^=v,r[4]^=u,r[5]^=d,r[6]^=c,r[7]^=v,a=0;a<4;a++)i.call(this)}},_doProcessBlock:function(e,t){var a=this._X;i.call(this),r[0]=a[0]^a[5]>>>16^a[3]<<16,r[1]=a[2]^a[7]>>>16^a[5]<<16,r[2]=a[4]^a[1]>>>16^a[7]<<16,r[3]=a[6]^a[3]>>>16^a[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function i(){for(var e=this._X,t=this._C,a=0;a<8;a++)s[a]=t[a];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,a=0;a<8;a++){var n=e[a]+t[a],r=65535&n,l=n>>>16,i=((r*r>>>17)+r*l>>>15)+l*l,u=((4294901760&n)*n|0)+((65535&n)*n|0);o[a]=i^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.Rabbit=a._createHelper(l)}(),e.Rabbit));var e}(),function(){return Er?Ir.exports:(Er=1,Ir.exports=(e=en(),mn(),bn(),Gn(),Kn(),function(){var t=e,a=t.lib.StreamCipher,n=t.algo,r=[],s=[],o=[],l=n.RabbitLegacy=a.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)i.call(this);for(r=0;r<8;r++)n[r]^=a[r+4&7];if(t){var s=t.words,o=s[0],l=s[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),d=u>>>16|4294901760&c,v=c<<16|65535&u;for(n[0]^=u,n[1]^=d,n[2]^=c,n[3]^=v,n[4]^=u,n[5]^=d,n[6]^=c,n[7]^=v,r=0;r<4;r++)i.call(this)}},_doProcessBlock:function(e,t){var a=this._X;i.call(this),r[0]=a[0]^a[5]>>>16^a[3]<<16,r[1]=a[2]^a[7]>>>16^a[5]<<16,r[2]=a[4]^a[1]>>>16^a[7]<<16,r[3]=a[6]^a[3]>>>16^a[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function i(){for(var e=this._X,t=this._C,a=0;a<8;a++)s[a]=t[a];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,a=0;a<8;a++){var n=e[a]+t[a],r=65535&n,l=n>>>16,i=((r*r>>>17)+r*l>>>15)+l*l,u=((4294901760&n)*n|0)+((65535&n)*n|0);o[a]=i^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.RabbitLegacy=a._createHelper(l)}(),e.RabbitLegacy));var e}(),Lr()));var Fr=(e=>(e.SENDING="sending",e.SENT="sent",e.DELIVERED="delivered",e.READ="read",e.FAILED="failed",e))(Fr||{});const zr="spacetalk-secure-key-2023";class Nr{constructor(e){t(this,"messages",a({})),t(this,"pendingMessages",a({})),t(this,"unreadMessages",a({})),t(this,"messageExpiryDays",30),this.storageProvider=e,this.loadAllChats(),this.setupAutoCleanup(),m(this.messages,()=>{this.saveAllChats()},{deep:!0}),m(this.pendingMessages,()=>{this.savePendingMessages()},{deep:!0})}createMessage(e,t,a){const n=this.encryptMessage(e);return{id:Wa(),sender:a?"me":"partner",text:n,originalText:a?e:void 0,timestamp:Date.now(),status:a?"sending":"delivered",retryCount:0,expiresAt:Date.now()+24*this.messageExpiryDays*60*60*1e3}}addMessage(e,t){const a=this.getConversationKey(t);this.messages.value[a]||(this.messages.value[a]=[]),this.messages.value[a].push(e),this.saveAllChats()}updateMessageStatus(e,t){let a=!1;return Object.keys(this.messages.value).forEach(n=>{const r=this.messages.value[n],s=r.findIndex(t=>t.id===e);-1!==s&&(r[s].status=t,a=!0)}),a&&this.saveAllChats(),a}addToPendingMessages(e,t){this.pendingMessages.value[t]||(this.pendingMessages.value[t]=[]),this.pendingMessages.value[t].push(e),this.savePendingMessages()}removeFromPendingMessages(e,t){if(!this.pendingMessages.value[t])return!1;const a=this.pendingMessages.value[t].length;return this.pendingMessages.value[t]=this.pendingMessages.value[t].filter(t=>t.id!==e),a!==this.pendingMessages.value[t].length&&(this.savePendingMessages(),!0)}getPendingMessages(e){return this.pendingMessages.value[e]||[]}getAllPendingMessages(){return this.pendingMessages.value}getMessages(e){const t=this.getConversationKey(e);return(this.messages.value[t]||[]).map(e=>"partner"===e.sender?{...e,text:this.decryptMessage(e.text)}:{...e,text:e.originalText||this.decryptMessage(e.text)})}markAsRead(e){this.unreadMessages.value[e]=!1;const t=this.getConversationKey(e),a=this.messages.value[t]||[];let n=!1;a.forEach(e=>{"partner"===e.sender&&"delivered"===e.status&&(e.status="read",n=!0)}),n&&this.saveAllChats()}hasUnreadMessages(e){return!!this.unreadMessages.value[e]}setUnread(e,t){this.unreadMessages.value[e]=t}clearChat(e){const t=this.getConversationKey(e);this.messages.value[t]&&(this.messages.value[t]=[],this.saveAllChats()),this.pendingMessages.value[e]&&(this.pendingMessages.value[e]=[],this.savePendingMessages())}clearAllChats(){this.messages.value={},this.unreadMessages.value={},this.pendingMessages.value={},this.saveAllChats(),this.savePendingMessages()}encryptMessage(e){try{return Ur.AES.encrypt(e,zr).toString()}catch(t){return e}}decryptMessage(e){try{return Ur.AES.decrypt(e,zr).toString(Ur.enc.Utf8)}catch(t){return e}}getConversationKey(e){return`chat_${e}`}saveAllChats(){if(this.storageProvider.isAvailable)try{this.storageProvider.setItem("chat_messages",JSON.stringify(this.messages.value)),this.storageProvider.setItem("chat_unread",JSON.stringify(this.unreadMessages.value))}catch(e){}}loadAllChats(){if(this.storageProvider.isAvailable)try{const e=this.storageProvider.getItem("chat_messages");e&&(this.messages.value=JSON.parse(e));const t=this.storageProvider.getItem("chat_unread");t&&(this.unreadMessages.value=JSON.parse(t))}catch(e){}}savePendingMessages(){if(this.storageProvider.isAvailable)try{this.storageProvider.setItem("chat_pending_messages",JSON.stringify(this.pendingMessages.value))}catch(e){}}loadPendingMessages(){if(this.storageProvider.isAvailable)try{const e=this.storageProvider.getItem("chat_pending_messages");e&&(this.pendingMessages.value=JSON.parse(e))}catch(e){}}setupAutoCleanup(){setInterval(()=>this.cleanupExpiredMessages(),864e5),this.cleanupExpiredMessages()}cleanupExpiredMessages(){const e=Date.now();let t=!1;Object.keys(this.messages.value).forEach(a=>{const n=this.messages.value[a].length;this.messages.value[a]=this.messages.value[a].filter(t=>!t.expiresAt||t.expiresAt>e),n!==this.messages.value[a].length&&(t=!0)}),t&&this.saveAllChats()}}class Hr{constructor(e){t(this,"currentPartnerId",null),t(this,"isListening",!1),t(this,"retryTimeout",null),t(this,"typingTimeout",null),t(this,"DEBUG",!0),this.model=e,this.setupSocketListeners(),this.scheduleRetryCheck()}setupSocketListeners(){const{socket:e}=W();e.value?(this.isListening&&(e.value.off("chat-message"),e.value.off("message-received"),e.value.off("message-read"),e.value.off("typing"),e.value.off("check-pending-messages"),this.isListening=!1),e.value.on("check-pending-messages",()=>{var t;this.DEBUG,null==(t=e.value)||t.emit("get-pending-messages")}),e.value.on("chat-message",e=>{this.DEBUG;const t=this.model.createMessage(e.text,e.from,!1);t.id=e.id,t.timestamp=e.timestamp,this.model.addMessage(t,e.from),e.from!==this.currentPartnerId?(this.DEBUG,this.model.setUnread(e.from,!0)):(this.DEBUG,this.sendReadReceipt(e.id,e.from)),this.sendDeliveryReceipt(e.id,e.from)}),e.value.on("message-received",e=>{this.DEBUG,this.model.updateMessageStatus(e.id,Fr.DELIVERED)}),e.value.on("message-read",e=>{this.DEBUG,this.model.updateMessageStatus(e.id,Fr.READ)}),e.value.on("typing",e=>{this.DEBUG,window.dispatchEvent(new CustomEvent("chat:typing",{detail:{partnerId:e.from,isTyping:e.isTyping}}))}),this.isListening=!0,this.DEBUG):this.DEBUG}setCurrentPartner(e){this.currentPartnerId=e,e&&this.model.markAsRead(e)}sendMessage(e,t){if(!e.trim()||!t)return!1;const a=this.model.createMessage(e,t,!0);this.model.addMessage(a,t);const{socket:n,isConnected:r}=W();return n.value&&r.value?this.sendMessageToServer(a,t):(a.status=Fr.FAILED,this.model.addToPendingMessages(a,t)),!0}sendMessageToServer(e,t){const{socket:a}=W();if(!a.value)return e.status=Fr.FAILED,void this.model.addToPendingMessages(e,t);this.model.updateMessageStatus(e.id,Fr.SENDING),this.DEBUG,a.value.emit("chat-message",{id:e.id,text:e.originalText||e.text,to:t,timestamp:e.timestamp},a=>{a&&a.success?(this.DEBUG,this.model.updateMessageStatus(e.id,Fr.SENT)):(this.DEBUG,this.model.updateMessageStatus(e.id,Fr.FAILED),this.model.addToPendingMessages(e,t))})}resendMessage(e,t){const a=this.model.getPendingMessages(t).find(t=>t.id===e);if(!a){this.DEBUG;const a=this.model.getMessages(t).find(t=>t.id===e&&t.status===Fr.FAILED);return a?a.retryCount>=3?(this.DEBUG,!1):(a.retryCount++,this.sendMessageToServer(a,t),!0):(this.DEBUG,!1)}return a.retryCount>=3?(this.DEBUG,!1):(a.retryCount++,this.model.removeFromPendingMessages(e,t),this.sendMessageToServer(a,t),!0)}retryPendingMessages(){const{isConnected:e}=W();if(!e.value)return void this.DEBUG;const t=this.model.getAllPendingMessages();Object.keys(t).forEach(e=>{const a=[...t[e]];this.DEBUG,a.forEach(t=>{t.retryCount<3&&(this.model.removeFromPendingMessages(t.id,e),this.sendMessageToServer(t,e))})})}scheduleRetryCheck(){this.retryTimeout=setInterval(()=>{this.DEBUG,this.retryPendingMessages()},3e4)}sendDeliveryReceipt(e,t){const{socket:a,isConnected:n}=W();a.value&&n.value?(this.DEBUG,a.value.emit("message-received",{id:e,to:t})):this.DEBUG}sendReadReceipt(e,t){const{socket:a,isConnected:n}=W();a.value&&n.value?(this.DEBUG,a.value.emit("message-read",{id:e,to:t})):this.DEBUG}sendTypingIndicator(e){const{socket:t,isConnected:a}=W();t.value&&a.value&&e&&(this.typingTimeout&&clearTimeout(this.typingTimeout),t.value.emit("typing",{to:e,isTyping:!0}),this.typingTimeout=setTimeout(()=>{t.value&&a.value&&t.value.emit("typing",{to:e,isTyping:!1})},3e3))}getMessages(e){return this.model.getMessages(e)}hasUnreadMessages(e){return this.model.hasUnreadMessages(e)}markAsRead(e){this.model.markAsRead(e)}clearChat(e){this.model.clearChat(e)}clearAllChats(){this.model.clearAllChats()}cleanup(){const{socket:e}=W();e.value&&(e.value.off("chat-message"),e.value.off("message-received"),e.value.off("message-read"),e.value.off("typing")),this.retryTimeout&&clearInterval(this.retryTimeout),this.typingTimeout&&clearTimeout(this.typingTimeout),this.isListening=!1}}a({});const $r=a(null);a({}),a(!1),a({});let qr=null,Gr=null,Wr=!1;const Yr="/assets/Circle-e098ae42.png",Kr={class:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 sm:p-6 text-center border border-white/10"},Vr={key:"disconnected"},Xr={key:"disconnecting"},Jr={class:"text-base sm:text-lg font-semibold mb-1 sm:mb-2 text-white"},Zr={class:"text-xs sm:text-sm text-red-300"},Qr={key:"searching"},es={key:"matched"},ts={class:"text-base sm:text-lg font-semibold mb-1 sm:mb-2 text-white"},as={key:0,class:"flex items-center justify-center gap-2 text-gray-300"},ns={class:"text-lg sm:text-xl"},rs={class:"text-xs sm:text-sm font-medium"},ss={key:"connected"},os={class:"text-base sm:text-lg font-semibold mb-1 sm:mb-2 text-white"},ls={key:0,class:"flex items-center justify-center gap-2 text-gray-300"},is={class:"text-lg sm:text-xl"},us={class:"text-xs sm:text-sm font-medium"},cs={key:0,class:"mt-3 sm:mt-4 text-xs"},ds={class:"flex items-center justify-center gap-1 sm:gap-2"},vs={class:"text-gray-300"},ms={key:0,class:"text-red-400 mt-1 text-xs"},ps=(e,t)=>{const a=e.__vccOpts||e;for(const[n,r]of t)a[n]=r;return a},fs=ps(o({__name:"connection-card",props:{status:{type:String,default:"disconnected"},partnerInfo:{type:Object,default:null},errorMessage:{type:String,default:""},showStatus:{type:Boolean,default:!0},disconnectReason:{type:String,default:""}},setup(e){const t=e,r=a(t.status),s=p(()=>{switch(t.disconnectReason){case"skip":return"Skipped";case"network-disconnect":return"Connection Lost";case"inactivity":return"Inactive Connection";case"matching":return"Finding New Partner";default:return"Disconnected"}}),o=p(()=>{switch(t.disconnectReason){case"skip":return"The other user skipped this conversation";case"network-disconnect":return"The connection with your partner was lost";case"inactivity":return"The call ended due to inactivity";case"matching":return"Looking for a new partner...";default:return"The call has been ended"}});m(()=>t.partnerInfo,(e,t)=>{},{deep:!0}),m(()=>t.status,(e,a)=>{r.value=a,"disconnected"===e&&t.partnerInfo});const u=p(()=>"disconnected"===r.value&&"searching"===t.status?"idle-to-search":"searching"===r.value&&"matched"===t.status?"search-to-match":"matched"===r.value&&"connected"===t.status?"match-to-connect":"disconnected"===t.status?"to-idle":"disconnecting"===t.status?"to-disconnecting":"fade"),d=e=>{},v=(e,t)=>{},w=e=>{},k=p(()=>{switch(t.status){case"searching":return"Searching...";case"matched":return"Partner found, connecting...";case"connected":return"Connected";case"disconnecting":return"Call ended";default:return"Disconnected"}}),S=e=>{switch(e.toLowerCase()){case"any":return"Go With the Flow";case"chill":return"Chill";case"fun":return"Fun";case"curious":return"Curious";case"creative":return"Creative";default:return e}};return n(()=>{window.addEventListener("connection-closed",()=>{})}),(t,a)=>(c(),l("div",Kr,[i(g,{name:u.value,mode:"out-in",onBeforeLeave:d,onEnter:v,onAfterEnter:w},{default:f(()=>{var t,n;return["disconnected"===e.status?(c(),l("div",Vr,a[0]||(a[0]=[h("div",{class:"status-container"},[h("div",{class:"status-circle"},[h("img",{src:Yr,alt:"Connection Circle",class:"circle-image"}),h("div",{class:"thin-ring idle-ring"})])],-1),h("h2",{class:"text-base sm:text-lg font-semibold mb-1 sm:mb-2 text-white"},"Ready to Connect",-1),h("p",{class:"text-xs sm:text-sm text-gray-300"},'Press "Next" to find someone to talk with',-1)]))):"disconnecting"===e.status?(c(),l("div",Xr,[a[1]||(a[1]=h("div",{class:"status-container"},[h("div",{class:"status-circle"},[h("img",{src:Yr,alt:"Connection Circle",class:"circle-image pulse-effect"}),h("div",{class:"thin-ring disconnecting-ring"})])],-1)),h("h2",Jr,b(s.value),1),h("p",Zr,b(o.value),1)])):"searching"===e.status?(c(),l("div",Qr,a[2]||(a[2]=[h("div",{class:"status-container"},[h("div",{class:"status-circle"},[h("img",{src:Yr,alt:"Connection Circle",class:"circle-image pulse-effect"}),h("div",{class:"thin-ring search-ring"})])],-1),h("h2",{class:"text-base sm:text-lg font-semibold mb-1 sm:mb-2 text-white"},"Searching...",-1),h("p",{class:"text-xs sm:text-sm text-gray-300"},"Looking for someone to talk to",-1)]))):"matched"===e.status?(c(),l("div",es,[a[3]||(a[3]=h("div",{class:"status-container"},[h("div",{class:"status-circle"},[h("img",{src:Yr,alt:"Connection Circle",class:"circle-image fast-rotate"}),h("div",{class:"thin-ring match-ring"})])],-1)),h("h2",ts,b((null==(t=e.partnerInfo)?void 0:t.vibe)?S(e.partnerInfo.vibe):"Match Found!"),1),e.partnerInfo?(c(),l("div",as,[h("span",ns,b(e.partnerInfo.flag||"🌍"),1),h("span",rs,b(e.partnerInfo.country),1)])):x("",!0),a[4]||(a[4]=h("p",{class:"text-xs sm:text-sm text-yellow-400 mt-1 sm:mt-2"},"Setting up voice connection...",-1))])):"connected"===e.status?(c(),l("div",ss,[a[5]||(a[5]=h("div",{class:"status-container"},[h("div",{class:"status-circle"},[h("img",{src:Yr,alt:"Connection Circle",class:"circle-image"}),h("div",{class:"thin-ring connect-ring"})])],-1)),h("h2",os,b((null==(n=e.partnerInfo)?void 0:n.vibe)?S(e.partnerInfo.vibe):"Connected!"),1),e.partnerInfo?(c(),l("div",ls,[h("span",is,b(e.partnerInfo.flag||"🌍"),1),h("span",us,b(e.partnerInfo.country),1)])):x("",!0),a[6]||(a[6]=h("p",{class:"text-xs sm:text-sm text-green-400 mt-1 sm:mt-2"},"You can talk now",-1))])):x("",!0)]}),_:1},8,["name"]),e.showStatus&&"disconnected"!==e.status?(c(),l("div",cs,[h("div",ds,[h("span",{class:y({"text-green-400":"connected"===e.status,"text-yellow-400":"matched"===e.status,"text-blue-400":"searching"===e.status,"text-red-400":"disconnecting"===e.status})},"●",2),h("span",vs,b(k.value),1)]),e.errorMessage?(c(),l("p",ms,b(e.errorMessage),1)):x("",!0)])):x("",!0)]))}}),[["__scopeId","data-v-898e3a5f"]]),gs={class:"space-y-2 sm:space-y-3 md:space-y-4 px-1 sm:px-2"},hs={class:"flex justify-center items-center gap-2 sm:gap-3 md:gap-4"},ys=["disabled"],bs={class:"relative"},xs={key:0,class:"text-white text-base sm:text-lg md:text-xl"},ws={key:1,class:"text-white text-base sm:text-lg md:text-xl"},ks={key:2,class:"absolute -top-1 -right-1 w-2 h-2 sm:w-3 sm:h-3 bg-yellow-300 rounded-full animate-pulse"},Ss=["disabled"],_s={class:"flex flex-wrap justify-center gap-1 sm:gap-2 md:gap-3"},Cs=o({__name:"control-buttons",props:{isMuted:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!0}},emits:["toggle-mute","find-next","toggle-chat","toggle-games","toggle-history","toggle-donation"],setup(e,{emit:t}){const s=e,o=t,i=a(!1),u=a(s.isMuted);function d(e){const{isMuted:t}=e.detail;u.value=t}function v(){i.value||(i.value=!0,o("toggle-mute"),setTimeout(()=>{i.value=!1},200),setTimeout(()=>{try{const e=document.querySelector("audio");e&&e.paused&&e.play().catch(e=>{})}catch(e){}},300))}return m(()=>s.isMuted,e=>{u.value=e}),n(()=>{const{getSavedMicrophoneState:e}=ya(),t=e();null!==t&&(u.value=t),window.addEventListener("microphone-state-changed",d)}),r(()=>{window.removeEventListener("microphone-state-changed",d)}),(t,a)=>(c(),l("div",gs,[h("div",hs,[h("button",{onClick:v,class:y(["w-11 h-11 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center transition-all shadow-xl transform hover:scale-110",u.value?"bg-gradient-to-r from-red-400 to-pink-400 shadow-red-400/70":"bg-gradient-to-r from-emerald-400 to-green-400 hover:from-green-400 hover:to-emerald-400 shadow-emerald-400/70"]),disabled:i.value},[h("div",bs,[u.value?(c(),l("span",ws,"🔇")):(c(),l("span",xs,"🎤")),i.value?(c(),l("span",ks)):x("",!0)])],10,ys),h("button",{onClick:a[0]||(a[0]=e=>t.$emit("find-next")),class:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-gradient-to-r from-orange-400 to-yellow-400 hover:from-yellow-400 hover:to-orange-400 rounded-full flex items-center justify-center shadow-2xl shadow-orange-400/80 transition-all transform hover:scale-110"},a[5]||(a[5]=[h("span",{class:"text-white text-xl sm:text-2xl md:text-3xl"},"📞",-1)])),h("button",{onClick:a[1]||(a[1]=e=>t.$emit("toggle-chat")),disabled:e.isDisabled,class:y(["w-11 h-11 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center shadow-xl transition-all transform hover:scale-110",e.isDisabled?"bg-gray-600 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-400 to-cyan-400 hover:from-cyan-400 hover:to-blue-400 shadow-blue-400/70"])},a[6]||(a[6]=[h("span",{class:"text-white text-base sm:text-lg md:text-xl"},"💬",-1)]),10,Ss)]),h("div",_s,[h("button",{onClick:a[2]||(a[2]=e=>t.$emit("toggle-games")),class:"bg-gradient-to-r from-purple-400 to-pink-400 hover:from-pink-400 hover:to-purple-400 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 md:px-4 md:py-2 text-xs md:text-sm shadow-xl shadow-purple-400/70 transition-all transform hover:scale-110 whitespace-nowrap"}," 🎮 Games "),h("button",{onClick:a[3]||(a[3]=e=>t.$emit("toggle-history")),class:"bg-gradient-to-r from-indigo-400 to-blue-400 hover:from-blue-400 hover:to-indigo-400 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 md:px-4 md:py-2 text-xs md:text-sm shadow-xl shadow-indigo-400/70 transition-all transform hover:scale-110 whitespace-nowrap"}," 📞 History "),h("button",{onClick:a[4]||(a[4]=e=>t.$emit("toggle-donation")),class:"bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-orange-400 hover:to-yellow-400 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 md:px-4 md:py-2 text-xs md:text-sm shadow-xl shadow-yellow-400/70 transition-all animate-pulse transform hover:scale-110 whitespace-nowrap"}," ❤️ Support ")])]))}}),Ts={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Es={class:"bg-gray-900 rounded-lg w-full max-w-md mx-auto h-[80vh] flex flex-col"},Is={class:"flex items-center justify-between p-4 border-b border-gray-700"},As={key:0,class:"h-full flex items-center justify-center text-gray-500"},Rs={key:1,class:"space-y-2"},Bs={class:"flex justify-between gap-2"},Ps={class:"text-xs text-gray-400"},Ms={class:"mt-1 text-white break-words"},Os={class:"p-3 border-t border-gray-700"},js=["disabled"],Ds=["disabled"],Ls=o({__name:"chat-modal",props:{isOpen:{type:Boolean,default:!1},isConnected:{type:Boolean,default:!1},messages:{type:Array,default:()=>[]}},emits:["close","send-message"],setup(e,{emit:t}){const r=e,s=t,o=a(""),i=a(null),u=()=>{o.value.trim()&&r.isConnected&&(s("send-message",o.value),o.value="")},d=async()=>{await T(),i.value&&(i.value.scrollTop=i.value.scrollHeight)};return m(()=>r.messages,()=>{d()},{deep:!0}),m(()=>r.isOpen,e=>{e&&d()}),n(()=>{r.isOpen&&d()}),(t,a)=>e.isOpen?(c(),l("div",Ts,[h("div",Es,[h("div",Is,[a[2]||(a[2]=h("div",{class:"flex items-center"},[h("span",{class:"text-white text-lg font-medium"},"💬 Chat")],-1)),h("button",{onClick:a[0]||(a[0]=e=>t.$emit("close")),class:"text-gray-400 hover:text-white"}," ✕ ")]),h("div",{class:"flex-1 p-4 overflow-y-auto",ref_key:"messagesContainerRef",ref:i},[0===e.messages.length?(c(),l("div",As,a[3]||(a[3]=[h("div",{class:"text-center"},[h("p",null,"No messages yet"),h("p",{class:"text-sm mt-1"},"Send a message to start the conversation")],-1)]))):(c(),l("div",Rs,[(c(!0),l(w,null,k(e.messages,e=>{return c(),l("div",{key:e.id,class:y(["rounded-lg p-3 max-w-[80%]",e.isOwn?"bg-blue-700 ml-auto":"bg-gray-700 mr-auto"])},[h("div",Bs,[h("span",{class:y(["text-sm",e.isOwn?"text-blue-200":"text-gray-200"])},b(e.isOwn?"You":"Partner"),3),h("span",Ps,b((t=e.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1)]),h("p",Ms,b(e.text||e.message),1)],2);var t}),128))]))],512),h("div",Os,[h("form",{onSubmit:S(u,["prevent"]),class:"flex gap-2"},[_(h("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),type:"text",placeholder:"Type a message...",class:"flex-1 bg-gray-800 border border-gray-700 rounded-md p-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!e.isConnected},null,8,js),[[C,o.value]]),h("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:!e.isConnected||!o.value.trim()}," Send ",8,Ds)],32)])])])):x("",!0)}});class Us{static addWinEffect(e,t=2e3){e.classList.add("win-effect"),setTimeout(()=>{e.classList.remove("win-effect")},t)}static addLoseEffect(e,t=1e3){e.classList.add("lose-effect"),setTimeout(()=>{e.classList.remove("lose-effect")},t)}static addDrawEffect(e,t=1500){e.classList.add("draw-effect"),setTimeout(()=>{e.classList.remove("draw-effect")},t)}static addPulseEffect(e,t="rgba(139, 92, 246, 0.5)",a=1e3){const n=e.style.border,r=e.style.boxShadow;e.style.border=`2px solid ${t}`,e.style.boxShadow=`0 0 10px ${t}`,e.style.transition="all 0.3s ease",setTimeout(()=>{e.style.border=n,e.style.boxShadow=r},a)}static addMoveEffect(e,t,a=10,n=300){const r=e.style.position,s=e.style.transform;"relative"!==r&&"absolute"!==r&&(e.style.position="relative");let o="";switch(t){case"up":o=`translateY(-${a}px)`;break;case"down":o=`translateY(${a}px)`;break;case"left":o=`translateX(-${a}px)`;break;case"right":o=`translateX(${a}px)`}e.style.transform=o,e.style.transition=`transform ${n}ms ease`,setTimeout(()=>{e.style.transform=s},n)}}const Fs=new class{constructor(e=[]){t(this,"sounds",new Map),t(this,"isMuted",!1),t(this,"defaultVolume",.5),t(this,"soundPaths",{click:"/sounds/click.mp3",win:"/sounds/win.mp3",lose:"/sounds/lose.mp3",draw:"/sounds/draw.mp3",move:"/sounds/move.mp3",notification:"/sounds/notification.mp3",countdown:"/sounds/countdown.mp3",gameStart:"/sounds/game-start.mp3",gameOver:"/sounds/game-over.mp3",correct:"/sounds/correct.mp3",incorrect:"/sounds/incorrect.mp3",button:"/sounds/button.mp3"}),e.length>0&&e.forEach(e=>{e in this.soundPaths&&this.preloadSound(e)});const a=localStorage.getItem("gameSoundMuted");a&&(this.isMuted="true"===a);const n=localStorage.getItem("gameSoundVolume");n&&(this.defaultVolume=parseFloat(n))}preloadSound(e){if(this.soundPaths[e]){const t=new Audio(this.soundPaths[e]);t.preload="auto",this.sounds.set(e,t)}}playSound(e,t={}){if(this.isMuted)return;this.sounds.has(e)||this.preloadSound(e);const a=this.sounds.get(e);a&&(a.pause(),a.currentTime=0,a.volume=void 0!==t.volume?t.volume:this.defaultVolume,a.loop=t.loop||!1,a.play().catch(e=>{}))}toggleMute(){return this.isMuted=!this.isMuted,localStorage.setItem("gameSoundMuted",this.isMuted.toString()),this.isMuted&&this.stopAllSounds(),this.isMuted}isSoundMuted(){return this.isMuted}setVolume(e){this.defaultVolume=Math.max(0,Math.min(1,e)),localStorage.setItem("gameSoundVolume",this.defaultVolume.toString())}stopAllSounds(){this.sounds.forEach(e=>{e.pause(),e.currentTime=0})}stopSound(e){const t=this.sounds.get(e);t&&(t.pause(),t.currentTime=0)}}(["click","win","lose","move","notification"]),zs={class:"w-full p-2"},Ns={class:"flex justify-between items-center mb-4"},Hs={key:0,class:"text-yellow-300 animate-pulse flex items-center"},$s={key:1,class:"flex items-center"},qs={key:2,class:"flex items-center"},Gs={class:"bg-gray-800/60 backdrop-blur-sm rounded-lg p-4 md:p-6 mb-4 border border-gray-700/50 shadow-xl"},Ws={class:"mb-4 w-full"},Ys={class:"flex items-center justify-between gap-4 mb-2"},Ks={class:"flex items-center"},Vs={class:"text-center ml-2"},Xs={key:0,class:"flex items-center"},Js={class:"flex items-center justify-center p-1 bg-gray-700/50 rounded-lg"},Zs={class:"ml-2 text-sm text-gray-300"},Qs={class:"flex items-center"},eo={class:"text-center mr-2"},to={key:0,class:"bg-gray-700/40 rounded-lg p-2 text-sm text-gray-300 mb-3"},ao={class:"flex justify-between mb-1"},no={class:"flex justify-between mb-1"},ro={class:"flex justify-between"},so={class:"grid grid-cols-3 gap-3 mb-4"},oo=["onClick","disabled"],lo={key:0,class:"text-blue-400"},io={key:1,class:"text-green-400"},uo={key:0,class:"text-center mt-4 animate__animated animate__fadeIn"},co={key:1,class:"text-center mt-4 animate__animated animate__fadeIn"},vo={key:2,class:"text-center mt-4 w-full"},mo={class:"bg-yellow-600/20 rounded-lg p-4 border border-yellow-500/30 shadow-lg animate-pulse"},po={class:"text-sm text-gray-300 mt-2"},fo={class:"font-bold text-blue-400"},go={key:0,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50"},ho={class:"bg-gray-800 p-4 rounded-lg max-w-xs w-full text-center"},yo={class:"flex justify-center gap-3"},bo=o({__name:"TicTacToe",props:{partnerId:{type:String,required:!0},isFirstPlayer:{type:Boolean,default:!0},partnerReady:{type:Boolean,default:!1}},emits:["back","error"],setup(e,{emit:t}){const s=e,o=t,{socket:i}=W(),u=a("waiting"),d=a(["","","","","","","","",""]),v=a(s.isFirstPlayer?"X":"O"),m=a(s.isFirstPlayer?"O":"X"),f=a("X"),g=a(null),S=a(null),_=a(Date.now()),C=a([]),T=a([]);a(Fs.isSoundMuted());const A=a(!1),R=a({moves:0,movesByPlayer:{},gameTime:0,gameStartTime:Date.now()}),B=p(()=>f.value===v.value),P=e=>{const t=e%60;return`${Math.floor(e/60)}:${t<10?"0":""}${t}`},M=()=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const t of e){const[e,a,n]=t;if(""!==d.value[e]&&d.value[e]===d.value[a]&&d.value[e]===d.value[n])return u.value="finished",g.value=d.value[e],C.value=t,setTimeout(()=>{t.forEach(e=>{T.value[e]&&Us.addWinEffect(T.value[e])})},100),g.value===v.value?Fs.playSound("win"):Fs.playSound("lose"),!0}return!!d.value.every(e=>""!==e)&&(u.value="finished",g.value="tie",Fs.playSound("draw"),!0)},O=()=>{S.value&&clearTimeout(S.value),S.value=window.setTimeout(()=>{var e;"playing"===u.value&&null===g.value&&(null==(e=i.value)||e.emit("game-ping",{to:s.partnerId,gameType:"tic-tac-toe"}),setTimeout(()=>{"playing"===u.value&&null===g.value&&j()},5e3))},6e4)},j=()=>{"playing"===u.value&&(u.value="finished",L("Lost connection with your partner. The game has ended."),Fs.playSound("notification"))},D=()=>{var e;try{Fs.playSound("click"),d.value=["","","","","","","","",""],g.value=null,u.value="playing",C.value=[];const t=v.value;v.value=m.value,m.value=t,f.value="X",null==(e=i.value)||e.emit("game-reset",{gameType:"tic-tac-toe",to:s.partnerId,swapRoles:!0}),O()}catch(t){L("Failed to reset the game. Please try again.")}},L=e=>{o("error",e)},U=e=>{var t,a,n;if(e.board&&(d.value=e.board.map(e=>null===e?"":e)),e.currentSymbol?f.value=e.currentSymbol:e.currentTurn&&e.marks&&(f.value=e.marks[e.currentTurn]||"X"),e.playerSymbols){const a=null==(t=i.value)?void 0:t.id,n=s.partnerId;a&&e.playerSymbols[a]&&(v.value=e.playerSymbols[a],m.value=e.playerSymbols[n])}else if(e.marks){const t=(null==(a=i.value)?void 0:a.id)||"";v.value=e.marks[t]||"X";const n=Object.keys(e.marks).filter(e=>e!==t);n.length>0&&(m.value=e.marks[n[0]]||"O")}if(e.gameOver)if(u.value="finished",e.winner){const t=(null==(n=i.value)?void 0:n.id)||"";e.winner===t?(g.value=v.value,Fs.playSound("win")):(g.value=m.value,Fs.playSound("lose"))}else e.isDraw&&(g.value="tie",Fs.playSound("draw"));else u.value="playing";e.winningLine&&(C.value=e.winningLine,C.value.length>0&&setTimeout(()=>{C.value.forEach(e=>{T.value[e]&&Us.addWinEffect(T.value[e])})},100)),e.stats&&(R.value=e.stats),e.gameOver||M()};n(()=>{i.value?(i.value.on("game-move",e=>{if("tic-tac-toe"===e.gameType&&e.from===s.partnerId)try{if(e.gameState)return U(e.gameState),Fs.playSound("move"),void O();let t=-1;if("object"==typeof e.move&&null!==e.move?"number"==typeof e.move.index?t=e.move.index:"number"==typeof e.move.row&&"number"==typeof e.move.col&&(t=3*e.move.row+e.move.col):"number"==typeof e.move&&(t=e.move),t<0||t>=9)return void L("Received invalid move from partner");d.value[t]=m.value,f.value=v.value,_.value=Date.now(),Fs.playSound("move"),T.value[t]&&Us.addPulseEffect(T.value[t],"X"===m.value?"rgba(59, 130, 246, 0.5)":"rgba(16, 185, 129, 0.5)"),M(),O()}catch(t){L("Error processing partner's move")}}),i.value.on("game-reset",e=>{if("tic-tac-toe"===e.gameType&&e.from===s.partnerId)try{if(e.gameState)return U(e.gameState),Fs.playSound("gameStart"),void O();if(d.value=["","","","","","","","",""],g.value=null,u.value="playing",C.value=[],e.swapRoles){const e=v.value;v.value=m.value,m.value=e}f.value="X",Fs.playSound("gameStart"),O()}catch(t){L("Error resetting the game")}}),i.value.on("game-state",e=>{if("tic-tac-toe"===e.gameType)try{U(e)}catch(t){L("Error updating game state")}}),i.value.on("game-ping",e=>{var t;e.from===s.partnerId&&(null==(t=i.value)||t.emit("game-pong",{to:s.partnerId,gameType:"tic-tac-toe"}),_.value=Date.now())}),i.value.on("game-pong",e=>{e.from===s.partnerId&&(_.value=Date.now())}),i.value.on("game-notification",e=>{e.from===s.partnerId&&e.type}),i.value.on("game-partner-joined",e=>{e.from===s.partnerId&&(u.value="playing",Fs.playSound("gameStart"),O())}),i.value.on("game-partner-left",e=>{if(e.from===s.partnerId){u.value="waiting";const e=document.createElement("div");e.className="fixed inset-0 bg-black/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-lg",e.innerHTML='\n        <div class="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center text-3xl mb-4">😢</div>\n        <h3 class="text-lg font-medium text-white mb-2">Partner Left</h3>\n        <p class="text-sm text-gray-300 text-center max-w-xs">\n          Your partner has left the game.<br>\n          Returning to game menu...\n        </p>\n      ';const t=document.querySelector(".game-board")||document.body;t.appendChild(e),setTimeout(()=>{t.removeChild(e),o("back")},2e3)}}),s.isFirstPlayer||(u.value="playing",Fs.playSound("gameStart"),O())):L("Socket connection not available")}),r(()=>{i.value&&(i.value.off("game-move"),i.value.off("game-reset"),i.value.off("game-partner-joined"),i.value.off("game-partner-left"),i.value.off("game-state"),i.value.off("game-notification"),i.value.off("game-ping"),i.value.off("game-pong"),s.partnerId&&(i.value.emit("game-notification",{to:s.partnerId,message:"Your partner has left the game",type:"leave"}),setTimeout(()=>{var e;null==(e=i.value)||e.emit("game-leave-room",{roomId:`tictactoe-${s.partnerId}`,to:s.partnerId})},200))),S.value&&(clearTimeout(S.value),S.value=null)});const F=a(!1),z=()=>{F.value=!1,i.value&&s.partnerId?(i.value.emit("game-notification",{to:s.partnerId,message:"Your partner has left the game",type:"leave"}),setTimeout(()=>{var e;null==(e=i.value)||e.emit("game-leave-room",{roomId:`tictactoe-${s.partnerId}`,to:s.partnerId}),o("back")},200)):o("back")},N=()=>{Fs.playSound("click"),F.value=!0};return(e,t)=>(c(),l(w,null,[h("div",zs,[h("div",Ns,[t[4]||(t[4]=h("h2",{class:"text-xl font-bold text-purple-400"},[h("span",{class:"hidden sm:inline"},"Tic Tac Toe"),h("span",{class:"sm:hidden"},"TicTacToe")],-1)),h("div",{class:y(["text-white text-sm px-3 py-1 rounded-full backdrop-blur-sm shadow-lg",{"bg-yellow-600/40 border border-yellow-500/30":"waiting"===u.value,"bg-green-600/40 border border-green-500/30":B.value&&"playing"===u.value,"bg-blue-600/40 border border-blue-500/30":!B.value&&"playing"===u.value,"bg-purple-600/40 border border-purple-500/30":g.value}])},["waiting"===u.value?(c(),l("span",Hs,t[2]||(t[2]=[h("span",{class:"inline-block w-2 h-2 bg-yellow-400 rounded-full mr-2 animate-ping"},null,-1),E(" Waiting... ")]))):g.value?(c(),l("span",$s,[t[3]||(t[3]=h("span",{class:"inline-block w-2 h-2 bg-purple-400 rounded-full mr-2"},null,-1)),E(" "+b(g.value===v.value?"You Won! 🎉":"tie"===g.value?"It's a Tie! 🤝":"You Lost! 😢"),1)])):(c(),l("span",qs,[h("span",{class:y(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-400":B.value,"bg-blue-400":!B.value}])},null,2),E(" "+b(B.value?"Your Turn":"Partner's Turn"),1)]))],2)]),h("div",Gs,[h("div",{class:y(["flex flex-col items-center",{"opacity-70":"waiting"===u.value}])},[h("div",Ws,[h("div",Ys,[h("div",Ks,[h("div",{class:y([{"ring-2 ring-purple-500 ring-offset-2 ring-offset-gray-800":"X"===v.value},"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-lg font-bold"])}," X ",2),h("div",Vs,[t[5]||(t[5]=h("p",{class:"text-gray-300 text-sm"},"You",-1)),h("p",{class:y(["font-bold text-lg",{"text-blue-400":"X"===v.value,"text-green-400":"O"===v.value}])},b(v.value),3)])]),"playing"===u.value?(c(),l("div",Xs,[h("div",Js,[h("div",{class:y(["w-2 h-2 rounded-full",{"bg-green-400 animate-pulse":B.value,"bg-red-400":!B.value}])},null,2),h("span",Zs,b(B.value?"Your Turn":"Partner's Turn"),1)])])):x("",!0),h("div",Qs,[h("div",eo,[t[6]||(t[6]=h("p",{class:"text-gray-300 text-sm"},"Partner",-1)),h("p",{class:y(["font-bold text-lg",{"text-blue-400":"X"===m.value,"text-green-400":"O"===m.value}])},b(m.value),3)]),h("div",{class:y([{"ring-2 ring-purple-500 ring-offset-2 ring-offset-gray-800":"O"===v.value},"w-10 h-10 rounded-full bg-green-600 flex items-center justify-center text-lg font-bold"])}," O ",2)])]),A.value?(c(),l("div",to,[h("div",ao,[t[7]||(t[7]=h("span",null,"Moves:",-1)),h("span",null,b(R.value.moves),1)]),h("div",no,[t[8]||(t[8]=h("span",null,"Your Moves:",-1)),h("span",null,b(R.value.movesByPlayer[s.partnerId]||0),1)]),h("div",ro,[t[9]||(t[9]=h("span",null,"Game Time:",-1)),h("span",null,b(P(R.value.gameTime)),1)])])):x("",!0),h("button",{onClick:t[0]||(t[0]=e=>A.value=!A.value),class:"w-full text-xs bg-gray-700/30 hover:bg-gray-700/50 py-1 rounded-lg transition-colors text-gray-400"},b(A.value?"Hide Stats":"Show Stats"),1)]),h("div",so,[(c(!0),l(w,null,k(d.value,(e,t)=>(c(),l("button",{key:t,onClick:e=>(e=>{var t;if("playing"===u.value&&""===d.value[e]&&B.value&&null===g.value)try{Fs.playSound("move"),d.value[e]=v.value,f.value=m.value,_.value=Date.now(),T.value[e]&&Us.addPulseEffect(T.value[e],"X"===v.value?"rgba(59, 130, 246, 0.5)":"rgba(16, 185, 129, 0.5)");const a={index:e};null==(t=i.value)||t.emit("game-move",{gameType:"tic-tac-toe",move:a,to:s.partnerId}),M(),O()}catch(a){L("Failed to make a move. Please try again.")}})(t),disabled:""!==e||!B.value||null!==g.value||"waiting"===u.value,ref_for:!0,ref:e=>{e&&(T.value[t]=e)},class:y(["w-20 h-20 rounded-lg flex items-center justify-center text-3xl font-bold transition-all duration-300 game-cell game-transition",{"game-interactive bg-gray-700 hover:bg-gray-600":""===e&&B.value&&!g.value&&"waiting"!==u.value,"bg-gray-700/50":""===e&&(!B.value||null!==g.value||"waiting"===u.value),"bg-blue-600/20":"X"===e,"bg-green-600/20":"O"===e,"cursor-not-allowed":""!==e||!B.value||null!==g.value||"waiting"===u.value,"hover:bg-purple-700/50":B.value&&""===e&&!g.value&&"playing"===u.value,"win-effect":C.value.includes(t)}])},["X"===e?(c(),l("span",lo,"X")):"O"===e?(c(),l("span",io,"O")):x("",!0)],10,oo))),128))]),g.value?(c(),l("div",uo,[h("button",{onClick:D,class:"game-button bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg text-sm transition-colors mb-2 game-interactive"}," Play Again "),t[10]||(t[10]=h("p",{class:"text-sm text-gray-400 mt-1"}," In the next round, symbols (X/O) will be swapped ",-1))])):"finished"===u.value?(c(),l("div",co,[h("button",{onClick:D,class:"game-button bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg text-sm transition-colors mb-2 game-interactive"}," Play Again "),t[11]||(t[11]=h("p",{class:"text-sm text-gray-400 mt-1"}," In the next round, symbols (X/O) will be swapped ",-1))])):x("",!0),"waiting"===u.value?(c(),l("div",vo,[h("div",mo,[t[13]||(t[13]=I('<div class="w-16 h-16 mx-auto mb-3 relative" data-v-34523196><div class="absolute inset-0 bg-yellow-500/20 rounded-full animate-ping" data-v-34523196></div><div class="absolute inset-2 bg-yellow-500/30 rounded-full animate-ping animation-delay-300" data-v-34523196></div><div class="absolute inset-4 bg-yellow-500/40 rounded-full animate-ping animation-delay-600" data-v-34523196></div><div class="absolute inset-0 flex items-center justify-center" data-v-34523196><span class="text-2xl" data-v-34523196>👥</span></div></div><p class="text-yellow-300 mb-1 font-medium" data-v-34523196>Waiting for your partner to join...</p><p class="text-sm text-gray-300" data-v-34523196>Game will start automatically</p>',3)),h("p",po,[t[12]||(t[12]=E(" You'll play as ")),h("span",fo,b(v.value),1)])])])):x("",!0)],2)]),h("div",{class:"flex justify-between mb-4"},[h("button",{onClick:N,class:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-md hover:shadow-lg transform hover:scale-105 active:scale-95"}," Back to Games ")])]),F.value?(c(),l("div",go,[h("div",ho,[t[14]||(t[14]=h("h3",{class:"text-lg font-semibold mb-3 text-white"},"Are you sure?",-1)),t[15]||(t[15]=h("p",{class:"text-sm text-gray-300 mb-4"}," Leaving the game will end it for your partner too. ",-1)),h("div",yo,[h("button",{onClick:t[1]||(t[1]=e=>F.value=!1),class:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm"}," Cancel "),h("button",{onClick:z,class:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm"}," Leave ")])])])):x("",!0)],64))}}),xo=ps(bo,[["__scopeId","data-v-34523196"]]),wo={class:"w-full p-2"},ko={class:"flex justify-between items-center mb-4"},So={key:0,class:"text-yellow-300 animate-pulse flex items-center"},_o={key:1,class:"flex items-center"},Co={key:2,class:"flex items-center"},To={key:3,class:"flex items-center"},Eo={class:"bg-gray-800/60 backdrop-blur-sm rounded-lg p-4 md:p-6 mb-4 border border-gray-700/50 shadow-xl"},Io={class:"flex justify-center items-center gap-4 md:gap-8 mb-6 w-full"},Ao={class:"text-center p-2 bg-blue-900/20 rounded-lg backdrop-blur-sm border border-blue-800/30 min-w-[70px]"},Ro={class:"text-2xl font-bold text-blue-400"},Bo={class:"text-center px-4 py-2 bg-gray-700/50 rounded-lg border border-gray-600/30"},Po={class:"text-xl font-bold text-white"},Mo={class:"text-center p-2 bg-green-900/20 rounded-lg backdrop-blur-sm border border-green-800/30 min-w-[70px]"},Oo={class:"text-2xl font-bold text-green-400"},jo={class:"w-full mb-4"},Do={key:0,class:"flex flex-col items-center mb-6 animate__animated animate__fadeIn"},Lo={class:"flex justify-center items-center gap-6 md:gap-10 mb-6"},Uo={class:"text-center"},Fo={class:"text-center"},zo={key:1,class:"animate__animated animate__fadeIn"},No={class:"text-center mb-6"},Ho={class:"inline-block px-3 py-1 rounded-full bg-gray-700/70 text-sm text-gray-300 mb-2"},$o={class:"flex justify-center items-center gap-3 md:gap-6"},qo=["onClick"],Go={class:"text-4xl mb-2"},Wo={class:"text-xs text-gray-300"},Yo={key:2,class:"text-center"},Ko={key:3,class:"text-center"},Vo={key:0,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50"},Xo={class:"bg-gray-800 p-4 rounded-lg max-w-xs w-full text-center"},Jo={class:"flex justify-center gap-3"},Zo=o({__name:"RockPaperScissors",props:{partnerId:{type:String,required:!0},partnerReady:{type:Boolean,default:!1}},emits:["back","error"],setup(e,{emit:t}){const s=e,o=t,{socket:i}=W(),u=[{value:"rock",name:"Rock",emoji:"👊"},{value:"paper",name:"Paper",emoji:"✋"},{value:"scissors",name:"Scissors",emoji:"✌️"}],d=a("waiting"),v=a(null),m=a(null),f=a(0),g=a(0),S=a(1),_=a(null),C=a(10),T=a(null),A=a(!1),R=p(()=>"win"===_.value?"You Win!":"lose"===_.value?"You Lose!":"tie"===_.value?"It's a Tie!":""),B=e=>{if(!e)return"❓";const t=u.find(t=>t.value===e);return t?t.emoji:"❓"},P=()=>{var e;d.value="choosing",v.value=null,m.value=null,_.value=null,D(),null==(e=i.value)||e.emit("game-start-round",{gameType:"rock-paper-scissors",to:s.partnerId,round:S.value})},M=e=>{var t;v.value=e,null==(t=i.value)||t.emit("game-move",{gameType:"rock-paper-scissors",move:{choice:e,round:S.value},to:s.partnerId}),m.value&&O()},O=()=>{v.value&&m.value&&(L(),d.value="result",v.value===m.value?_.value="tie":"rock"===v.value&&"scissors"===m.value||"paper"===v.value&&"rock"===m.value||"scissors"===v.value&&"paper"===m.value?(_.value="win",f.value++):(_.value="lose",g.value++),S.value++)},j=()=>{P()},D=()=>{C.value=10,T.value&&clearInterval(T.value),T.value=window.setInterval(()=>{if(C.value--,C.value<=0&&(L(),!v.value)){const e=Math.floor(Math.random()*u.length);M(u[e].value)}},1e3)},L=()=>{T.value&&(clearInterval(T.value),T.value=null)},U=()=>{A.value=!0},F=()=>{A.value=!1,i.value&&s.partnerId?(i.value.emit("game-notification",{to:s.partnerId,message:"Your partner has left the game",type:"leave"}),setTimeout(()=>{var e;null==(e=i.value)||e.emit("game-leave-room",{roomId:`rps-${s.partnerId}`,to:s.partnerId}),o("back")},200)):o("back")};return n(()=>{var e,t,a,n,r;s.partnerReady&&(d.value="ready"),null==(e=i.value)||e.on("game-move",e=>{if(e.from===s.partnerId&&"rock-paper-scissors"===e.gameType){let t=null;if("string"==typeof e.move?t=e.move:"object"==typeof e.move&&null!==e.move&&(t=e.move.choice),!t||!["rock","paper","scissors"].includes(t))return;m.value=t,v.value&&O()}}),null==(t=i.value)||t.on("game-start-round",e=>{e.from===s.partnerId&&"rock-paper-scissors"===e.gameType&&(d.value="choosing",v.value=null,m.value=null,_.value=null,S.value=e.round,D())}),null==(a=i.value)||a.on("game-partner-joined",e=>{e.from===s.partnerId&&(d.value="ready")}),null==(n=i.value)||n.on("game-partner-left",e=>{if(e.from===s.partnerId){L(),d.value="waiting";const e=document.createElement("div");e.className="fixed inset-0 bg-black/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-lg",e.innerHTML='\n        <div class="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center text-3xl mb-4">😢</div>\n        <h3 class="text-lg font-medium text-white mb-2">Partner Left</h3>\n        <p class="text-sm text-gray-300 text-center max-w-xs">\n          Your partner has left the game.<br>\n          Returning to game menu...\n        </p>\n      ';const t=document.querySelector(".game-board")||document.body;t.appendChild(e),setTimeout(()=>{t.removeChild(e),o("back")},2e3)}}),null==(r=i.value)||r.on("game-reset",e=>{e.from===s.partnerId&&"rock-paper-scissors"===e.gameType&&(f.value=0,g.value=0,S.value=1,d.value="ready")})}),r(()=>{var e,t,a,n,r;L(),i.value&&s.partnerId&&(i.value.emit("game-notification",{to:s.partnerId,message:"Your partner has left the game",type:"leave"}),setTimeout(()=>{var e;null==(e=i.value)||e.emit("game-leave-room",{roomId:`rps-${s.partnerId}`,to:s.partnerId})},200)),null==(e=i.value)||e.off("game-move"),null==(t=i.value)||t.off("game-start-round"),null==(a=i.value)||a.off("game-partner-joined"),null==(n=i.value)||n.off("game-partner-left"),null==(r=i.value)||r.off("game-reset")}),(e,t)=>(c(),l(w,null,[h("div",wo,[h("div",ko,[t[5]||(t[5]=h("h2",{class:"text-xl font-bold text-purple-400"},[h("span",{class:"hidden sm:inline"},"Rock Paper Scissors"),h("span",{class:"sm:hidden"},"RPS Game")],-1)),h("div",{class:y(["text-white text-sm px-3 py-1 rounded-full backdrop-blur-sm shadow-lg",{"bg-yellow-600/40 border border-yellow-500/30":"waiting"===d.value,"bg-green-600/40 border border-green-500/30":"ready"===d.value,"bg-blue-600/40 border border-blue-500/30":"choosing"===d.value,"bg-purple-600/40 border border-purple-500/30":"result"===d.value}])},["waiting"===d.value?(c(),l("span",So,t[1]||(t[1]=[h("span",{class:"inline-block w-2 h-2 bg-yellow-400 rounded-full mr-2 animate-ping"},null,-1),E(" Waiting... ")]))):"ready"===d.value?(c(),l("span",_o,t[2]||(t[2]=[h("span",{class:"inline-block w-2 h-2 bg-green-400 rounded-full mr-2"},null,-1),E(" Ready! ")]))):"choosing"===d.value?(c(),l("span",Co,t[3]||(t[3]=[h("span",{class:"inline-block w-2 h-2 bg-blue-400 rounded-full mr-2"},null,-1),E(" Choose ")]))):"result"===d.value?(c(),l("span",To,[t[4]||(t[4]=h("span",{class:"inline-block w-2 h-2 bg-purple-400 rounded-full mr-2"},null,-1)),E(" "+b(R.value),1)])):x("",!0)],2)]),h("div",Eo,[h("div",{class:y(["flex flex-col items-center",{"opacity-70":"waiting"===d.value}])},[h("div",Io,[h("div",Ao,[t[6]||(t[6]=h("div",{class:"text-sm text-gray-300 mb-1"},"You",-1)),h("div",Ro,b(f.value),1)]),h("div",Bo,[t[7]||(t[7]=h("div",{class:"text-sm text-gray-300"},"Round",-1)),h("div",Po,b(S.value),1)]),h("div",Mo,[t[8]||(t[8]=h("div",{class:"text-sm text-gray-300 mb-1"},"Partner",-1)),h("div",Oo,b(g.value),1)])]),h("div",jo,["result"===d.value?(c(),l("div",Do,[h("div",Lo,[h("div",Uo,[h("div",{class:y(["w-20 h-20 md:w-24 md:h-24 bg-blue-500/20 rounded-full flex items-center justify-center text-4xl md:text-5xl mb-2 shadow-lg border border-blue-400/30 transform transition-all",{"scale-110 ring-2 ring-blue-400 ring-opacity-50":"win"===_.value}])},b(B(v.value)),3),t[9]||(t[9]=h("div",{class:"text-sm text-blue-400"},"You",-1))]),t[11]||(t[11]=h("div",{class:"text-2xl font-bold text-white bg-gray-700/50 rounded-full h-10 w-10 flex items-center justify-center"},"VS",-1)),h("div",Fo,[h("div",{class:y(["w-20 h-20 md:w-24 md:h-24 bg-green-500/20 rounded-full flex items-center justify-center text-4xl md:text-5xl mb-2 shadow-lg border border-green-400/30 transform transition-all",{"scale-110 ring-2 ring-green-400 ring-opacity-50":"lose"===_.value}])},b(B(m.value)),3),t[10]||(t[10]=h("div",{class:"text-sm text-green-400"},"Partner",-1))])]),h("div",{class:y(["text-xl font-bold mb-4 py-2 px-4 rounded-lg",{"bg-yellow-500/10 text-yellow-400 border border-yellow-500/30":"tie"===_.value,"bg-green-500/10 text-green-400 border border-green-500/30":"win"===_.value,"bg-red-500/10 text-red-400 border border-red-500/30":"lose"===_.value}])},b(R.value),3),h("button",{onClick:j,class:"mt-2 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95"}," Play Again ")])):"choosing"===d.value?(c(),l("div",zo,[h("div",No,[t[13]||(t[13]=h("p",{class:"text-lg text-white mb-1"},"Choose your move:",-1)),h("div",Ho,[t[12]||(t[12]=E(" Time: ")),h("span",{class:y(["font-mono text-white",{"text-red-400":C.value<=3}])},b(C.value)+"s",3)])]),h("div",$o,[(c(),l(w,null,k(u,e=>h("button",{key:e.value,onClick:t=>M(e.value),class:y(["w-[90px] h-[90px] md:w-24 md:h-24 rounded-lg flex flex-col items-center justify-center transition-all shadow-lg hover:shadow-xl",{"bg-blue-600/30 border border-blue-500/30 scale-105":v.value===e.value,"bg-gray-800/80 border border-gray-700/50 hover:bg-gray-700/70 hover:scale-105 active:scale-95":v.value!==e.value}])},[h("span",Go,b(e.emoji),1),h("span",Wo,b(e.name),1)],10,qo)),64))])])):"waiting"===d.value?(c(),l("div",Yo,t[14]||(t[14]=[I('<div class="bg-yellow-600/20 rounded-lg p-4 border border-yellow-500/30 shadow-lg animate-pulse" data-v-f393f0a9><div class="w-16 h-16 mx-auto mb-3 relative" data-v-f393f0a9><div class="absolute inset-0 bg-yellow-500/20 rounded-full animate-ping" data-v-f393f0a9></div><div class="absolute inset-2 bg-yellow-500/30 rounded-full animate-ping animation-delay-300" data-v-f393f0a9></div><div class="absolute inset-4 bg-yellow-500/40 rounded-full animate-ping animation-delay-600" data-v-f393f0a9></div><div class="absolute inset-0 flex items-center justify-center" data-v-f393f0a9><span class="text-2xl" data-v-f393f0a9>👥</span></div></div><p class="text-yellow-300 mb-1 font-medium" data-v-f393f0a9>Waiting for your partner to join...</p><p class="text-sm text-gray-300" data-v-f393f0a9>Game will start automatically</p></div>',1)]))):"ready"===d.value?(c(),l("div",Ko,[t[15]||(t[15]=I('<div class="bg-green-600/20 rounded-lg p-4 border border-green-500/30 shadow-lg mb-4" data-v-f393f0a9><div class="w-16 h-16 mx-auto mb-3 flex items-center justify-center bg-green-500/30 rounded-full" data-v-f393f0a9><span class="text-2xl" data-v-f393f0a9>🎮</span></div><p class="text-lg text-white mb-1" data-v-f393f0a9>Both players are ready!</p><p class="text-sm text-gray-300 mb-4" data-v-f393f0a9>Prepare for an epic battle</p></div>',1)),h("button",{onClick:P,class:"px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95"}," Start Game ")])):x("",!0)])],2)]),h("div",{class:"flex justify-between"},[h("button",{onClick:U,class:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-md hover:shadow-lg transform hover:scale-105 active:scale-95"}," Back to Games ")])]),A.value?(c(),l("div",Vo,[h("div",Xo,[t[16]||(t[16]=h("h3",{class:"text-lg font-semibold mb-3 text-white"},"Are you sure?",-1)),t[17]||(t[17]=h("p",{class:"text-sm text-gray-300 mb-4"}," Leaving the game will end it for your partner too. ",-1)),h("div",Jo,[h("button",{onClick:t[0]||(t[0]=e=>A.value=!1),class:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm"}," Cancel "),h("button",{onClick:F,class:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm"}," Leave ")])])])):x("",!0)],64))}}),Qo=ps(Zo,[["__scopeId","data-v-f393f0a9"]]),el={class:"w-full p-2",dir:"auto"},tl={class:"flex justify-between items-center mb-4"},al={key:0,class:"text-yellow-300 animate-pulse flex items-center"},nl={key:1,class:"flex items-center"},rl={key:2,class:"flex items-center"},sl={key:3,class:"flex items-center"},ol={class:"bg-gray-800/60 backdrop-blur-sm rounded-lg p-4 md:p-6 mb-4 border border-gray-700/50 shadow-xl"},ll={class:"flex justify-center items-center gap-4 md:gap-8 mb-6 w-full"},il={class:"text-center p-2 bg-blue-900/20 rounded-lg backdrop-blur-sm border border-blue-800/30 min-w-[80px]"},ul={class:"text-2xl font-bold text-blue-400"},cl={key:0,class:"text-center px-4 py-2 bg-gray-700/50 rounded-lg border border-gray-600/30"},dl={class:"text-center p-2 bg-green-900/20 rounded-lg backdrop-blur-sm border border-green-800/30 min-w-[80px]"},vl={class:"text-2xl font-bold text-green-400"},ml={class:"text-center p-2 bg-purple-900/20 rounded-lg backdrop-blur-sm border border-purple-800/30 min-w-[80px]"},pl={class:"text-2xl font-bold text-purple-400"},fl={class:"w-full mb-4"},gl={key:0,class:"text-center animate__animated animate__fadeIn"},hl={key:1,class:"animate__animated animate__fadeIn"},yl={class:"bg-gray-700/50 rounded-lg p-4 mb-4"},bl={class:"mb-4"},xl=["dir","disabled"],wl={key:0,class:"text-xs text-red-400 mt-1"},kl={key:1,class:"text-xs text-gray-400 mt-1"},Sl={class:"mb-4"},_l={class:"flex gap-2"},Cl={class:"text-center"},Tl=["disabled"],El={key:2,class:"animate__animated animate__fadeIn"},Il={key:3,class:"animate__animated animate__fadeIn"},Al={class:"mb-6"},Rl={class:"bg-gray-700/50 rounded-lg p-4 shadow-inner mb-4"},Bl={class:"flex justify-between items-center mb-2"},Pl={class:"text-xs text-gray-400"},Ml=["dir"],Ol={class:"mb-4"},jl={class:"flex gap-2"},Dl=["dir","maxlength"],Ll=["disabled"],Ul={key:0,class:"text-xs text-red-400 mt-1"},Fl={key:1,class:"text-xs text-gray-400 mt-1"},zl={class:"bg-gray-700/30 rounded-lg p-3 max-h-28 overflow-y-auto"},Nl={key:0,class:"text-gray-400 italic text-sm"},Hl={class:"text-gray-400 w-5"},$l=["dir"],ql={key:4,class:"animate__animated animate__fadeIn"},Gl={class:"bg-gray-700/50 rounded-lg p-4 mb-4"},Wl={class:"flex justify-between items-center mb-2"},Yl=["dir"],Kl=["dir"],Vl={class:"mt-4 text-sm text-gray-300"},Xl={key:0},Jl={class:"mt-2"},Zl={class:"bg-gray-700/30 rounded-lg p-3 max-h-36 overflow-y-auto"},Ql={key:0,class:"text-gray-400 italic text-sm"},ei={class:"text-gray-400 w-5"},ti=["dir"],ai={key:5,class:"animate__animated animate__fadeIn"},ni={class:"text-center mb-6"},ri={class:"text-3xl"},si={class:"text-gray-300 mb-4"},oi={class:"bg-gray-700/50 rounded-lg p-4 mb-6"},li={class:"grid grid-cols-2 gap-2 text-sm"},ii={class:"text-white font-medium"},ui={class:"text-white font-medium capitalize"},ci={class:"text-white font-medium"},di={class:"text-white font-medium"},vi={key:0,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50"},mi={class:"bg-gray-800 p-4 rounded-lg max-w-xs w-full text-center"},pi={class:"flex justify-center gap-3"},fi=ps(o({__name:"WordGalaxy",props:{partnerId:{type:String,required:!0},partnerReady:{type:Boolean,default:!1}},emits:["back","error"],setup(e,{emit:t}){const s=e,o=t,{socket:i,userId:u}=W(),d=a(""),v=a(""),m=a(!1),f=a("waiting"),g=a(!1),S=a(""),T=a(0),R=a([]),B=a([]),P=a(0),M=a("medium"),O=a(""),j=a([]),D=a(0),L=a(!1),U=a(0),F=a("Watching you set up the game..."),z=a(0),N=a(0),H=a(1),$=a([]),q=a(0),G=a(null),Y=a(!1),K={easy:{attempts:10,time:60,multiplier:1},medium:{attempts:8,time:45,multiplier:1.5},hard:{attempts:6,time:30,multiplier:2}};a(Fs.isSoundMuted());const V=e=>/[\u0600-\u06FF]/.test(e),X=e=>/^[a-zA-Z\u0600-\u06FF]+$/.test(e),J=p(()=>S.value&&V(S.value)?"rtl":"ltr"),Z=()=>{d.value="",S.value.length>0&&S.value.length<3?d.value="The word must be at least 3 letters":S.value.length>0&&!X(S.value)&&(S.value=S.value.replace(/[^a-zA-Z\u0600-\u06FF]/g,""),d.value="Only Arabic or English letters are allowed")},Q=()=>{v.value="",O.value.length>0&&O.value.length!==T.value?v.value=`The word must be ${T.value} letters long`:O.value.length>0&&!X(O.value)&&(O.value=O.value.replace(/[^a-zA-Z\u0600-\u06FF]/g,""),v.value="Only Arabic or English letters are allowed")},ee=p(()=>K[M.value].attempts),te=p(()=>K[M.value].time),ae=p(()=>ee.value-D.value),ne=p(()=>S.value.length>=3&&S.value.length<=15&&X(S.value)&&!d.value),re=()=>{var e;ne.value&&(S.value=S.value.trim(),Fs.playSound("gameStart"),null==(e=i.value)||e.emit("game-word-setup",{gameType:"word-galaxy",to:s.partnerId,wordLength:S.value.length,difficulty:M.value}),f.value="guessing",T.value=S.value.length,se())},se=()=>{R.value=Array(T.value).fill("_"),B.value=[],P.value=0},oe=()=>{G.value&&(clearInterval(G.value),G.value=null)},le=()=>{var e,t;if(!O.value||O.value.length!==T.value)return;if(!X(O.value))return O.value=O.value.replace(/[^a-zA-Z\u0600-\u06FF]/g,""),void(v.value="Only Arabic or English letters are allowed");const a=O.value.trim();v.value="",Fs.playSound("move"),null==(e=i.value)||e.emit("game-move",{gameType:"word-galaxy",move:a,to:s.partnerId}),O.value="",D.value++,D.value>=ee.value&&(f.value="complete",L.value=!1,oe(),Fs.playSound("lose"),null==(t=i.value)||t.emit("game-move",{gameType:"word-galaxy",move:"out-of-attempts",to:s.partnerId}))},ie=()=>{var e,t;if(L.value){if(!g.value){const t=50,a=K[M.value].multiplier,n=5*(ee.value-D.value),r=Math.round(q.value/3),o=Math.round((t+n+r)*a);z.value+=o,null==(e=i.value)||e.emit("game-score-update",{gameType:"word-galaxy",to:s.partnerId,guesserScore:z.value,creatorScore:N.value})}}else if(g.value){const e=30,a=K[M.value].multiplier,n=Math.round(e*a);N.value+=n,null==(t=i.value)||t.emit("game-score-update",{gameType:"word-galaxy",to:s.partnerId,guesserScore:z.value,creatorScore:N.value})}$.value.push({creator:g.value&&!L.value?Math.round(30*K[M.value].multiplier):0,guesser:!g.value&&L.value?Math.round((50+5*(ee.value-D.value)+Math.round(q.value/3))*K[M.value].multiplier):0})},ue=e=>0===e?"bg-red-500/30 text-red-300":e===T.value?"bg-green-500/30 text-green-300":e>=T.value/2?"bg-yellow-500/30 text-yellow-300":"bg-blue-500/30 text-blue-300",ce=()=>{var e;f.value="setup",S.value="",R.value=[],B.value=[],P.value=0,O.value="",j.value=[],D.value=0,L.value=!1,U.value=0,Y.value=!1,H.value++;const t=g.value;g.value=!t,null==(e=i.value)||e.emit("game-reset",{gameType:"word-galaxy",to:s.partnerId,swapRoles:!1,shouldBeCreator:!g.value,roundCount:H.value,guesserScore:z.value,creatorScore:N.value})},de=()=>{m.value=!0,Fs.playSound("button")};n(()=>{var e,t,a,n,r,l,c,d;if(s.partnerReady){if(f.value="setup",1===H.value){const e=u.value||"",t=s.partnerId||"";g.value=e<t}Fs.playSound("gameStart")}null==(e=i.value)||e.on("game-word-setup",e=>{e.from===s.partnerId&&"word-galaxy"===e.gameType&&(T.value=e.wordLength,M.value=e.difficulty,f.value="guessing",g.value=!1,se(),G.value&&clearInterval(G.value),q.value=te.value,Y.value=!0,G.value=window.setInterval(()=>{var e;q.value--,q.value<=0&&(oe(),g.value||(f.value="complete",L.value=!1,null==(e=i.value)||e.emit("game-move",{gameType:"word-galaxy",move:"timeout",to:s.partnerId})))},1e3))}),null==(t=i.value)||t.on("game-score-update",e=>{e.from===s.partnerId&&"word-galaxy"===e.gameType&&(void 0!==e.guesserScore&&(z.value=e.guesserScore),void 0!==e.creatorScore&&(N.value=e.creatorScore))}),null==(a=i.value)||a.on("game-move",e=>{if(e.from===s.partnerId&&"word-galaxy"===e.gameType){const t=e.move;"string"==typeof t&&("timeout"===t?(f.value="complete",L.value=!0,F.value="Ran out of time!",ie()):"out-of-attempts"===t?(f.value="complete",L.value=!0,F.value="Ran out of attempts!",ie()):(e=>{var t;const a=S.value,n=e;let r=0;const o=[...B.value];if(V(a))for(let s=0;s<a.length;s++)n[s]===a[s]&&(r++,o.includes(s)||o.push(s));else for(let s=0;s<a.length;s++)n[s]===a[s]&&(r++,o.includes(s)||o.push(s));if(B.value=o,P.value=o.length,j.value.push({word:n,matches:r}),F.value=`Made guess: "${n}" (${r} matches)`,r<a.length){const e=10*K[M.value].multiplier;N.value+=Math.round(e),r>0?Fs.playSound("correct"):Fs.playSound("incorrect")}else Fs.playSound("win");null==(t=i.value)||t.emit("game-guess-result",{gameType:"word-galaxy",to:s.partnerId,result:{word:a,originalGuess:n,matches:r,revealedPositions:o,isCorrect:r===a.length,creatorEarnedPoints:r<a.length?Math.round(10*K[M.value].multiplier):0}}),r===a.length&&(R.value=a.split(""),P.value=T.value,f.value="complete",L.value=!1,S.value=a,oe(),ie())})(t))}}),null==(n=i.value)||n.on("game-guess-result",e=>{e.from===s.partnerId&&"word-galaxy"===e.gameType&&(e=>{j.value.push({word:e.originalGuess||O.value,matches:e.matches}),e.creatorEarnedPoints&&(N.value+=e.creatorEarnedPoints);for(let t=0;t<T.value;t++)e.revealedPositions.includes(t)&&(R.value[t]=e.word[t]);P.value=e.revealedPositions.length,e.isCorrect?(R.value=e.word.split(""),P.value=T.value,f.value="complete",L.value=!0,S.value=e.word,oe(),Fs.playSound("win"),ie()):e.matches>0?Fs.playSound("correct"):Fs.playSound("incorrect")})(e.result)}),null==(r=i.value)||r.on("game-partner-joined",e=>{if(e.from===s.partnerId&&(f.value="setup",1===H.value)){const e=u.value||"",t=s.partnerId||"";g.value=e<t}}),null==(l=i.value)||l.on("game-partner-left",e=>{if(e.from===s.partnerId){resetLocalGameState(),f.value="waiting";const e=document.createElement("div");e.className="fixed inset-0 bg-black/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-lg",e.innerHTML='\n        <div class="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center text-3xl mb-4">😢</div>\n        <h3 class="text-lg font-medium text-white mb-2">Partner Left</h3>\n        <p class="text-sm text-gray-300 text-center max-w-xs">\n          Your partner has left the game.<br>\n          Returning to game menu...\n        </p>\n      ';const t=document.querySelector(".game-board")||document.body;t.appendChild(e),setTimeout(()=>{t.removeChild(e),o("back")},2e3)}}),null==(c=i.value)||c.on("game-reset",e=>{if(e.from===s.partnerId&&"word-galaxy"===e.gameType&&(f.value="setup",S.value="",R.value=[],B.value=[],P.value=0,O.value="",j.value=[],D.value=0,L.value=!1,U.value=0,oe(),Y.value=!1,e.roundCount&&(H.value=e.roundCount),void 0!==e.guesserScore&&(z.value=e.guesserScore),void 0!==e.creatorScore&&(N.value=e.creatorScore),void 0!==e.shouldBeCreator)){g.value;g.value=e.shouldBeCreator}}),null==(d=i.value)||d.on("game-notification",e=>{e.from===s.partnerId&&e.gameType})}),r(()=>{var e,t,a,n,r,s,o,l;oe(),Fs.stopAllSounds(),null==(e=i.value)||e.off("game-word-setup"),null==(t=i.value)||t.off("game-move"),null==(a=i.value)||a.off("game-guess-result"),null==(n=i.value)||n.off("game-score-update"),null==(r=i.value)||r.off("game-partner-joined"),null==(s=i.value)||s.off("game-partner-left"),null==(o=i.value)||o.off("game-reset"),null==(l=i.value)||l.off("game-notification")});const ve=p(()=>"complete"!==f.value?null:g.value?L.value?"failed":"guessed":L.value?"guessed":"failed"),me=()=>{m.value=!0,Fs.playSound("button")};return(e,t)=>(c(),l(w,null,[h("div",el,[h("div",tl,[t[10]||(t[10]=h("h2",{class:"text-xl font-bold text-purple-400"},[h("span",{class:"hidden sm:inline"},"Word Galaxy"),h("span",{class:"sm:hidden"},"Word Game")],-1)),h("div",{class:y(["text-white text-sm px-3 py-1 rounded-full backdrop-blur-sm shadow-lg",{"bg-yellow-600/40 border border-yellow-500/30":"waiting"===f.value,"bg-green-600/40 border border-green-500/30":"setup"===f.value,"bg-blue-600/40 border border-blue-500/30":"guessing"===f.value,"bg-purple-600/40 border border-purple-500/30":"complete"===f.value}])},["waiting"===f.value?(c(),l("span",al,t[6]||(t[6]=[h("span",{class:"inline-block w-2 h-2 bg-yellow-400 rounded-full mr-2 animate-ping"},null,-1),E(" Waiting... ")]))):"setup"===f.value?(c(),l("span",nl,t[7]||(t[7]=[h("span",{class:"inline-block w-2 h-2 bg-green-400 rounded-full mr-2"},null,-1),E(" Setup ")]))):"guessing"===f.value?(c(),l("span",rl,t[8]||(t[8]=[h("span",{class:"inline-block w-2 h-2 bg-blue-400 rounded-full mr-2"},null,-1),E(" Guessing ")]))):"complete"===f.value?(c(),l("span",sl,t[9]||(t[9]=[h("span",{class:"inline-block w-2 h-2 bg-purple-400 rounded-full mr-2"},null,-1),E(" Complete ")]))):x("",!0)],2)]),h("div",ol,[h("div",{class:y(["flex flex-col items-center",{"opacity-70":"waiting"===f.value}])},[h("div",ll,[h("div",il,[t[11]||(t[11]=h("div",{class:"text-sm text-gray-300 mb-1"},"Attempts",-1)),h("div",ul,b(D.value)+"/"+b(ee.value),1)]),"guessing"!==f.value||g.value?x("",!0):(c(),l("div",cl,[t[12]||(t[12]=h("div",{class:"text-sm text-gray-300"},"Time",-1)),h("div",{class:y(["text-xl font-bold",{"text-red-400":q.value<10,"text-yellow-400":q.value<20,"text-white":q.value>=20}])},b(q.value)+"s",3)])),h("div",dl,[t[13]||(t[13]=h("div",{class:"text-sm text-gray-300 mb-1"},"Score",-1)),h("div",vl,b(g.value?N.value:z.value),1)]),h("div",ml,[t[14]||(t[14]=h("div",{class:"text-sm text-gray-300 mb-1"},"Round",-1)),h("div",pl,b(H.value),1)])]),h("div",fl,["waiting"===f.value?(c(),l("div",gl,t[15]||(t[15]=[I('<div class="bg-yellow-600/20 rounded-lg p-4 border border-yellow-500/30 shadow-lg animate-pulse" data-v-1a470be4><div class="w-16 h-16 mx-auto mb-3 relative" data-v-1a470be4><div class="absolute inset-0 bg-yellow-500/20 rounded-full animate-ping" data-v-1a470be4></div><div class="absolute inset-2 bg-yellow-500/30 rounded-full animate-ping animation-delay-300" data-v-1a470be4></div><div class="absolute inset-4 bg-yellow-500/40 rounded-full animate-ping animation-delay-600" data-v-1a470be4></div><div class="absolute inset-0 flex items-center justify-center" data-v-1a470be4><span class="text-2xl" data-v-1a470be4>👥</span></div></div><p class="text-yellow-300 mb-1 font-medium" data-v-1a470be4>Waiting for your partner to join...</p><p class="text-sm text-gray-300" data-v-1a470be4>Game will start automatically</p></div>',1)]))):"setup"===f.value&&g.value?(c(),l("div",hl,[t[18]||(t[18]=I('<div class="text-center mb-6" data-v-1a470be4><div class="w-16 h-16 mx-auto mb-3 flex items-center justify-center bg-green-500/30 rounded-full" data-v-1a470be4><span class="text-2xl" data-v-1a470be4>💬</span></div><h3 class="text-xl font-bold text-white mb-2" data-v-1a470be4>Create a Word</h3><p class="text-gray-300 mb-4" data-v-1a470be4>Enter a word for your partner to guess</p></div>',1)),h("div",yl,[h("div",bl,[t[16]||(t[16]=h("label",{class:"block text-gray-300 text-sm mb-2"},"Your Word:",-1)),_(h("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>S.value=e),dir:V(S.value)?"rtl":"ltr",class:"w-full bg-gray-900 text-white px-4 py-2 rounded border border-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"Enter a word...",maxlength:"15",disabled:"setup"!==f.value,onInput:Z},null,40,xl),[[C,S.value]]),d.value?(c(),l("p",wl,b(d.value),1)):(c(),l("p",kl,"The word should be 3-15 letters long"))]),h("div",Sl,[t[17]||(t[17]=h("label",{class:"block text-gray-300 text-sm mb-2"},"Difficulty:",-1)),h("div",_l,[h("button",{onClick:t[1]||(t[1]=e=>M.value="easy"),class:y(["flex-1 px-4 py-2 rounded-lg text-sm transition-all","easy"===M.value?"bg-green-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"])}," Easy ",2),h("button",{onClick:t[2]||(t[2]=e=>M.value="medium"),class:y(["flex-1 px-4 py-2 rounded-lg text-sm transition-all","medium"===M.value?"bg-yellow-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"])}," Medium ",2),h("button",{onClick:t[3]||(t[3]=e=>M.value="hard"),class:y(["flex-1 px-4 py-2 rounded-lg text-sm transition-all","hard"===M.value?"bg-red-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"])}," Hard ",2)])])]),h("div",Cl,[h("button",{onClick:re,class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:pointer-events-none",disabled:!ne.value}," Start Game ",8,Tl)])])):"setup"!==f.value||g.value?"guessing"!==f.value||g.value?"guessing"===f.value&&g.value?(c(),l("div",ql,[h("div",Gl,[h("div",Wl,[t[22]||(t[22]=h("span",{class:"text-gray-300"},"Your Secret Word:",-1)),h("span",{class:"text-white font-bold",dir:V(S.value)?"rtl":"ltr"},b(S.value),9,Yl)]),h("div",{class:"flex justify-center gap-1 md:gap-2 flex-wrap",dir:J.value},[(c(!0),l(w,null,k(S.value,(e,t)=>(c(),l("div",{key:t,class:y(["w-8 h-10 md:w-10 md:h-12 flex items-center justify-center rounded border border-purple-500 text-lg md:text-xl font-bold",B.value.includes(t)?"bg-purple-600/30 text-white":"bg-gray-800 text-gray-500"])},b(e),3))),128))],8,Kl),h("div",Vl,[Y.value?(c(),l("p",Xl,[t[23]||(t[23]=h("span",{class:"text-yellow-400 font-bold"},"Time remaining:",-1)),E(" "+b(q.value)+"s ",1)])):x("",!0),h("p",Jl,[t[24]||(t[24]=h("span",{class:"text-purple-400 font-bold"},"Status:",-1)),E(" "+b(F.value),1)])])]),h("div",Zl,[0===j.value.length?(c(),l("p",Ql,"Partner's guesses will appear here...")):x("",!0),(c(!0),l(w,null,k(j.value,(e,t)=>(c(),l("div",{key:t,class:"text-sm flex items-center mb-1"},[h("span",ei,b(t+1)+".",1),h("span",{dir:V(e.word)||V(S.value)?"rtl":"ltr",class:"text-gray-300 mr-2"},b(e.word),9,ti),h("span",{class:y(["text-xs px-1.5 py-0.5 rounded",ue(e.matches)])},b(e.matches)+" matching ",3)]))),128))])])):"complete"===f.value?(c(),l("div",ai,[h("div",ni,[h("div",{class:y(["w-16 h-16 mx-auto mb-3 flex items-center justify-center rounded-full","win"===ve.value?"bg-green-500/30":"bg-red-500/30"])},[h("span",ri,b("win"===ve.value?"🎉":"😢"),1)],2),h("h3",{class:y(["text-xl font-bold mb-2","win"===ve.value?"text-green-400":"text-red-400"])},b(g.value?"win"===ve.value?"Your word was too hard!":"Your word was guessed!":"win"===ve.value?"You guessed it!":"You ran out of attempts!"),3),h("p",si,b(g.value?"Your partner failed to guess your word.":`The word was: ${S.value.value}`),1)]),h("div",oi,[t[29]||(t[29]=h("h4",{class:"font-bold text-white mb-2"},"Game Summary:",-1)),h("div",li,[t[25]||(t[25]=h("div",{class:"text-gray-300"},"Secret Word:",-1)),h("div",ii,b(S.value.value),1),t[26]||(t[26]=h("div",{class:"text-gray-300"},"Difficulty:",-1)),h("div",ui,b(M.value),1),t[27]||(t[27]=h("div",{class:"text-gray-300"},"Attempts Used:",-1)),h("div",ci,b(D.value)+"/"+b(ee.value),1),t[28]||(t[28]=h("div",{class:"text-gray-300"},"Time Spent:",-1)),h("div",di,b(e.formatTime(e.gameTime)),1)])]),h("div",{class:"text-center"},[h("button",{onClick:ce,class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95"}," Play Again "),t[30]||(t[30]=h("p",{class:"text-sm text-gray-400 mt-2"}," In the next round, roles will be swapped ",-1))])])):x("",!0):(c(),l("div",Il,[h("div",Al,[h("div",Rl,[h("div",Bl,[t[20]||(t[20]=h("span",{class:"text-sm text-gray-400"},"The Secret Word:",-1)),h("span",Pl,b(P.value)+"/"+b(T.value)+" letters revealed",1)]),h("div",{class:"flex justify-center gap-1 md:gap-2 flex-wrap",dir:J.value},[(c(!0),l(w,null,k(R.value,(e,t)=>(c(),l("div",{key:t,class:y(["w-8 h-10 md:w-10 md:h-12 flex items-center justify-center rounded bg-gray-800/80 border text-lg md:text-xl font-bold","_"===e?"border-gray-700 text-gray-500":"border-purple-500 text-white"])},b(e),3))),128))],8,Ml)]),h("div",Ol,[t[21]||(t[21]=h("label",{class:"block text-gray-300 text-sm mb-2"},"Your Guess:",-1)),h("div",jl,[_(h("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>O.value=e),dir:V(O.value)||V(S.value.value)?"rtl":"ltr",class:"flex-1 bg-gray-900 text-white px-4 py-2 rounded-l border border-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"Type your guess...",maxlength:T.value,onKeyup:A(le,["enter"]),onInput:Q},null,40,Dl),[[C,O.value]]),h("button",{onClick:le,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r transition-all",disabled:!O.value||O.value.length!==T.value}," Submit ",8,Ll)]),v.value?(c(),l("p",Ul,b(v.value),1)):(c(),l("p",Fl,b(ae.value)+" attempts remaining ",1))]),h("div",zl,[0===j.value.length?(c(),l("p",Nl,"Your previous guesses will appear here...")):x("",!0),(c(!0),l(w,null,k(j.value,(e,t)=>(c(),l("div",{key:t,class:"text-sm flex items-center mb-1"},[h("span",Hl,b(t+1)+".",1),h("span",{dir:V(e.word)||V(S.value.value)?"rtl":"ltr",class:"text-gray-300 mr-2"},b(e.word),9,$l),h("span",{class:y(["text-xs px-1.5 py-0.5 rounded",ue(e.matches)])},b(e.matches)+" matching ",3)]))),128))])])])):(c(),l("div",El,t[19]||(t[19]=[I('<div class="text-center mb-6" data-v-1a470be4><div class="w-16 h-16 mx-auto mb-3 relative" data-v-1a470be4><div class="absolute inset-0 bg-blue-500/20 rounded-full animate-ping" data-v-1a470be4></div><div class="absolute inset-2 bg-blue-500/30 rounded-full animate-ping animation-delay-300" data-v-1a470be4></div><div class="absolute inset-4 bg-blue-500/40 rounded-full animate-ping animation-delay-600" data-v-1a470be4></div><div class="absolute inset-0 flex items-center justify-center" data-v-1a470be4><span class="text-2xl" data-v-1a470be4>🔤</span></div></div><h3 class="text-xl font-bold text-white mb-2" data-v-1a470be4>Get Ready!</h3><p class="text-gray-300" data-v-1a470be4>Your partner is creating a word for you to guess...</p></div><div class="bg-gray-700/50 rounded-lg p-4 mb-4" data-v-1a470be4><h4 class="font-bold text-white mb-2" data-v-1a470be4>How to Play:</h4><ul class="text-gray-300 text-sm space-y-2 list-disc pl-4" data-v-1a470be4><li data-v-1a470be4>Your partner will create a secret word</li><li data-v-1a470be4>You&#39;ll see a blurred version of the word</li><li data-v-1a470be4>Type guesses to reveal more letters</li><li data-v-1a470be4>You need to guess the word before the timer runs out</li><li data-v-1a470be4>You win if you guess correctly, your partner wins if you don&#39;t</li></ul></div>',2)])))])],2)]),h("div",{class:"flex justify-between mb-4"},[h("button",{onClick:me,class:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-md hover:shadow-lg transform hover:scale-105 active:scale-95"}," Back to Games ")])]),m.value?(c(),l("div",vi,[h("div",mi,[t[31]||(t[31]=h("h3",{class:"text-lg font-semibold mb-3 text-white"},"Are you sure?",-1)),t[32]||(t[32]=h("p",{class:"text-sm text-gray-300 mb-4"}," Leaving the game will end it for your partner too. ",-1)),h("div",pi,[h("button",{onClick:t[5]||(t[5]=e=>m.value=!1),class:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm"}," Cancel "),h("button",{onClick:de,class:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm"}," Leave ")])])])):x("",!0)],64))}}),[["__scopeId","data-v-1a470be4"]]),gi={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-2 sm:p-4"},hi={class:"bg-[#1e1e2e] rounded-lg w-full max-w-md mx-auto shadow-2xl relative overflow-hidden"},yi={class:"flex items-center justify-between p-2 sm:p-3 border-b border-gray-800"},bi={key:1,class:"p-3 sm:p-4"},xi={class:"grid grid-cols-2 gap-2 sm:gap-4 mb-3 sm:mb-4"},wi=["disabled"],ki=["disabled"],Si=["disabled"],_i={key:2,class:"text-center p-4 sm:p-6"},Ci={class:"mb-4"},Ti={class:"text-sm sm:text-base text-gray-300"},Ei={key:3},Ii={key:0,class:"absolute inset-0 bg-black/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-lg"},Ai=ps(o({__name:"games-modal",props:{isOpen:{type:Boolean,default:!1},partnerId:{type:String,required:!0},isConnected:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const{socket:s,userId:o}=W(),i=e,u=a(null),d=a(null),v=a(!0),p=a(null),f=a(!1),g=a(""),w=a(!1),k=a(null),S=a(null),_=a(null),C=e=>{g.value=e},T=e=>{const{gameType:t,partnerId:a,inviteId:n}=e.detail;if(a===i.partnerId&&(C(`Received invitation acceptance via custom event: ${n}`),S.value&&(clearTimeout(S.value),S.value=null),d.value=null,u.value&&u.value===t||(u.value=t),w.value=!1,f.value=!0,!p.value)){const e=[o.value,i.partnerId].sort();p.value=`${t}-${e[0]}-${e[1]}`,C(`Created game room: ${p.value}`)}},A=e=>{var t;if(!i.isConnected)return;C(`Starting game: ${e} with partner: ${i.partnerId}`),d.value=null,u.value=e,v.value=!0,f.value=!1;const a=[o.value,i.partnerId].sort();p.value=`${e}-${a[0]}-${a[1]}`,C(`Created game room: ${p.value}`),w.value=!0,_.value=Date.now();const n=`invite-${Date.now()}-${Math.floor(1e4*Math.random())}`;k.value=n,null==(t=s.value)||t.emit("game-join-room",{gameType:e,roomId:p.value,to:i.partnerId,isFirstPlayer:!0}),s.value&&i.partnerId&&(s.value.emit("game-invite",{gameType:e,to:i.partnerId,inviteId:n}),O("Invitation sent! Waiting for response...","info"),S.value=window.setTimeout(()=>{w.value&&(w.value=!1,d.value="Your partner didn't respond to the invitation. Please try again.",C("Invitation timed out - no response from partner"),u.value=null,p.value=null,k.value=null)},3e4))},B=()=>{var e;S.value&&(clearTimeout(S.value),S.value=null),w.value=!1,k.value=null,i.partnerId?(null==(e=s.value)||e.emit("game-leave-notification",{gameType:u.value||"unknown",to:i.partnerId,message:"Your partner returned to the game menu"}),s.value&&s.value.emit("game-notification",{gameType:u.value||"unknown",to:i.partnerId,message:"Your partner has left the game",type:"leave"}),setTimeout(()=>{p.value&&s.value&&s.value.emit("game-leave-room",{roomId:p.value,to:i.partnerId}),u.value=null,d.value=null,v.value=!0,p.value=null,f.value=!1},100)):(u.value=null,d.value=null,v.value=!0,p.value=null,f.value=!1)},P=e=>{d.value=e,C(`Error: ${e}`)},M=()=>{S.value&&(clearTimeout(S.value),S.value=null),s.value&&i.partnerId&&k.value&&(s.value.emit("game-invite-cancel",{inviteId:k.value,to:i.partnerId,gameType:u.value}),C(`Cancelled invitation: ${k.value}`),O("Game invitation cancelled","info")),w.value=!1,k.value=null,u.value=null,p.value=null,f.value=!1,p.value&&s.value&&i.partnerId&&s.value.emit("game-leave-room",{roomId:p.value,to:i.partnerId})};n(()=>{var e,t,a,n,r,l,c,m,g;C("Setting up game events"),window.addEventListener("game-invitation-accepted",T),window.addEventListener("game-error",e=>{const{message:t,gameType:a}=e.detail;t&&a===u.value&&(C(`Received game error event: ${t}`),d.value=t,w.value=!1,k.value=null)}),document.addEventListener("select-game",e=>{const{gameType:t,partnerId:a}=e.detail;if(t&&a&&a===i.partnerId){C(`Received direct game selection: ${t}`),u.value=t,d.value=null,v.value=!1,f.value=!0;const e=[o.value,i.partnerId].sort();p.value=`${t}-${e[0]}-${e[1]}`,C(`Created game room: ${p.value}`)}}),null==(e=s.value)||e.on("game-room-invite",e=>{var t;e.from===i.partnerId&&(C(`Received invitation to join game room: ${e.roomId}`),p.value=e.roomId,u.value=e.gameType,v.value=!1,null==(t=s.value)||t.emit("game-join-room",{gameType:e.gameType,roomId:e.roomId,to:i.partnerId,isFirstPlayer:!1}))}),null==(t=s.value)||t.on("game-invite-accepted",e=>{e.from===i.partnerId&&w.value&&(C(`Partner accepted game invitation: ${e.inviteId}`),S.value&&(clearTimeout(S.value),S.value=null),w.value=!1,f.value=!0,O("Your partner accepted! Game starting...","success"))}),null==(a=s.value)||a.on("game-invite-declined",e=>{e.from===i.partnerId&&w.value&&(C(`Partner declined game invitation: ${e.inviteId}`),S.value&&(clearTimeout(S.value),S.value=null),w.value=!1,d.value="Your partner declined the game invitation.",u.value=null,p.value=null,f.value=!1,p.value&&s.value&&i.partnerId&&s.value.emit("game-leave-room",{roomId:p.value,to:i.partnerId}))}),null==(n=s.value)||n.on("game-invite-timeout",e=>{w.value&&k.value===e.inviteId&&(C(`Game invitation timed out: ${e.inviteId}`),S.value&&(clearTimeout(S.value),S.value=null),w.value=!1,d.value="The game invitation expired. Please try again.",u.value=null,p.value=null)}),null==(r=s.value)||r.on("game-invite-cancel",e=>{e.from===i.partnerId&&(C(`Partner cancelled game invitation: ${e.inviteId}`),w.value=!1,k.value=null,p.value=null)}),null==(l=s.value)||l.on("game-partner-joined",e=>{e.from===i.partnerId&&(C(`Partner joined the game: ${e.gameType}`),f.value=!0)}),null==(c=s.value)||c.on("game-error",e=>{"system"!==e.from&&e.from!==i.partnerId||(d.value=e.message||"An error occurred in the game.",C(`Game error: ${e.message}`))}),null==(m=s.value)||m.on("game-partner-left",e=>{u.value&&(C("Partner left the game - closing silently"),u.value=null,p.value=null,f.value=!1,d.value=null)}),null==(g=s.value)||g.on("game-notification",e=>{e.from===i.partnerId&&C(`Notification from partner: ${e.message}`)})}),r(()=>{C("Cleaning up game events"),window.removeEventListener("game-invitation-accepted",T),window.removeEventListener("game-error",()=>{}),S.value&&(clearTimeout(S.value),S.value=null),w.value&&k.value&&s.value&&i.partnerId&&s.value.emit("game-invite-cancel",{inviteId:k.value,to:i.partnerId,gameType:u.value}),s.value&&(s.value.off("game-room-invite"),s.value.off("game-partner-joined"),s.value.off("game-error"),s.value.off("game-partner-left"),s.value.off("game-notification"),s.value.off("game-invite-accepted"),s.value.off("game-invite-declined"),s.value.off("game-invite-timeout"),s.value.off("game-invite-cancel"),p.value&&i.partnerId&&s.value.emit("game-leave-room",{roomId:p.value,to:i.partnerId})),w.value=!1,k.value=null,document.removeEventListener("select-game",()=>{})}),m(()=>i.isOpen,e=>{e||B()});const O=(e,t="info")=>{const a=document.createElement("div");let n="bg-blue-600";"success"===t&&(n="bg-emerald-600"),"error"===t&&(n="bg-red-600"),a.className=`fixed bottom-4 right-4 ${n} text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in`,a.style.animationDuration="0.3s",a.innerHTML=e,document.body.appendChild(a),setTimeout(()=>{a.style.opacity="0",a.style.transition="opacity 0.3s ease",setTimeout(()=>{document.body.removeChild(a)},300)},3e3)};return(t,a)=>e.isOpen?(c(),l("div",gi,[h("div",hi,[h("div",yi,[a[4]||(a[4]=h("div",{class:"flex items-center gap-2"},[h("span",{class:"text-purple-400 text-lg sm:text-xl"},"🎮"),h("h2",{class:"text-lg sm:text-xl font-semibold text-[#a881fc]"},"Space Games")],-1)),h("button",{onClick:a[0]||(a[0]=e=>t.$emit("close")),class:"text-gray-400 hover:text-white text-lg"}," ✕ ")]),x("",!0),u.value?d.value?(c(),l("div",_i,[h("div",Ci,[a[10]||(a[10]=h("div",{class:"w-12 h-12 sm:w-16 sm:h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-2"},[h("span",{class:"text-xl sm:text-2xl"},"⚠️")],-1)),a[11]||(a[11]=h("h3",{class:"text-lg sm:text-xl font-bold mb-2 text-red-400"},"Game Error",-1)),h("p",Ti,b(d.value),1)]),h("button",{onClick:B,class:"px-4 py-2 bg-gray-700 rounded-full hover:bg-gray-600 transition-colors mt-2"}," Back to Games ")])):(c(),l("div",Ei,[w.value?(c(),l("div",Ii,[a[12]||(a[12]=h("div",{class:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-4"},null,-1)),a[13]||(a[13]=h("h3",{class:"text-lg font-medium text-white mb-2"},"Waiting for Response",-1)),a[14]||(a[14]=h("p",{class:"text-sm text-gray-300 text-center max-w-xs"},[E(" Your game invitation has been sent."),h("br"),E(" Please wait for your partner to accept. ")],-1)),h("button",{onClick:M,class:"mt-6 px-4 py-2 bg-gray-700 rounded-full hover:bg-gray-600 transition-colors text-sm"}," Cancel Invitation ")])):x("",!0),"tic-tac-toe"===u.value?(c(),R(xo,{key:1,partnerId:e.partnerId,isFirstPlayer:v.value,partnerReady:f.value,onBack:B,onError:P},null,8,["partnerId","isFirstPlayer","partnerReady"])):x("",!0),"rock-paper-scissors"===u.value?(c(),R(Qo,{key:2,partnerId:e.partnerId,partnerReady:f.value,onBack:B,onError:P},null,8,["partnerId","partnerReady"])):x("",!0),"word-galaxy"===u.value?(c(),R(fi,{key:3,partnerId:e.partnerId,partnerReady:f.value,onBack:B,onError:P},null,8,["partnerId","partnerReady"])):x("",!0)])):(c(),l("div",bi,[h("div",xi,[h("button",{class:y(["bg-[#2e2e42] p-2 sm:p-4 rounded-lg flex flex-col items-center text-center hover:bg-[#3a3a52] transition-colors relative",{"opacity-50 cursor-not-allowed":!e.isConnected}]),disabled:!e.isConnected,onClick:a[1]||(a[1]=e=>A("rock-paper-scissors"))},a[5]||(a[5]=[h("div",{class:"bg-yellow-500 text-white w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center mb-2 sm:mb-3 text-base sm:text-xl"},"👊",-1),h("div",{class:"text-white text-xs sm:text-sm font-medium"},"Rock Paper Scissors",-1),h("div",{class:"text-xs text-gray-400 hidden sm:block"},"vs Partner",-1)]),10,wi),h("button",{class:y(["bg-[#2e2e42] p-2 sm:p-4 rounded-lg flex flex-col items-center text-center hover:bg-[#3a3a52] transition-colors relative",{"opacity-50 cursor-not-allowed":!e.isConnected}]),disabled:!e.isConnected,onClick:a[2]||(a[2]=e=>A("word-galaxy"))},a[6]||(a[6]=[h("div",{class:"bg-white text-gray-800 w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center mb-2 sm:mb-3 text-base sm:text-xl"},"💬",-1),h("div",{class:"text-white text-xs sm:text-sm font-medium"},"Word Galaxy",-1),h("div",{class:"text-xs text-gray-400 hidden sm:block"},"Word Guessing Game",-1)]),10,ki),h("button",{class:y(["bg-[#2e2e42] p-2 sm:p-4 rounded-lg flex flex-col items-center text-center hover:bg-[#3a3a52] transition-colors relative",{"opacity-50 cursor-not-allowed":!e.isConnected}]),disabled:!e.isConnected,onClick:a[3]||(a[3]=e=>A("tic-tac-toe"))},a[7]||(a[7]=[h("div",{class:"bg-red-600 text-white w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center mb-2 sm:mb-3 text-base sm:text-xl"},"⭕",-1),h("div",{class:"text-white text-xs sm:text-sm font-medium"},"Tic-Tac-Toe",-1),h("div",{class:"text-xs text-gray-400 hidden sm:block"},"vs Partner",-1)]),10,Si),h("button",{class:y(["bg-[#2e2e42] p-2 sm:p-4 rounded-lg flex flex-col items-center text-center relative",{"opacity-50 cursor-not-allowed":!0}]),disabled:""},a[8]||(a[8]=[I('<div class="absolute inset-0 flex items-center justify-center bg-[#2e2e42]/80 rounded-lg" data-v-e20d9e17><span class="bg-purple-500 text-white text-xs px-2 py-1 rounded-md font-medium" data-v-e20d9e17>Coming Soon</span></div><div class="bg-purple-600 text-white w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center mb-2 sm:mb-3 text-base sm:text-xl" data-v-e20d9e17>🎲</div><div class="text-white text-xs sm:text-sm font-medium" data-v-e20d9e17>Mystery Game</div><div class="text-xs text-gray-400 hidden sm:block" data-v-e20d9e17>More Fun Ahead</div>',4)]))]),a[9]||(a[9]=h("p",{class:"text-center text-xs sm:text-sm text-gray-400 mt-2"}," Connect to play with others ",-1))]))])])):x("",!0)}}),[["__scopeId","data-v-e20d9e17"]]),Ri={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Bi={class:"bg-gray-900 rounded-lg w-full max-w-md mx-auto p-6"},Pi={class:"flex items-center justify-between mb-6"},Mi={class:"grid grid-cols-3 gap-4 mb-6"},Oi=o({__name:"donation-modal",props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=t,r=a(15),s=e=>{r.value=e},o=()=>{window.open(`https://www.paypal.com/paypalme/spacetalk/${r.value}`,"_blank"),n("close")};return(t,a)=>e.isOpen?(c(),l("div",Ri,[h("div",Bi,[h("div",Pi,[a[4]||(a[4]=h("div",{class:"flex items-center gap-2"},[h("span",{class:"text-red-400 text-xl"},"❤️"),h("h2",{class:"text-lg font-semibold text-violet-400"},"Support SpaceTalk")],-1)),h("button",{onClick:a[0]||(a[0]=e=>t.$emit("close")),class:"text-gray-400 hover:text-white text-lg"}," ✕ ")]),a[8]||(a[8]=h("div",{class:"mb-6 text-center"},[h("p",{class:"text-gray-300"},"Keep SpaceTalk free for everyone")],-1)),h("div",Mi,[h("button",{class:y(["bg-gray-800 hover:bg-gray-700 rounded-lg p-4 text-center transition-colors duration-200 transform",5===r.value?"ring-2 ring-emerald-500 scale-105":""]),onClick:a[1]||(a[1]=e=>s(5))},a[5]||(a[5]=[h("div",{class:"text-lg font-bold text-white"},"$5",-1),h("div",{class:"text-sm text-gray-400"},"Coffee",-1)]),2),h("button",{class:y(["bg-gray-800 hover:bg-gray-700 rounded-lg p-4 text-center transition-colors duration-200 transform",15===r.value?"ring-2 ring-emerald-500 scale-105":""]),onClick:a[2]||(a[2]=e=>s(15))},a[6]||(a[6]=[h("div",{class:"text-lg font-bold text-white"},"$15",-1),h("div",{class:"text-sm text-gray-400"},"Fuel",-1)]),2),h("button",{class:y(["bg-gray-800 hover:bg-gray-700 rounded-lg p-4 text-center transition-colors duration-200 transform",50===r.value?"ring-2 ring-emerald-500 scale-105":""]),onClick:a[3]||(a[3]=e=>s(50))},a[7]||(a[7]=[h("div",{class:"text-lg font-bold text-white"},"$50",-1),h("div",{class:"text-sm text-gray-400"},"Rocket",-1)]),2)]),a[9]||(a[9]=h("div",{class:"flex justify-center items-center gap-1 mb-6"},[h("span",{class:"text-yellow-400"},"⭐"),h("span",{class:"text-sm text-gray-300"},"Boost development")],-1)),h("button",{class:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 rounded-lg transition-colors mb-2 active:scale-95 transform duration-150",onClick:o}," Donate via PayPal "),a[10]||(a[10]=h("div",{class:"text-xs text-gray-500 text-center"}," Secure payments via PayPal ",-1))])])):x("",!0)}}),ji={class:"fixed inset-0 overflow-hidden pointer-events-none"},Di=ps(o({__name:"starfield",setup(e){const t=a([]);n(()=>{r()});const r=()=>{const e=[];for(let t=0;t<50;t++)e.push({id:t,x:100*Math.random(),y:100*Math.random(),size:2*Math.random()+1,opacity:.7*Math.random()+.3,duration:8*Math.random()+2});t.value=e};return(e,a)=>(c(),l("div",ji,[(c(!0),l(w,null,k(t.value,e=>(c(),l("div",{key:e.id,class:"absolute rounded-full bg-white",style:B({width:`${e.size}px`,height:`${e.size}px`,top:`${e.y}%`,left:`${e.x}%`,opacity:e.opacity,boxShadow:`0 0 ${2*e.size}px rgba(255, 255, 255, ${e.opacity})`,animation:`twinkle ${e.duration}s infinite ease-in-out`})},null,4))),128))]))}}),[["__scopeId","data-v-f4bff5a3"]]),Li=!1,Ui=ps(o({__name:"AudioOutput",props:{showControls:{type:Boolean,default:!0}},setup(e){const{remoteStream:t,connectionState:r,partnerId:s,isAudioMuted:o}=za(),i=a(null),u=a(.8),d=a(!1),v=a(0),f=p(()=>!(!(!(!(null!==t.value)||!t.value)&&t.value.getAudioTracks().length>0)||!t.value)&&t.value.getAudioTracks().some(e=>e.enabled));p(()=>t.value?t.value.getAudioTracks().filter(e=>e.enabled&&"live"===e.readyState).length:0),p(()=>d.value&&f.value?"connected":("connected"!==r.value||f.value||d.value||setTimeout(w,500),r.value)),m(()=>t.value,e=>{w(),v.value=0,setTimeout(k,500)}),m(()=>o.value,e=>{!e&&t.value&&i.value&&setTimeout(()=>{i.value&&i.value.paused&&i.value.play().catch(e=>{})},300)}),m(()=>r.value,e=>{"connected"===e?setTimeout(()=>{w(),k()},1e3):"new"===e||"connecting"===e?v.value=0:"disconnected"!==e&&"failed"!==e||function(){v.value=0,i.value&&(i.value.srcObject=null);setTimeout(()=>{w(),k()},500)}()}),m(()=>s.value,e=>{d.value=!1,v.value=0,e||i.value&&(i.value.srcObject=null)}),n(()=>{w(),i.value&&(i.value.onplaying=()=>{d.value=!0},i.value.onpause=()=>{d.value=!1},i.value.onended=()=>{d.value=!1},i.value.onerror=e=>{d.value=!1},i.value.volume=u.value),document.addEventListener("visibilitychange",b),y(),g=window.setInterval(()=>{!d.value&&f.value&&"connected"===r.value&&(w(),k())},5e3)}),P(()=>{i.value&&(i.value.srcObject=null),document.removeEventListener("visibilitychange",b),y()});let g=null;function y(){g&&(clearInterval(g),g=null)}function b(){"visible"===document.visibilityState&&(w(),setTimeout(()=>{!d.value&&f.value&&k()},500))}function w(){i.value&&(t.value?(i.value.srcObject=t.value,t.value.getAudioTracks().forEach(e=>{e.enabled=!0}),k()):(i.value.srcObject=null,d.value=!1))}async function k(){if(i.value&&i.value.srcObject)try{Li;t.value&&t.value.getAudioTracks().length;await i.value.play(),d.value=!0,v.value=0}catch(e){if(d.value=!1,e instanceof DOMException&&e.name,v.value<10){v.value++;const e=1e3*v.value;setTimeout(k,e)}}}return(e,t)=>(c(),l("div",null,[h("audio",{ref_key:"audioElement",ref:i,autoplay:"",playsinline:"",class:"hidden"},null,512),x("",!0)]))}}),[["__scopeId","data-v-f63dc209"]]),Fi={class:"flex items-center"},zi={key:0,class:"spinner mr-3"},Ni={key:1,class:"timeout-icon mr-3"},Hi={class:"content flex-grow"},$i={class:"message"},qi={key:0,class:"wait-time"},Gi={key:2,class:"flex-shrink-0"},Wi=ps(o({__name:"queue-status",emits:["retry"],setup(e,{emit:t}){const s=W(),o=a(s.queueStatus.value),i=a(s.queueMessage.value),u=a(s.queueWaitTime.value),d=p(()=>"idle"!==o.value&&"matched"!==o.value),v=p(()=>"waiting"===o.value),m=p(()=>"timeout"===o.value),f=p(()=>({waiting:v.value,timeout:m.value}));function g(e){if(e<60)return`${e} seconds`;if(e<3600){const t=Math.floor(e/60),a=e%60;return`${t} ${1===t?"minute":"minutes"}${a>0?` and ${a} ${1===a?"second":"seconds"}`:""}`}{const t=Math.floor(e/3600),a=Math.floor(e%3600/60);return`${t} ${1===t?"hour":"hours"}${a>0?` and ${a} ${1===a?"minute":"minutes"}`:""}`}}function w(){s.socket.value&&(o.value="idle",S("retry"))}function k(e){const t=e.detail;o.value=t.status,i.value=t.message,u.value=t.waitTime}const S=t;return n(()=>{o.value=s.queueStatus.value,i.value=s.queueMessage.value,u.value=s.queueWaitTime.value,window.addEventListener("queue-status-changed",k)}),r(()=>{window.removeEventListener("queue-status-changed",k)}),(e,t)=>d.value?(c(),l("div",{key:0,class:y(["queue-status",f.value])},[h("div",Fi,[v.value?(c(),l("div",zi)):m.value?(c(),l("div",Ni,"⏱️")):x("",!0),h("div",Hi,[h("div",$i,b(i.value),1),u.value>0?(c(),l("div",qi," Wait time: "+b(g(u.value)),1)):x("",!0)]),m.value?(c(),l("div",Gi,[h("button",{onClick:w,class:"retry-button"}," Try Again ")])):x("",!0)])],2)):x("",!0)}}),[["__scopeId","data-v-7301a6d5"]]),Yi={class:"filter-feedback"},Ki={key:0,class:"mt-2 p-2 bg-emerald-900/30 rounded-lg"},Vi={class:"text-xs text-emerald-300"},Xi={class:"font-medium"},Ji={class:"w-full bg-gray-700 rounded-full h-2 mt-1"},Zi={key:1,class:"mt-2"},Qi={class:"text-xs text-gray-400"},eu={key:2,class:"mt-2"},tu={class:"text-xs text-gray-400"},au=ps(o({__name:"CountryFilterFeedback",props:{preferredCountries:{type:Array,required:!0},blockedCountries:{type:Array,required:!0},onlineUsers:{type:Number,default:0},countries:{type:Array,required:!0}},setup(e){const t=e,a=p(()=>{if(0===t.preferredCountries.length)return 100;const e=t.preferredCountries.length/195*100;return Math.min(Math.round(e),100)}),n=e=>{const a=t.countries.find(t=>t.value===e);return a?a.name:e};return(t,r)=>(c(),l("div",Yi,[e.preferredCountries.length>0?(c(),l("div",Ki,[h("p",Vi,[h("span",Xi,b(a.value)+"%",1),r[0]||(r[0]=E(" of users match your preferences "))]),h("div",Ji,[h("div",{class:"bg-emerald-500 h-2 rounded-full",style:B({width:`${a.value}%`})},null,4)])])):x("",!0),e.preferredCountries.length>0?(c(),l("div",Zi,[h("p",Qi,[r[1]||(r[1]=E(" Your current preferences will match you only with users from: ")),(c(!0),l(w,null,k(e.preferredCountries,(t,a)=>(c(),l("span",{key:t},b(n(t))+b(a<e.preferredCountries.length-1?", ":""),1))),128))])])):x("",!0),e.blockedCountries.length>0?(c(),l("div",eu,[h("p",tu,[r[2]||(r[2]=E(" You will not be matched with users from: ")),(c(!0),l(w,null,k(e.blockedCountries,(t,a)=>(c(),l("span",{key:t},b(n(t))+b(a<e.blockedCountries.length-1?", ":""),1))),128))])])):x("",!0)]))}}),[["__scopeId","data-v-bceab852"]]),nu={class:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl p-6 w-full max-w-sm border border-indigo-500/50 shadow-2xl animate-bounce-in"},ru={class:"text-center"},su={class:"w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center shadow-lg shadow-indigo-500/30 animate-pulse"},ou={class:"text-4xl"},lu={class:"text-white/90 text-sm mb-2"},iu={class:"font-medium text-indigo-300"},uu={class:"mt-4 mb-3 relative"},cu={class:"h-3 bg-gray-700/70 rounded-full overflow-hidden backdrop-blur-sm shadow-inner"},du={class:"text-sm text-indigo-200 mt-2 font-medium"},vu=ps(o({__name:"GameInviteNotification",props:{gameType:{},from:{},inviteId:{}},emits:["accept","decline","timeout"],setup(e,{emit:t}){const r=e,s=t,o=a(30);let i=null;const u=p(()=>o.value/30*100);n(()=>{const e=new Audio("/sounds/notification.mp3");e.volume=.3,e.play().catch(e=>{}),i=window.setInterval(()=>{o.value-=.1,o.value<=0&&d()},100)}),P(()=>{null!==i&&clearInterval(i)});const d=()=>{null!==i&&clearInterval(i),s("timeout",{inviteId:r.inviteId})},v=()=>{null!==i&&clearInterval(i),s("accept",{inviteId:r.inviteId,gameType:r.gameType,from:r.from})},m=()=>{null!==i&&clearInterval(i),s("decline",{inviteId:r.inviteId,from:r.from,gameType:r.gameType});const e=new Audio("/sounds/click.mp3");e.volume=.3,e.play().catch(e=>{})},f=e=>({"rock-paper-scissors":"Rock Paper Scissors","tic-tac-toe":"Tic-Tac-Toe","word-galaxy":"Word Galaxy",trivia:"Trivia Quiz"}[e]||e);return(e,t)=>{return c(),l("div",{class:"fixed inset-0 flex items-center justify-center z-50 bg-black/70",onClick:S(m,["self"])},[h("div",nu,[t[2]||(t[2]=h("div",{class:"absolute inset-0 -z-10 bg-gradient-to-r from-purple-600/20 to-indigo-600/20 rounded-2xl blur-xl animate-pulse"},null,-1)),h("div",ru,[h("div",su,[h("span",ou,b((a=e.gameType,{"rock-paper-scissors":"✂️","tic-tac-toe":"⭕","word-galaxy":"🌌",trivia:"❓"}[a]||"🎮")),1)]),t[1]||(t[1]=h("p",{class:"text-white text-xl font-semibold mb-2 text-shadow"},"Game Invitation",-1)),h("p",lu,[t[0]||(t[0]=E(" You've been invited to play ")),h("span",iu,b(f(e.gameType)),1)]),h("div",uu,[h("div",cu,[h("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-pulse-slow",style:B({width:`${u.value}%`})},null,4)]),h("p",du,b(Math.ceil(o.value))+"s remaining ",1)])]),h("div",{class:"mt-6 grid grid-cols-2 gap-4"},[h("button",{onClick:m,class:"bg-gray-700/80 hover:bg-gray-600 text-white px-6 py-3 rounded-xl text-sm transition-all duration-300 hover:scale-105 backdrop-blur-sm shadow-lg"}," Decline "),h("button",{onClick:v,class:"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white px-6 py-3 rounded-xl text-sm transition-all duration-300 hover:scale-105 shadow-lg shadow-indigo-500/30 font-medium"}," Accept ")])])]);var a}}}),[["__scopeId","data-v-b80e5f71"]]),mu={class:"min-h-screen font-sans"},pu={class:"relative min-h-screen z-10 text-white"},fu={class:"p-2 sm:p-4 border-b border-white/10"},gu={class:"max-w-4xl mx-auto"},hu={class:"flex justify-center gap-2 mb-2 sm:mb-3"},yu={class:"bg-green-500/20 rounded-full px-2 py-1 text-xs flex items-center gap-1"},bu={key:0,class:"bg-purple-500/20 rounded-full px-2 py-1 text-xs"},xu={class:"grid grid-cols-2 gap-2 text-xs relative"},wu={class:"flex items-center truncate"},ku={key:0,class:"absolute top-full left-0 mt-1 w-full bg-gray-800/95 backdrop-blur-md border border-gray-700 rounded-xl shadow-xl z-20 overflow-hidden transition-all duration-200 animate-dropdown"},Su={class:"py-1"},_u=["onClick"],Cu={class:"text-sm"},Tu={class:"flex-1 p-2 sm:p-4"},Eu={class:"max-w-md mx-auto space-y-4 sm:space-y-6"},Iu={class:"flex items-center justify-center gap-2 mb-2 sm:mb-4"},Au={class:"relative inline-block w-10 h-5 mr-2"},Ru={class:"text-center"},Bu={class:"text-xs text-gray-400 italic"},Pu={class:"p-2 sm:p-4 border-t border-white/10"},Mu={class:"max-w-md mx-auto text-center space-y-1 sm:space-y-2"},Ou={class:"grid grid-cols-2 md:flex md:flex-wrap justify-center gap-2 mt-2 sm:mt-4 text-xs"},ju={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Du={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-sm"},Lu={class:"flex justify-between items-center mb-4"},Uu={class:"space-y-3"},Fu={key:0,class:"text-center py-8"},zu={class:"flex items-center gap-3"},Nu={class:"text-2xl"},Hu={class:"text-white text-sm font-medium"},$u={class:"text-gray-400 text-xs"},qu={class:"text-xs text-gray-500"},Gu={key:0,class:"text-xs text-gray-500 text-center mt-4"},Wu={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-md max-h-[80vh] overflow-y-auto relative"},Yu={class:"space-y-6"},Ku={class:"bg-gray-700 border border-gray-600 rounded-lg p-3 min-h-[60px] max-h-32 overflow-y-auto scrollbar-hide"},Vu={key:0,class:"text-xs text-gray-400 p-2"},Xu={key:1,class:"flex flex-wrap gap-2"},Ju={class:"flag-icon"},Zu=["onClick"],Qu={class:"bg-gray-700 border border-gray-600 rounded-lg p-3 min-h-[60px] max-h-32 overflow-y-auto scrollbar-hide"},ec={key:0,class:"text-xs text-gray-400 p-2"},tc={key:1,class:"flex flex-wrap gap-2"},ac={class:"flag-icon"},nc=["onClick"],rc={key:2,class:"fixed z-50 max-h-64 bg-gray-700 border border-gray-600 rounded-lg shadow-lg overflow-y-auto scrollbar-hide dropdown-outer preferred-outer"},sc={class:"py-1 w-full"},oc={class:"px-3 py-2 border-b border-gray-600"},lc={key:0,class:"text-xs text-gray-400 px-3 py-2"},ic=["onClick"],uc={class:"flag-icon w-6 text-center"},cc={class:"text-sm"},dc={key:3,class:"fixed z-50 max-h-64 bg-gray-700 border border-gray-600 rounded-lg shadow-lg overflow-y-auto scrollbar-hide dropdown-outer blocked-outer"},vc={class:"py-1 w-full"},mc={class:"px-3 py-2 border-b border-gray-600"},pc={key:0,class:"text-xs text-gray-400 px-3 py-2"},fc=["onClick"],gc={class:"flag-icon w-6 text-center"},hc={class:"text-sm"},yc={key:4,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4"},bc={class:"bg-gradient-to-br from-gray-900 to-purple-900 rounded-xl p-6 w-full max-w-lg shadow-2xl border border-purple-500/30"},xc={class:"flex justify-between items-center mb-6"},wc={class:"space-y-6 text-gray-200"},kc={class:"flex justify-center pt-4"},Sc={key:5,class:"hidden"},_c={key:6,class:"fixed inset-0 flex items-center justify-center z-50 p-4 bg-black/50"},Cc={class:"bg-gradient-to-br from-purple-900 to-indigo-900 rounded-2xl p-6 w-full max-w-sm border border-purple-500/30 shadow-xl"},Tc={class:"text-center"},Ec={class:"text-white/80 text-sm"},Ic={class:"mt-4 text-center"},Ac=ps(o({__name:"HomeView",setup(e){const t=a("disconnected"),r=a(null),s=a(null),o=a(""),u=a(!1);let d=null;const v=a(!1),f=a(!1),g=a(!1),A=a(!1),B=a(!1),j=a(!1),D=a(0),L=a(0),U=a(!1),F=a([]),z=a([]),N=a([]),H=a("any"),$=a(!1),q=a([]),G=a([]),Y=a(!1),K=a(!1),V=a(""),X=a([]),J=a(""),Z=a([]),Q=[{value:"any",text:"Go With the Flow",emoji:"🌟"},{value:"chill",text:"Chill",emoji:"😌"},{value:"fun",text:"Fun",emoji:"🎉"},{value:"curious",text:"Curious",emoji:"🤔"},{value:"creative",text:"Creative",emoji:"🎨"}],ee=a([{value:"any",label:"🌍 Any Country",name:"Any Country",flag:"🌍"},{value:"ae",label:"🇦🇪 UAE",name:"United Arab Emirates",flag:"🇦🇪"},{value:"af",label:"🇦🇫 Afghanistan",name:"Afghanistan",flag:"🇦🇫"},{value:"al",label:"🇦🇱 Albania",name:"Albania",flag:"🇦🇱"},{value:"dz",label:"🇩🇿 Algeria",name:"Algeria",flag:"🇩🇿"},{value:"ar",label:"🇦🇷 Argentina",name:"Argentina",flag:"🇦🇷"},{value:"au",label:"🇦🇺 Australia",name:"Australia",flag:"🇦🇺"},{value:"at",label:"🇦🇹 Austria",name:"Austria",flag:"🇦🇹"},{value:"bh",label:"🇧🇭 Bahrain",name:"Bahrain",flag:"🇧🇭"},{value:"bd",label:"🇧🇩 Bangladesh",name:"Bangladesh",flag:"🇧🇩"},{value:"be",label:"🇧🇪 Belgium",name:"Belgium",flag:"🇧🇪"},{value:"br",label:"🇧🇷 Brazil",name:"Brazil",flag:"🇧🇷"},{value:"ca",label:"🇨🇦 Canada",name:"Canada",flag:"🇨🇦"},{value:"cn",label:"🇨🇳 China",name:"China",flag:"🇨🇳"},{value:"dk",label:"🇩🇰 Denmark",name:"Denmark",flag:"🇩🇰"},{value:"eg",label:"🇪🇬 Egypt",name:"Egypt",flag:"🇪🇬"},{value:"fi",label:"🇫🇮 Finland",name:"Finland",flag:"🇫🇮"},{value:"fr",label:"🇫🇷 France",name:"France",flag:"🇫🇷"},{value:"de",label:"🇩🇪 Germany",name:"Germany",flag:"🇩🇪"},{value:"gr",label:"🇬🇷 Greece",name:"Greece",flag:"🇬🇷"},{value:"hk",label:"🇭🇰 Hong Kong",name:"Hong Kong",flag:"🇭🇰"},{value:"hu",label:"🇭🇺 Hungary",name:"Hungary",flag:"🇭🇺"},{value:"in",label:"🇮🇳 India",name:"India",flag:"🇮🇳"},{value:"id",label:"🇮🇩 Indonesia",name:"Indonesia",flag:"🇮🇩"},{value:"ir",label:"🇮🇷 Iran",name:"Iran",flag:"🇮🇷"},{value:"iq",label:"🇮🇶 Iraq",name:"Iraq",flag:"🇮🇶"},{value:"ie",label:"🇮🇪 Ireland",name:"Ireland",flag:"🇮🇪"},{value:"it",label:"🇮🇹 Italy",name:"Italy",flag:"🇮🇹"},{value:"jp",label:"🇯🇵 Japan",name:"Japan",flag:"🇯🇵"},{value:"jo",label:"🇯🇴 Jordan",name:"Jordan",flag:"🇯🇴"},{value:"kz",label:"🇰🇿 Kazakhstan",name:"Kazakhstan",flag:"🇰🇿"},{value:"kr",label:"🇰🇷 Korea",name:"South Korea",flag:"🇰🇷"},{value:"kw",label:"🇰🇼 Kuwait",name:"Kuwait",flag:"🇰🇼"},{value:"lb",label:"🇱🇧 Lebanon",name:"Lebanon",flag:"🇱🇧"},{value:"ly",label:"🇱🇾 Libya",name:"Libya",flag:"🇱🇾"},{value:"my",label:"🇲🇾 Malaysia",name:"Malaysia",flag:"🇲🇾"},{value:"mx",label:"🇲🇽 Mexico",name:"Mexico",flag:"🇲🇽"},{value:"ma",label:"🇲🇦 Morocco",name:"Morocco",flag:"🇲🇦"},{value:"nl",label:"🇳🇱 Netherlands",name:"Netherlands",flag:"🇳🇱"},{value:"nz",label:"🇳🇿 New Zealand",name:"New Zealand",flag:"🇳🇿"},{value:"ng",label:"🇳🇬 Nigeria",name:"Nigeria",flag:"🇳🇬"},{value:"no",label:"🇳🇴 Norway",name:"Norway",flag:"🇳🇴"},{value:"om",label:"🇴🇲 Oman",name:"Oman",flag:"🇴🇲"},{value:"pk",label:"🇵🇰 Pakistan",name:"Pakistan",flag:"🇵🇰"},{value:"ps",label:"🇵🇸 Palestine",name:"Palestine",flag:"🇵🇸"},{value:"ph",label:"🇵🇭 Philippines",name:"Philippines",flag:"🇵🇭"},{value:"pl",label:"🇵🇱 Poland",name:"Poland",flag:"🇵🇱"},{value:"pt",label:"🇵🇹 Portugal",name:"Portugal",flag:"🇵🇹"},{value:"qa",label:"🇶🇦 Qatar",name:"Qatar",flag:"🇶🇦"},{value:"ro",label:"🇷🇴 Romania",name:"Romania",flag:"🇷🇴"},{value:"ru",label:"🇷🇺 Russia",name:"Russia",flag:"🇷🇺"},{value:"sa",label:"🇸🇦 Saudi Arabia",name:"Saudi Arabia",flag:"🇸🇦"},{value:"sg",label:"🇸🇬 Singapore",name:"Singapore",flag:"🇸🇬"},{value:"za",label:"🇿🇦 South Africa",name:"South Africa",flag:"🇿🇦"},{value:"es",label:"🇪🇸 Spain",name:"Spain",flag:"🇪🇸"},{value:"sd",label:"🇸🇩 Sudan",name:"Sudan",flag:"🇸🇩"},{value:"se",label:"🇸🇪 Sweden",name:"Sweden",flag:"🇸🇪"},{value:"ch",label:"🇨🇭 Switzerland",name:"Switzerland",flag:"🇨🇭"},{value:"sy",label:"🇸🇾 Syria",name:"Syria",flag:"🇸🇾"},{value:"tw",label:"🇹🇼 Taiwan",name:"Taiwan",flag:"🇹🇼"},{value:"th",label:"🇹🇭 Thailand",name:"Thailand",flag:"🇹🇭"},{value:"tn",label:"🇹🇳 Tunisia",name:"Tunisia",flag:"🇹🇳"},{value:"tr",label:"🇹🇷 Turkey",name:"Turkey",flag:"🇹🇷"},{value:"ua",label:"🇺🇦 Ukraine",name:"Ukraine",flag:"🇺🇦"},{value:"gb",label:"🇬🇧 UK",name:"United Kingdom",flag:"🇬🇧"},{value:"us",label:"🇺🇸 USA",name:"United States",flag:"🇺🇸"},{value:"ye",label:"🇾🇪 Yemen",name:"Yemen",flag:"🇾🇪"}]),te=a(null),ae=["You're not alone in the universe.","Every voice carries a story from across the stars.","Connection transcends distance in the cosmic web.","Discover new worlds through conversation.","In space, every voice matters."],ne=a(ae[Math.floor(Math.random()*ae.length)]),re=W(),se=re.socket,{isConnected:oe}=re,le=za(),{peerConnection:ie,remoteStream:ue,localStream:ce,connectionState:de,isAudioMuted:ve,partnerId:me,createOffer:pe,handleOffer:fe,handleAnswer:ge,handleIceCandidate:he,toggleMicrophone:ye,closeConnection:be,restoreMicrophoneState:xe,diagnoseAndFixConnection:we}=le,ke=function(){const e=ha();return W(),Wr||(qr=new Nr(e),Gr=new Hr(qr),Wr=!0),{currentPartnerId:$r,setCurrentPartner:function(e){$r.value=e,Gr&&Gr.setCurrentPartner(e)},sendMessage:function(e,t=null){const a=t||$r.value;return!!(a&&e.trim()&&Gr)&&Gr.sendMessage(e,a)},resendMessage:function(e,t){return!!Gr&&Gr.resendMessage(e,t)},getMessages:function(e){return e&&Gr?Gr.getMessages(e):[]},hasUnreadMessages:function(e){return!(!e||!Gr)&&Gr.hasUnreadMessages(e)},markAsRead:function(e){e&&Gr&&Gr.markAsRead(e)},handleTyping:function(e){e&&Gr&&Gr.sendTypingIndicator(e)},clearChat:function(e){Gr&&Gr.clearChat(e)},clearAllChats:function(){Gr&&Gr.clearAllChats()}}}(),Se=O(),_e=a(Se.params.roomId||null);m(()=>_e.value,e=>{e&&(f.value=!0)},{immediate:!0});const Ce=p(()=>ee.value.filter(e=>"any"!==e.value&&!q.value.includes(e.value)&&!G.value.includes(e.value))),Te=p(()=>ee.value.filter(e=>"any"!==e.value&&!G.value.includes(e.value)&&!q.value.includes(e.value))),Ee=a(""),Ie=a(!1),Ae=a(!1),Re=a(""),Be=a(null),Pe=async()=>{await ye(),u.value=ve.value,"connected"===t.value&&setTimeout(()=>{const e=document.querySelector("audio");e&&e.paused&&e.play().catch(()=>{})},300)},Me=()=>{le.connectionState.value;r.value=null,s.value=null,be(),F.value=[],o.value="",Ee.value="",v.value=!1,f.value=!1,se.value&&se.value.emit("leave-queue")},Oe=async()=>{if(!ce.value)try{await le.initializeLocalStream()}catch(e){return void alert("Please allow microphone access to use voice chat")}se.value&&se.value.emit("ping"),Ae.value?rt("Please wait before trying again"):se.value&&(r.value?(Ie.value=!0,t.value="searching",se.value.emit("disconnect-partner",{reason:"skip"}),be(),r.value=null,s.value=null,F.value=[],o.value="",se.value.emit("join-queue",{vibe:H.value,preferences:{preferredCountries:q.value.length?q.value:void 0,blockedCountries:G.value.length?G.value:void 0}}),L.value++,setTimeout(()=>{Ie.value=!1},500)):(r.value=null,s.value=null,t.value="searching",o.value="",se.value.emit("join-queue",{vibe:H.value,preferences:{preferredCountries:q.value.length?q.value:void 0,blockedCountries:G.value.length?G.value:void 0}}),L.value++))},je=()=>{v.value=!v.value,v.value&&r.value&&ke.markAsRead(r.value)},De=e=>{if(se.value&&r.value){const t=Wa();se.value.emit("chat-message",{id:t,text:e,to:r.value,timestamp:Date.now()}),F.value.push({id:t,message:e,isOwn:!0,timestamp:Date.now()})}},Le=e=>{if(se.value&&r.value){const t=`invite-${Date.now()}-${Math.floor(1e4*Math.random())}`;se.value.emit("game-invite",{gameType:e,to:r.value,inviteId:t}),pt("Game invitation sent!","info")}else pt("Cannot send invitation - no partner connected","error")},Ue=()=>{q.value=[],G.value=[],localStorage.removeItem("preferredCountries"),localStorage.removeItem("blockedCountries"),bt()},Fe=()=>{B.value=!1,V.value="",J.value="",Y.value=!1,K.value=!1,Xe(),ze(),Je()},ze=()=>{const e=document.createElement("div");e.className="fixed bottom-4 right-4 bg-emerald-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",e.innerHTML='\n    <div class="flex items-center gap-2">\n      <span>✓</span>\n      <span>Filter settings applied successfully</span>\n    </div>\n  ',document.body.appendChild(e),setTimeout(()=>{e.classList.add("opacity-0","transition-opacity","duration-300"),setTimeout(()=>{document.body.removeChild(e)},300)},3e3)},Ne=e=>{const t=ee.value.find(t=>t.value===e);return t?t.flag:"🏳️"},He=e=>{const t=ee.value.find(t=>t.value===e);return t?t.name:"Earth"},$e=(e,t,a)=>{e.value=!e.value,e.value&&(t.forEach(e=>e.value=!1),(null==a?void 0:a.updatePositions)&&Ve(),(null==a?void 0:a.resetSearch)&&(a.resetSearch.query.value="",a.resetSearch.list.value=[...a.resetSearch.source]))},qe=e=>{"vibe"===e?($.value=!$.value,Y.value=!1,K.value=!1):"preferred"===e?(it(),Y.value&&(V.value="",X.value=[...Ce.value],Ve())):"blocked"===e&&(ut(),K.value&&(J.value="",Z.value=[...Te.value],Ve()))},Ge=e=>{const t=Q.find(t=>t.value===e);return t?t.emoji:"🌟"},We=e=>{const t=Q.find(t=>t.value===e);return t?t.text:"Go With the Flow"},Ye=a(null),Ke=a(null),Ve=()=>{T(()=>{var e,t;const a=null==(e=Ye.value)?void 0:e.getBoundingClientRect(),n=null==(t=Ke.value)?void 0:t.getBoundingClientRect(),r=document.querySelector(".preferred-outer"),s=document.querySelector(".blocked-outer");a&&r&&(r.style.left=`${a.left}px`,r.style.top=`${a.bottom+5}px`,r.style.width=`${a.width}px`),n&&s&&(s.style.left=`${n.left}px`,s.style.top=`${n.bottom+5}px`,s.style.width=`${n.width}px`)})},Xe=()=>{localStorage.setItem("preferredCountries",JSON.stringify(q.value)),localStorage.setItem("blockedCountries",JSON.stringify(G.value))},Je=()=>{se.value&&oe.value&&(se.value.emit("startMatching",{preferredCountries:q.value.length>0?q.value:null,blockedCountries:G.value}),t.value="searching",o.value="")};m(t,e=>{"connected"===e?(d&&clearInterval(d),d=setInterval(()=>{r.value&&"connected"!==de.value&&["failed","closed","disconnected"].includes(de.value)&&(t.value="disconnected",r.value=null,s.value=null)},2e3)):"disconnected"===e&&d&&(clearInterval(d),d=null)}),n(async()=>{var e,a,n,l,i,c;(async()=>{try{const e=await fetch("/api/countries");if(!e.ok)throw new Error("Failed to load countries");let t=await e.json();if(!t||0===t.length)return;t=t.filter(e=>"il"!==e.value),t.some(e=>"ps"===e.value)||t.push({value:"ps",label:"🇵🇸 Palestine",name:"Palestine",flag:"🇵🇸"}),t.some(e=>"eg"===e.value)||t.push({value:"eg",label:"🇪🇬 Egypt",name:"Egypt",flag:"🇪🇬"}),t.sort((e,t)=>e.name.localeCompare(t.name)),ee.value=[{value:"any",label:"🌍 Any Country",name:"Any Country",flag:"🌍"},...t],X.value=[...Ce.value],Z.value=[...Te.value]}catch(e){}})();try{const e=localStorage.getItem("preferredCountries"),t=localStorage.getItem("blockedCountries");e&&(q.value=JSON.parse(e)),t&&(G.value=JSON.parse(t));const a=localStorage.getItem("autoReconnect");a&&(U.value="true"===a)}catch(d){}se.value&&(se.value.on("filters-updated",e=>{e.success}),se.value.on("user-location",e=>{e&&e.countryCode&&e.country&&(te.value=e,0===q.value.length&&"unknown"!==e.countryCode&&"earth"!==e.countryCode&&(q.value.push(e.countryCode),Xe()))}),se.value.on("online-count",e=>{let t;if("number"==typeof e)t=e;else{if("object"!=typeof e||null===e||!("count"in e))return;t=e.count}D.value=t}),se.value.on("online-count-update",e=>{D.value=e.count}),se.value.on("matched",e=>{t.value="matched",o.value="",r.value=e.partnerId,s.value={id:e.partnerId,country:e.country||"Earth",countryCode:e.countryCode||"unknown",flag:e.flag||"🌍",vibe:e.vibe||"any"},z.value.unshift({id:Date.now().toString(),country:s.value.country,flag:s.value.flag,timestamp:Date.now()}),z.value.length>3&&(z.value=z.value.slice(0,3)),e.partnerId&&(pe(e.partnerId),setTimeout(()=>{"matched"===t.value&&"connected"===de.value&&(t.value="connected")},2e3))}),se.value.on("direct-connection-established",e=>{t.value="connected",r.value=e.partnerId,s.value={id:e.partnerId,country:e.country||"Earth",countryCode:e.countryCode||"unknown",flag:e.flag||"🌍"}}),se.value.on("user-skipped",e=>{ct("disconnecting",{reason:"skip",message:"The other user skipped this conversation",skipDelay:!1})}),se.value.on("user-disconnected",e=>{let t;t="connection-lost"===e.reason?"The other user's connection was lost":"The other user disconnected",ct("disconnecting",{reason:"disconnected",message:t})}),se.value.on("skip-confirmed",e=>{}),se.value.on("disconnect-confirmed",e=>{}),se.value.on("chat-message",e=>{F.value.push({id:e.id||Date.now().toString(),message:e.text||e.message||"",isOwn:!1,timestamp:e.timestamp||Date.now()}),e.id&&e.from&&se.value&&se.value.emit("message-received",{id:e.id,to:e.from})}),se.value.on("error",e=>{if("rate-limit"===e.type){rt(`Please wait ${e.waitTime||60} seconds before trying again`,3e3),"searching"===t.value&&(t.value="disconnected")}}),se.value.on("voice-offer",Ze),se.value.on("voice-answer",Qe),se.value.on("ice-candidate",et),se.value.emit("get-online-count"),setTimeout(()=>{U.value&&"disconnected"===t.value&&(Me(),t.value="searching",Oe())},2e3),se.value.on("queue-join-error",e=>{if("rate-limited"===e.reason){rt(`Please wait ${e.waitTime||60} seconds before trying to connect again`,3e3),"searching"===t.value&&(t.value="disconnected")}}),null==(e=se.value)||e.on("game-invite",e=>{gt.value={id:e.inviteId||`invite-${Date.now()}`,gameType:e.gameType,from:e.from};const t=new Audio("/sounds/game-invite.mp3");t.volume=.7,t.play().catch(e=>{}),"vibrate"in navigator&&navigator.vibrate([200,100,400])}),null==(a=se.value)||a.on("game-invite-accepted",e=>{var t;pt("Invitation accepted!","success"),r.value=e.from,f.value=!0,null==(t=se.value)||t.emit("game-join",{gameType:e.gameType,partnerId:e.from}),window.dispatchEvent(new CustomEvent("game-invitation-accepted",{detail:{gameType:e.gameType,partnerId:e.from,inviteId:e.inviteId}}))}),null==(n=se.value)||n.on("game-invite-declined",e=>{pt("Invitation declined","error")}),null==(l=se.value)||l.on("game-invite-timeout",e=>{pt("Invitation expired","info")}),null==(i=se.value)||i.on("game-join-confirmed",e=>{}),null==(c=se.value)||c.on("game-invite-cancel",e=>{gt.value&&gt.value.id===e.inviteId&&(gt.value=null),f.value&&pt("Game invitation cancelled","info")})),document.addEventListener("click",at),window.addEventListener("resize",Ve),document.addEventListener("scroll",Ve,!0),(()=>{try{const e=localStorage.getItem("preferredCountries"),t=localStorage.getItem("blockedCountries");e&&(q.value=JSON.parse(e)),t&&(G.value=JSON.parse(t))}catch(d){}})(),await xe(),u.value=ve.value,window.addEventListener("connection-closed",()=>{}),window.addEventListener("connection-state-changed",e=>{if(("disconnected"===e.detail.state||"failed"===e.detail.state)&&"disconnected"!==t.value&&"disconnecting"!==t.value){const t=e.detail.temporary?"Connection temporarily lost. Trying to reconnect...":"Connection lost. The call has ended.";ct("disconnecting",{reason:e.detail.reason||"network-disconnect",message:t,temporary:e.detail.temporary})}}),window.addEventListener("queue-status-changed",st)}),P(()=>{be(),d&&(clearInterval(d),d=null),se.value&&(se.value.off("online-count"),se.value.off("matched"),se.value.off("direct-connection-established"),se.value.off("user-skipped"),se.value.off("user-disconnected"),se.value.off("skip-confirmed"),se.value.off("disconnect-confirmed"),se.value.off("queue-join-error"),se.value.off("chat-message"),se.value.off("error"),se.value.off("voice-offer"),se.value.off("voice-answer"),se.value.off("ice-candidate"),se.value.off("online-count-update"),se.value.off("game-invite"),se.value.off("game-invite-accepted"),se.value.off("game-invite-declined"),se.value.off("game-invite-timeout"),se.value.off("game-invite-cancel"),se.value.off("game-join-confirmed")),document.removeEventListener("click",at),window.removeEventListener("resize",Ve),document.removeEventListener("scroll",Ve,!0),window.removeEventListener("connection-closed",()=>{}),Be.value&&(clearTimeout(Be.value),Be.value=null),window.removeEventListener("queue-status-changed",st)});const Ze=async e=>{fe(e.offer,e.from)},Qe=async e=>{ge(e.answer)},et=async e=>{he(e.candidate)};m(de,e=>{if("connected"===e)"matched"===t.value&&ct("connected");else if(["failed","closed","disconnected"].includes(e)&&r.value&&"disconnected"!==t.value&&"disconnecting"!==t.value){ct("disconnecting",{reason:"disconnected"===e?"network-disconnect":"disconnected",message:"disconnected"===e?"Connection lost. Trying to reconnect...":"Connection closed."})}});const tt=a(null),at=e=>{const t=e.target;if(tt.value&&!tt.value.contains(t)&&($.value=!1),Y.value){const e=Ye.value,a=document.querySelector(".preferred-outer");e&&a&&!e.contains(t)&&!a.contains(t)&&(Y.value=!1,V.value="")}if(K.value){const e=Ke.value,a=document.querySelector(".blocked-outer");e&&a&&!e.contains(t)&&!a.contains(t)&&(K.value=!1,J.value="")}};function nt(){se.value&&(se.value.emit("join-queue",{vibe:H.value,preferences:{preferredCountries:q.value.length?q.value:void 0,blockedCountries:G.value.length?G.value:void 0}}),t.value="searching")}function rt(e,t=3e3){Re.value=e,Ae.value=!0,Be.value&&clearTimeout(Be.value),Be.value=window.setTimeout(()=>{Ae.value=!1,Re.value="",Be.value=null},t)}m(U,e=>{localStorage.setItem("autoReconnect",e.toString()),e&&"disconnected"===t.value&&setTimeout(()=>{Me(),t.value="searching",Oe()},2e3)}),m(()=>t.value,e=>{"searching"===e&&(o.value="")});const st=e=>{const a=e;a.detail&&"timeout"===a.detail.status&&(U.value=!1,t.value="disconnected")},ot=()=>{if(Te.value)if(""===J.value.trim())Z.value=[...Te.value];else{const e=J.value.toLowerCase().trim();Z.value=Te.value.filter(t=>{const a=t.name.toLowerCase(),n=t.value.toLowerCase(),r=t.flag;return a.includes(e)||n.includes(e)||r.includes(e)||e.includes(a)||e.includes(r)})}},lt=()=>{if(Ce.value)if(""===V.value.trim())X.value=[...Ce.value];else{const e=V.value.toLowerCase().trim();X.value=Ce.value.filter(t=>{const a=t.name.toLowerCase(),n=t.value.toLowerCase(),r=t.flag;return a.includes(e)||n.includes(e)||r.includes(e)||e.includes(a)||e.includes(r)})}},it=()=>{$e(Y,[K,$],{updatePositions:!0,resetSearch:{query:V,list:X,source:Ce.value}})},ut=()=>{$e(K,[Y,$],{updatePositions:!0,resetSearch:{query:J,list:Z,source:Te.value}})},ct=(e,a={})=>{if("disconnecting"===e){if(Ee.value=a.reason||"disconnected",a.message&&(o.value=a.message,setTimeout(()=>{o.value=""},5e3)),t.value="disconnecting",!a.temporary){const e=a.skipDelay?0:2e3;setTimeout(()=>{"disconnecting"===t.value&&(r.value=null,s.value=null,t.value="disconnected",Ee.value="",o.value="",be(),U.value&&setTimeout(()=>{"disconnected"===t.value&&U.value&&(Me(),t.value="searching",Oe())},2e3))},e)}}else t.value=e,"searching"===e&&(o.value="")},dt=e=>{if(N.value=N.value.filter(t=>t.id!==e.inviteId),se.value){se.value.emit("game-invite-accept",{inviteId:e.inviteId,gameType:e.gameType,to:e.from});const t=new Audio("/sounds/game-start.mp3");t.volume=.5,t.play().catch(e=>{}),r.value=e.from,f.value=!0,se.value.emit("game-join",{gameType:e.gameType,partnerId:e.from}),window.dispatchEvent(new CustomEvent("game-invitation-accepted",{detail:{gameType:e.gameType,partnerId:e.from,inviteId:e.inviteId}}))}},vt=e=>{N.value=N.value.filter(t=>t.id!==e.inviteId),se.value&&se.value.emit("game-invite-decline",{inviteId:e.inviteId,to:e.from})},mt=e=>{if(N.value=N.value.filter(t=>t.id!==e.inviteId),se.value){const t=N.value.find(t=>t.id===e.inviteId);t&&se.value.emit("game-invite-timeout",{inviteId:e.inviteId,to:t.from})}},pt=(e,t="info")=>{const a=document.createElement("div");let n="bg-blue-600";"success"===t&&(n="bg-emerald-600"),"error"===t&&(n="bg-red-600"),a.className=`fixed bottom-4 right-4 ${n} text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in`,a.style.animationDuration="0.3s",a.innerHTML=e,document.body.appendChild(a),setTimeout(()=>{a.style.opacity="0",a.style.transition="opacity 0.3s ease",setTimeout(()=>{document.body.removeChild(a)},300)},3e3)},ft=e=>{var t;gt.value=null,null==(t=se.value)||t.emit("game-invite-decline",{to:e.from,inviteId:e.inviteId}),f.value&&r.value===e.from&&(f.value=!1);const a=new Audio("/sounds/click.mp3");a.volume=.3,a.play().catch(e=>{})},gt=a(null),ht=e=>{var t;gt.value=null,null==(t=se.value)||t.emit("game-invite-accept",{gameType:e.gameType,to:e.from,inviteId:e.inviteId}),f.value=!0;const a=new Audio("/sounds/game-start.mp3");a.volume=.5,a.play().catch(e=>{})},yt=e=>{gt.value=null;const t=gt.value;t&&t.id===e.inviteId&&f.value&&(f.value=!1)},bt=()=>{B.value=!1,V.value="",J.value="",Y.value=!1,K.value=!1};return(e,a)=>(c(),l("div",mu,[a[39]||(a[39]=I('<div class="fixed inset-0 pointer-events-none" data-v-dda6b7f1><div class="absolute top-1/4 left-1/4 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl animate-pulse" data-v-dda6b7f1></div><div class="absolute top-1/3 right-1/3 w-24 h-24 bg-violet-500/20 rounded-full blur-2xl animate-pulse delay-1000" data-v-dda6b7f1></div><div class="absolute bottom-1/4 left-1/3 w-28 h-28 bg-indigo-500/20 rounded-full blur-3xl animate-pulse delay-2000" data-v-dda6b7f1></div><div class="absolute top-1/2 right-1/4 w-20 h-20 bg-fuchsia-500/20 rounded-full blur-2xl animate-pulse delay-500" data-v-dda6b7f1></div></div>',1)),i(Di),h("div",pu,[h("header",fu,[h("div",gu,[a[19]||(a[19]=I('<div class="text-center mb-2 sm:mb-4" data-v-dda6b7f1><div class="inline-flex items-center gap-2" data-v-dda6b7f1><div class="w-6 h-6 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/50" data-v-dda6b7f1><span class="text-white text-xs" data-v-dda6b7f1>✨</span></div><h1 class="text-lg font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent drop-shadow-lg" data-v-dda6b7f1> SpaceTalk.live </h1></div></div>',1)),h("div",hu,[h("div",yu,[a[18]||(a[18]=h("div",{class:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"},null,-1)),h("span",null,b(D.value)+" online",1)]),L.value>0?(c(),l("div",bu," Today: "+b(L.value)+" voices ",1)):x("",!0)]),h("div",xu,[h("div",{class:"relative",ref_key:"vibeDropdownRef",ref:tt},[h("div",{onClick:a[0]||(a[0]=e=>qe("vibe")),class:"cursor-pointer bg-purple-500/20 border border-purple-500/30 rounded-full h-8 flex items-center justify-between px-3 text-xs shadow-lg shadow-purple-500/20 text-white hover:bg-purple-500/30 active:scale-95 transition-all duration-150"},[h("span",wu,b(Ge(H.value))+" "+b(We(H.value)),1),h("span",{class:y(["ml-2 text-xs transition-transform duration-300",{"rotate-180":$.value}])},"▼",2)]),$.value?(c(),l("div",ku,[h("div",Su,[(c(),l(w,null,k(Q,e=>h("div",{key:e.value,onClick:t=>{return a=e.value,H.value=a,void($.value=!1);var a},class:y(["px-3 py-2 hover:bg-gray-700/80 cursor-pointer transition-colors flex items-center gap-2",{"bg-gray-700/70":H.value===e.value}])},[h("span",Cu,b(e.emoji),1),h("span",null,b(e.text),1)],10,_u)),64))])])):x("",!0)],512),h("button",{onClick:a[1]||(a[1]=e=>B.value=!0),class:"bg-violet-500/20 border border-violet-500/30 rounded-full h-8 px-3 text-xs hover:bg-violet-500/30 active:scale-95 transition-all duration-150 shadow-lg shadow-violet-500/20"}," 🔍 Filters ")])])]),h("main",Tu,[h("div",Eu,[i(fs,{status:t.value,"partner-info":s.value,"error-message":o.value,"disconnect-reason":Ee.value,"show-status":!0},null,8,["status","partner-info","error-message","disconnect-reason"]),i(Wi,{onRetry:nt}),h("div",Iu,[h("div",Au,[_(h("input",{type:"checkbox",id:"auto-reconnect","onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),class:"opacity-0 w-0 h-0 absolute"},null,512),[[M,U.value]]),h("label",{for:"auto-reconnect",class:y(["toggle-label block overflow-hidden h-5 rounded-full bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-gradient-to-r from-indigo-500 to-purple-500 border-indigo-400":U.value}])},[h("span",{class:y(["dot absolute top-0.5 left-0.5 bg-white w-4 h-4 rounded-full transition-all duration-300 shadow-md",{"transform translate-x-5 bg-white":U.value}])},null,2)],2)]),h("label",{for:"auto-reconnect",class:y(["text-xs font-medium cursor-pointer transition-colors duration-300",U.value?"text-indigo-300":"text-gray-400"])}," Auto-call ",2)]),i(Cs,{"is-muted":u.value,"is-disabled":"connected"!==t.value,onToggleMute:Pe,onFindNext:Oe,onToggleChat:je,onToggleGames:a[3]||(a[3]=e=>f.value=!0),onToggleHistory:a[4]||(a[4]=e=>A.value=!0),onToggleDonation:a[5]||(a[5]=e=>g.value=!0)},null,8,["is-muted","is-disabled"]),h("div",Ru,[h("p",Bu,'"'+b(ne.value)+'"',1)])])]),h("footer",Pu,[h("div",Mu,[a[23]||(a[23]=h("h3",{class:"text-sm font-semibold text-emerald-400"},"Community Guidelines",-1)),a[24]||(a[24]=h("div",{class:"text-xs text-gray-300 space-y-0.5 sm:space-y-1"},[h("p",null,"• Must be 18+ years old to use this service"),h("p",null,"• Be respectful and kind to other users"),h("p",null,"• No harassment, hate speech, or inappropriate content"),h("p",null,"• Report any misconduct using the report feature"),h("p",null,"• Your privacy and safety are our priority")],-1)),a[25]||(a[25]=h("p",{class:"text-xs text-gray-400 mt-2 sm:mt-3"}," By using SpaceTalk.live, you agree to follow these guidelines ",-1)),h("div",Ou,[h("a",{href:"#",onClick:a[6]||(a[6]=S(e=>j.value=!0,["prevent"])),class:"bg-cyan-500/20 border border-cyan-500/30 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 text-cyan-300 hover:text-cyan-200 hover:bg-cyan-500/30 transition-all shadow-lg shadow-cyan-500/20 text-center"}," ℹ️ About "),a[20]||(a[20]=h("a",{href:"https://instagram.com",target:"_blank",class:"bg-pink-500/20 border border-pink-500/30 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 text-pink-300 hover:text-pink-200 hover:bg-pink-500/30 transition-all shadow-lg shadow-pink-500/20 text-center"}," 📷 Instagram ",-1)),a[21]||(a[21]=h("a",{href:"https://facebook.com",target:"_blank",class:"bg-blue-500/20 border border-blue-500/30 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 text-blue-300 hover:text-blue-200 hover:bg-blue-500/30 transition-all shadow-lg shadow-blue-500/20 text-center"}," 📘 Facebook ",-1)),a[22]||(a[22]=h("a",{href:"mailto:Info@spacetalk.live",class:"bg-emerald-500/20 border border-emerald-500/30 rounded-full px-2 py-1 sm:px-3 sm:py-1.5 text-emerald-300 hover:text-emerald-200 hover:bg-emerald-500/30 transition-all shadow-lg shadow-emerald-500/20 text-center"}," 📧 Contact ",-1))])])])]),A.value?(c(),l("div",ju,[h("div",Du,[h("div",Lu,[a[26]||(a[26]=h("h2",{class:"text-lg font-semibold text-indigo-400"},"📞 Call History",-1)),h("button",{onClick:a[7]||(a[7]=e=>A.value=!1),class:"text-gray-400 hover:text-white text-xl"}," ✕ ")]),h("div",Uu,[0===z.value.length?(c(),l("div",Fu,a[27]||(a[27]=[h("p",{class:"text-gray-400 text-sm"},"No recent calls",-1),h("p",{class:"text-xs text-gray-500 mt-1"},"Your last 3 conversations will appear here",-1)]))):(c(!0),l(w,{key:1},k(z.value,(e,t)=>{return c(),l("div",{key:e.id,class:"bg-gray-700 rounded-lg p-3 flex items-center justify-between hover:bg-gray-600 transition-colors"},[h("div",zu,[h("span",Nu,b(e.flag),1),h("div",null,[h("p",Hu,b(e.country),1),h("p",$u,b((a=e.timestamp,new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1)])]),h("div",qu," #"+b(t+1),1)]);var a}),128))]),z.value.length>0?(c(),l("p",Gu," History clears when you leave the page ")):x("",!0)])])):x("",!0),B.value?(c(),l("div",{key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-20 p-4",onClick:S(bt,["self"])},[h("div",Wu,[h("div",{class:"flex justify-between items-center mb-6"},[a[28]||(a[28]=h("h2",{class:"text-lg font-semibold text-emerald-400"},"Filters & Preferences",-1)),h("button",{onClick:bt,class:"text-gray-400 hover:text-white text-xl"}," ✕ ")]),h("div",Yu,[h("div",null,[a[30]||(a[30]=h("label",{class:"block text-sm font-medium mb-3 text-emerald-400"},"Preferred Countries",-1)),h("div",Ku,[0===q.value.length?(c(),l("p",Vu,"No countries selected")):(c(),l("div",Xu,[(c(!0),l(w,null,k(q.value,e=>(c(),l("span",{key:e,class:"bg-emerald-600 text-white px-2 py-1 rounded text-xs flex items-center gap-1"},[h("span",Ju,b(Ne(e)),1),E(" "+b(He(e))+" ",1),h("button",{onClick:t=>(e=>{q.value=q.value.filter(t=>t!==e)})(e),class:"text-emerald-200 hover:text-white ml-1"}," ✕ ",8,Zu)]))),128))]))]),h("div",{class:"mt-2 relative preferred-dropdown",ref_key:"preferredDropdownRef",ref:Ye},[h("div",{onClick:a[8]||(a[8]=e=>qe("preferred")),class:"cursor-pointer flex items-center justify-between w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white"},a[29]||(a[29]=[h("span",{class:"text-gray-300"},"Add preferred country...",-1),h("span",{class:"ml-1"},"▼",-1)]))],512),i(au,{"preferred-countries":q.value,"blocked-countries":G.value,"online-users":D.value,countries:ee.value},null,8,["preferred-countries","blocked-countries","online-users","countries"]),a[31]||(a[31]=h("p",{class:"text-xs text-gray-400 mt-2"},"You'll be matched only with users from these countries",-1))]),h("div",null,[a[33]||(a[33]=h("label",{class:"block text-sm font-medium mb-3 text-red-400"},"Blocked Countries",-1)),h("div",Qu,[0===G.value.length?(c(),l("p",ec,"No countries blocked")):(c(),l("div",tc,[(c(!0),l(w,null,k(G.value,e=>(c(),l("span",{key:e,class:"bg-red-600 text-white px-2 py-1 rounded text-xs flex items-center gap-1"},[h("span",ac,b(Ne(e)),1),E(" "+b(He(e))+" ",1),h("button",{onClick:t=>(e=>{G.value=G.value.filter(t=>t!==e),He(e),localStorage.setItem("blockedCountries",JSON.stringify(G.value))})(e),class:"text-red-200 hover:text-white ml-1"}," ✕ ",8,nc)]))),128))]))]),h("div",{class:"mt-2 relative blocked-dropdown",ref_key:"blockedDropdownRef",ref:Ke},[h("div",{onClick:a[9]||(a[9]=e=>qe("blocked")),class:"cursor-pointer flex items-center justify-between w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white"},a[32]||(a[32]=[h("span",{class:"text-gray-300"},"Add blocked country...",-1),h("span",{class:"ml-1"},"▼",-1)]))],512),a[34]||(a[34]=h("p",{class:"text-xs text-gray-400 mt-2"},"You won't be matched with users from these countries",-1))])]),h("div",{class:"flex gap-2 mt-8"},[h("button",{onClick:Ue,class:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-lg text-sm transition-colors"}," Clear All "),h("button",{onClick:Fe,class:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 px-4 rounded-lg text-sm transition-colors"}," Apply Filters ")])])])):x("",!0),Y.value?(c(),l("div",rc,[h("div",sc,[h("div",oc,[_(h("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>V.value=e),type:"text",placeholder:"Search countries...",class:"w-full px-3 py-2 bg-gray-800 rounded text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onInput:lt},null,544),[[C,V.value]])]),0===Ce.value.length?(c(),l("div",lc,"No more countries available")):x("",!0),(c(!0),l(w,null,k(X.value,e=>(c(),l("div",{key:e.value,onClick:()=>{var t;(t=e.value)&&!q.value.includes(t)&&q.value.push(t),qe("preferred")},class:"cursor-pointer px-3 py-2 hover:bg-gray-600 flex items-center gap-2"},[h("span",uc,b(e.flag),1),h("span",cc,b(e.name),1)],8,ic))),128))])])):x("",!0),K.value?(c(),l("div",dc,[h("div",vc,[h("div",mc,[_(h("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>J.value=e),type:"text",placeholder:"Search countries...",class:"w-full px-3 py-2 bg-gray-800 rounded text-sm text-white focus:outline-none focus:ring-2 focus:ring-red-500",onInput:ot},null,544),[[C,J.value]])]),0===Te.value.length?(c(),l("div",pc,"No more countries available")):x("",!0),(c(!0),l(w,null,k(Z.value,e=>(c(),l("div",{key:e.value,onClick:()=>{var t;(t=e.value)&&!G.value.includes(t)&&(G.value.push(t),He(t),localStorage.setItem("blockedCountries",JSON.stringify(G.value))),qe("blocked")},class:"cursor-pointer px-3 py-2 hover:bg-gray-600 flex items-center gap-2"},[h("span",gc,b(e.flag),1),h("span",hc,b(e.name),1)],8,fc))),128))])])):x("",!0),i(Ls,{"is-open":v.value,onClose:a[12]||(a[12]=e=>v.value=!1),messages:F.value,onSendMessage:De,"is-connected":"connected"===t.value},null,8,["is-open","messages","is-connected"]),i(Ai,{"is-open":f.value,onClose:a[13]||(a[13]=e=>f.value=!1),"is-connected":"connected"===t.value,onSelectGame:Le,"partner-id":r.value||"","initial-game-room-id":_e.value},null,8,["is-open","is-connected","partner-id","initial-game-room-id"]),i(Oi,{"is-open":g.value,onClose:a[14]||(a[14]=e=>g.value=!1)},null,8,["is-open"]),j.value?(c(),l("div",yc,[h("div",bc,[h("div",xc,[a[35]||(a[35]=h("div",{class:"flex items-center gap-2"},[h("div",{class:"w-8 h-8 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/50"},[h("span",{class:"text-white text-lg"},"✨")]),h("h2",{class:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent drop-shadow-lg"}," About SpaceTalk ")],-1)),h("button",{onClick:a[15]||(a[15]=e=>j.value=!1),class:"text-gray-400 hover:text-white text-xl transition-colors"}," ✕ ")]),h("div",wc,[a[36]||(a[36]=I('<p class="text-lg font-medium text-center mb-6 text-cyan-300" data-v-dda6b7f1> SpaceTalk — where strangers become voices in the void... and maybe new friends. </p><div class="bg-purple-900/30 p-4 rounded-lg border border-purple-500/20" data-v-dda6b7f1><p class="mb-4" data-v-dda6b7f1>Tired of endless scrolling?</p><p class="mb-4" data-v-dda6b7f1>Sick of typing and deleting that message 5 times?</p><p class="mb-4" data-v-dda6b7f1>Yeah — us too.</p><p class="mt-6" data-v-dda6b7f1>That&#39;s why we built SpaceTalk: a place where you can simply call someone, talk, and see where the conversation goes. No profiles, no DMs, no filters — just your voice and theirs, connected across the stars (well, the internet, but stars sound cooler ✨).</p></div>',2)),h("div",kc,[h("button",{onClick:a[16]||(a[16]=e=>j.value=!1),class:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white px-6 py-3 rounded-full text-sm font-medium transition-all shadow-lg shadow-cyan-500/30"}," Start Talking Now ")])])])])):x("",!0),"connected"===t.value?(c(),l("div",Sc,[i(Ui,{showControls:!1})])):x("",!0),(c(!0),l(w,null,k(N.value,e=>(c(),R(vu,{key:e.id,"invite-id":e.id,"game-type":e.gameType,from:e.from,onAccept:dt,onDecline:vt,onTimeout:mt},null,8,["invite-id","game-type","from"]))),128)),Ae.value?(c(),l("div",_c,[h("div",Cc,[h("div",Tc,[a[37]||(a[37]=h("div",{class:"w-20 h-20 mx-auto mb-4 rounded-full bg-purple-800 flex items-center justify-center"},[h("span",{class:"text-3xl"},"⏱️")],-1)),a[38]||(a[38]=h("p",{class:"text-white text-lg font-semibold mb-1"},"Rate Limit Reached",-1)),h("p",Ec,b(Re.value),1)]),h("div",Ic,[h("button",{onClick:a[17]||(a[17]=e=>Ae.value=!1),class:"bg-purple-700 hover:bg-purple-600 text-white px-6 py-2 rounded-full text-sm transition-colors duration-300"}," OK ")])])])):x("",!0),gt.value?(c(),R(vu,{key:7,gameType:gt.value.gameType,from:gt.value.from,inviteId:gt.value.id,onAccept:ht,onDecline:ft,onTimeout:yt},null,8,["gameType","from","inviteId"])):x("",!0)]))}}),[["__scopeId","data-v-dda6b7f1"]]),Rc=j({history:D("/"),routes:[{path:"/",name:"home",component:Ac},{path:"/game/:roomId",name:"game",component:Ac,props:!0}]});try{const e=console.log,t=console.error,a=console.warn,n=console.debug,r=console.info,s=(...e)=>{};console.log=s,console.debug=s,console.info=s,console.warn=s,console.error=(...e)=>{t.apply(console,e)},window.__restoreConsole=()=>{console.log=e,console.error=t,console.warn=a,console.debug=n,console.info=r}}catch(Pc){}const Bc=L(K);Bc.use(Rc),Bc.mount("#app");
